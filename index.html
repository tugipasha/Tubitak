<!doctype html>
<html lang="tr" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AkÄ±llÄ± Ev Kiralama Sistemi</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { extend: {} }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&amp;family=Inter:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body { box-sizing: border-box; }
    * { font-family: 'Inter', sans-serif; }
    h1, h2, h3, h4, h5, h6, .font-heading { font-family: 'Poppins', sans-serif; }
    .glass-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
    .float-animation { animation: float 6s ease-in-out infinite; }
    .float-animation-delayed { animation: float 6s ease-in-out infinite; animation-delay: -2s; }
    @keyframes float { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-20px) rotate(5deg); } }
    @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 20px rgba(79, 142, 247, 0.3); } 50% { box-shadow: 0 0 40px rgba(79, 142, 247, 0.6); } }
    .pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
    @keyframes slide-up { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    .slide-up { animation: slide-up 0.6s ease-out forwards; }
    .slide-up-delayed { animation: slide-up 0.6s ease-out forwards; animation-delay: 0.1s; opacity: 0; }
    .slide-up-delayed-2 { animation: slide-up 0.6s ease-out forwards; animation-delay: 0.2s; opacity: 0; }
    .room-card { transition: all 0.3s ease; }
    .room-card:hover:not(.disabled) { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); }
    .room-card.disabled { opacity: 0.6; cursor: not-allowed; }
    .toggle-switch { width: 56px; height: 28px; background: #E5E7EB; border-radius: 14px; position: relative; cursor: pointer; transition: background 0.3s ease; }
    .toggle-switch.active { background: #30C48D; }
    .toggle-switch::after { content: ''; position: absolute; width: 24px; height: 24px; background: white; border-radius: 50%; top: 2px; left: 2px; transition: transform 0.3s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
    .toggle-switch.active::after { transform: translateX(28px); }
    .ticket-edge { position: relative; }
    .ticket-edge::before, .ticket-edge::after { content: ''; position: absolute; width: 20px; height: 20px; background: #F5F7FA; border-radius: 50%; top: 50%; transform: translateY(-50%); }
    .ticket-edge::before { left: -10px; }
    .ticket-edge::after { right: -10px; }
    input[type="range"] { -webkit-appearance: none; height: 8px; background: #E5E7EB; border-radius: 4px; }
    input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 24px; height: 24px; background: #4F8EF7; border-radius: 50%; cursor: pointer; }
    .sidebar-item { transition: all 0.2s ease; }
    .sidebar-item:hover { background: rgba(79, 142, 247, 0.1); }
    .sidebar-item.active { background: rgba(79, 142, 247, 0.15); border-left: 3px solid #4F8EF7; }
    .toast { animation: toast-in 0.3s ease-out; }
    @keyframes toast-in { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
    .lang-btn { transition: all 0.2s ease; }
    .lang-btn:hover { transform: scale(1.05); }
    .lang-btn.active { box-shadow: 0 0 0 2px #4F8EF7; }
    
    /* Dark Mode Transitions */
    .dark-transition { transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease; }
    
    /* Dark Mode Overrides */
    .dark .glass-card { background: rgba(31, 41, 55, 0.95); }
    .dark input, .dark select, .dark textarea { background-color: #374151 !important; border-color: #4B5563 !important; color: #F9FAFB !important; }
    .dark input::placeholder { color: #9CA3AF !important; }
    .dark .room-card:not(.disabled) { background-color: #1F2937; }
    .dark .room-card.disabled { background-color: #111827; }
    .dark .filter-btn.bg-white { background-color: #374151 !important; }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-[#F5F7FA] dark:bg-gray-900 overflow-auto dark-transition">
  <div id="app" class="h-full w-full"><!-- Toast Container -->
   <div id="toast-container" class="fixed top-4 right-4 z-[100] space-y-2"></div><!-- Language & Theme Selector - Fixed Top Right on All Pages -->
   <div class="fixed top-4 right-4 z-[200] flex gap-2"><button onclick="toggleDarkMode()" id="theme-toggle" class="theme-btn w-10 h-10 rounded-xl bg-white dark:bg-gray-800 shadow-lg flex items-center justify-center text-lg hover:shadow-xl transition-all" title="Dark Mode"> <span id="theme-icon">ğŸŒ™</span> </button> <button onclick="setLanguage('tr')" class="lang-btn w-10 h-10 rounded-xl bg-white dark:bg-gray-800 shadow-lg flex items-center justify-center text-lg hover:shadow-xl" data-lang="tr" title="TÃ¼rkÃ§e">ğŸ‡¹ğŸ‡·</button> <button onclick="setLanguage('en')" class="lang-btn w-10 h-10 rounded-xl bg-white dark:bg-gray-800 shadow-lg flex items-center justify-center text-lg hover:shadow-xl" data-lang="en" title="English">ğŸ‡¬ğŸ‡§</button> <button onclick="setLanguage('de')" class="lang-btn w-10 h-10 rounded-xl bg-white dark:bg-gray-800 shadow-lg flex items-center justify-center text-lg hover:shadow-xl" data-lang="de" title="Deutsch">ğŸ‡©ğŸ‡ª</button>
   </div><!-- Screen 1: Welcome -->
   <div id="screen-welcome" class="screen h-full w-full flex flex-col items-center justify-center p-6 relative overflow-hidden dark:bg-gray-900">
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
     <div class="absolute top-20 left-10 text-6xl opacity-20 float-animation">
      ğŸ¡
     </div>
     <div class="absolute top-40 right-20 text-5xl opacity-15 float-animation-delayed">
      ğŸ”‘
     </div>
     <div class="absolute bottom-32 left-20 text-5xl opacity-15">
      ğŸ’¡
     </div>
     <div class="absolute top-1/3 left-1/4 w-64 h-64 bg-[#4F8EF7] rounded-full opacity-10 dark:opacity-20 blur-3xl"></div>
    </div>
    <div class="relative z-10 text-center max-w-md"><!-- Logo AlanÄ± - DeÄŸiÅŸtirilebilir -->
     <div id="app-logo" class="w-28 h-28 bg-gradient-to-br from-[#4F8EF7] to-[#30C48D] rounded-3xl flex items-center justify-center mx-auto mb-8 shadow-2xl pulse-glow slide-up overflow-hidden"><!-- Logo: Kendi logonuzu kullanmak iÃ§in logo_url ayarÄ±nÄ± kullanÄ±n veya aÅŸaÄŸÄ±daki img'yi dÃ¼zenleyin --> <img id="custom-logo" src="" alt="Logo" class="w-full h-full object-contain p-3 hidden" onerror="this.style.display='none'; document.getElementById('default-logo-icon').style.display='block';"> <span id="default-logo-icon" class="text-5xl">ğŸ¡</span>
     </div>
     <h1 id="main-title" class="font-heading text-3xl md:text-4xl font-bold text-gray-800 dark:text-white mb-4 slide-up-delayed" data-i18n="app_title">AkÄ±llÄ± Ev Kiralama Sistemi</h1>
     <p id="main-subtitle" class="text-gray-500 dark:text-gray-400 text-lg mb-10 slide-up-delayed-2" data-i18n="welcome_subtitle">AkÄ±llÄ± odalara anlÄ±k rezervasyon, kontrol ve giriÅŸ sistemi</p>
     <div class="space-y-4"><button onclick="showScreen('login')" class="w-full py-4 bg-[#4F8EF7] text-white font-semibold rounded-2xl shadow-lg shadow-[#4F8EF7]/30 hover:bg-[#3D7CE5] transition-all" data-i18n="login">GiriÅŸ Yap</button> <button onclick="showScreen('register')" class="w-full py-4 bg-white dark:bg-gray-800 text-[#4F8EF7] font-semibold rounded-2xl border-2 border-[#4F8EF7] hover:bg-[#4F8EF7]/5 dark:hover:bg-[#4F8EF7]/10 transition-all" data-i18n="register">Ãœye Ol</button>
     </div>
    </div>
   </div><!-- Screen 2: Login -->
   <div id="screen-login" class="screen h-full w-full hidden flex-col items-center justify-center p-6 bg-gradient-to-br from-[#F5F7FA] to-[#E8F4FD] dark:from-gray-900 dark:to-gray-800">
    <div class="w-full max-w-md">
     <div class="glass-card rounded-3xl shadow-xl p-8">
      <div class="text-center mb-8">
       <div class="w-16 h-16 bg-[#4F8EF7]/10 rounded-2xl flex items-center justify-center mx-auto mb-4"><span class="text-3xl">ğŸ”</span>
       </div>
       <h2 class="font-heading text-2xl font-bold text-gray-800 dark:text-white" data-i18n="login">GiriÅŸ Yap</h2>
       <p class="text-gray-500 dark:text-gray-400 text-sm mt-2" data-i18n="access_account">HesabÄ±nÄ±za eriÅŸin</p>
      </div>
      <form id="login-form" onsubmit="handleLogin(event)" class="space-y-5">
       <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="login-tc" data-i18n="tc_id">T.C. Kimlik No</label> <input type="text" id="login-tc" maxlength="11" data-i18n-placeholder="tc_placeholder" placeholder="11 haneli T.C. Kimlik No" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] focus:ring-2 focus:ring-[#4F8EF7]/20 outline-none transition-all">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="login-password" data-i18n="password">Åifre</label> <input type="password" id="login-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] focus:ring-2 focus:ring-[#4F8EF7]/20 outline-none transition-all">
       </div>
       <div id="login-error" class="hidden p-3 bg-[#FF4B5C]/10 border border-[#FF4B5C]/20 rounded-xl text-[#FF4B5C] text-sm"></div><button type="submit" class="w-full py-4 bg-[#4F8EF7] text-white font-semibold rounded-xl shadow-lg shadow-[#4F8EF7]/30 hover:bg-[#3D7CE5] transition-all" data-i18n="login">GiriÅŸ Yap</button>
      </form>
      <div class="mt-6 text-center space-y-3"><button onclick="showScreen('register')" class="text-[#4F8EF7] hover:underline text-sm font-medium" data-i18n="no_account">HesabÄ±nÄ±z yok mu? Ãœye olun</button> <br><button onclick="showScreen('welcome')" class="text-gray-400 hover:text-gray-600 text-sm" data-i18n="back_home">â† Ana sayfaya dÃ¶n</button>
      </div>
     </div>
    </div>
   </div><!-- Screen 3: Register -->
   <div id="screen-register" class="screen h-full w-full hidden flex-col items-center justify-center p-6 overflow-auto dark:bg-gray-900">
    <div class="w-full max-w-lg py-8">
     <div class="mb-8">
      <div class="flex items-center justify-between mb-4"><span id="step-label" class="text-sm font-medium text-gray-600 dark:text-gray-400">AdÄ±m 1/4</span> <span id="step-title" class="text-sm font-medium text-[#4F8EF7]" data-i18n="personal_info">KiÅŸisel Bilgiler</span>
      </div>
      <div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
       <div id="progress-bar" class="h-full bg-gradient-to-r from-[#4F8EF7] to-[#30C48D] transition-all duration-500" style="width: 25%"></div>
      </div>
     </div>
     <div class="glass-card rounded-3xl shadow-xl p-8"><!-- Step 1 -->
      <div id="register-step-1" class="register-step">
       <h2 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-6">ğŸ‘¤ <span data-i18n="personal_info">KiÅŸisel Bilgiler</span></h2>
       <div class="space-y-4">
        <div class="grid grid-cols-2 gap-4">
         <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-name" data-i18n="first_name">Ad</label> <input type="text" id="reg-name" data-i18n-placeholder="your_name" placeholder="AdÄ±nÄ±z" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
         </div>
         <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-surname" data-i18n="last_name">Soyad</label> <input type="text" id="reg-surname" data-i18n-placeholder="your_surname" placeholder="SoyadÄ±nÄ±z" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
         </div>
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-phone" data-i18n="phone">Telefon</label> <input type="tel" id="reg-phone" placeholder="0(5XX) XXX XX XX" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-email" data-i18n="email">E-posta</label> <input type="email" id="reg-email" placeholder="ornek@email.com" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-tc" data-i18n="tc_id">T.C. Kimlik No</label> <input type="text" id="reg-tc" maxlength="11" data-i18n-placeholder="tc_placeholder" placeholder="11 haneli T.C. Kimlik No" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-gender" data-i18n="gender">Cinsiyet</label> <select id="reg-gender" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none bg-white"> <option value="" data-i18n-opt="select">SeÃ§iniz</option> <option value="male" data-i18n-opt="male">Erkek</option> <option value="female" data-i18n-opt="female">KadÄ±n</option> <option value="other" data-i18n-opt="prefer_not_say">Belirtmek Ä°stemiyorum</option> </select>
        </div>
       </div>
      </div><!-- Step 2 -->
      <div id="register-step-2" class="register-step hidden">
       <h2 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-6">ğŸ” <span data-i18n="account_info">Hesap Bilgileri</span></h2>
       <div class="space-y-4">
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-username" data-i18n="username">KullanÄ±cÄ± AdÄ±</label> <input type="text" id="reg-username" placeholder="kullanici.adi" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-password" data-i18n="password">Åifre</label> <input type="password" id="reg-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
         <div class="mt-2 p-3 bg-[#4F8EF7]/5 dark:bg-[#4F8EF7]/10 rounded-lg">
          <p class="text-xs text-gray-600 dark:text-gray-400 font-medium mb-1" data-i18n="password_requirements">Åifre gereksinimleri:</p>
          <ul class="text-xs text-gray-500 dark:text-gray-400 space-y-1">
           <li id="req-length">â—‹ <span data-i18n="req_length">En az 8 karakter</span></li>
           <li id="req-upper">â—‹ <span data-i18n="req_upper">En az 1 bÃ¼yÃ¼k harf</span></li>
           <li id="req-number">â—‹ <span data-i18n="req_number">En az 1 rakam</span></li>
           <li id="req-special">â—‹ <span data-i18n="req_special">En az 1 Ã¶zel karakter</span></li>
          </ul>
         </div>
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-password-confirm" data-i18n="password_confirm">Åifre Tekrar</label> <input type="password" id="reg-password-confirm" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
        </div>
       </div>
      </div><!-- Step 3 -->
      <div id="register-step-3" class="register-step hidden">
       <h2 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-6">ğŸ“‹ <span data-i18n="agreements">SÃ¶zleÅŸmeler</span></h2>
       <div class="space-y-4"><label class="flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors"> <input type="checkbox" id="agree-terms" class="w-5 h-5 mt-0.5 rounded border-gray-300 text-[#4F8EF7]">
         <div>
          <p class="font-medium text-gray-800 dark:text-white" data-i18n="terms_of_use">KullanÄ±m ÅartlarÄ±</p>
          <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="terms_desc">Hizmet kullanÄ±m koÅŸullarÄ±nÄ± okudum ve kabul ediyorum.</p>
         </div></label> <label class="flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors"> <input type="checkbox" id="agree-kvkk" class="w-5 h-5 mt-0.5 rounded border-gray-300 text-[#4F8EF7]">
         <div>
          <p class="font-medium text-gray-800 dark:text-white" data-i18n="privacy_policy">KVKK &amp; Gizlilik PolitikasÄ±</p>
          <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="privacy_desc">KiÅŸisel verilerimin iÅŸlenmesine iliÅŸkin aydÄ±nlatma metnini okudum.</p>
         </div></label>
        <div id="agreement-error" class="hidden p-3 bg-[#FF4B5C]/10 border border-[#FF4B5C]/20 rounded-xl text-[#FF4B5C] text-sm"></div>
       </div>
      </div><!-- Step 4 -->
      <div id="register-step-4" class="register-step hidden text-center py-8">
       <div class="w-24 h-24 bg-[#30C48D]/10 rounded-full flex items-center justify-center mx-auto mb-6"><span class="text-5xl">ğŸ‰</span>
       </div>
       <h2 class="font-heading text-2xl font-bold text-gray-800 dark:text-white mb-3" data-i18n="register_success">Ãœyelik BaÅŸarÄ±lÄ±!</h2>
       <p class="text-gray-500 dark:text-gray-400 mb-8" data-i18n="register_success_desc">HesabÄ±nÄ±z baÅŸarÄ±yla oluÅŸturuldu.</p><button onclick="showScreen('login')" class="px-8 py-4 bg-[#30C48D] text-white font-semibold rounded-xl" data-i18n="login">GiriÅŸ Yap</button>
      </div>
      <div id="register-nav" class="flex gap-4 mt-8"><button onclick="prevStep()" id="btn-prev" class="flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-xl hidden" data-i18n="back">â† Geri</button> <button onclick="nextStep()" id="btn-next" class="flex-1 py-3 bg-[#4F8EF7] text-white font-semibold rounded-xl" data-i18n="next">Ä°leri â†’</button>
      </div>
      <div id="register-error" class="hidden mt-4 p-3 bg-[#FF4B5C]/10 border border-[#FF4B5C]/20 rounded-xl text-[#FF4B5C] text-sm"></div>
     </div><button onclick="showScreen('welcome')" class="text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 text-sm mt-6 block mx-auto" data-i18n="back_home">â† Ana sayfaya dÃ¶n</button>
    </div>
   </div><!-- Screen 4: Dashboard -->
   <div id="screen-dashboard" class="screen h-full w-full hidden">
    <div class="flex h-full"><!-- Sidebar -->
     <aside id="sidebar" class="w-72 bg-white dark:bg-gray-800 h-full shadow-xl flex flex-col fixed md:relative z-50 transform -translate-x-full md:translate-x-0 transition-transform duration-300">
      <div class="p-6 border-b border-gray-100 dark:border-gray-700">
       <div class="flex items-center gap-4">
        <div id="user-avatar" class="w-14 h-14 bg-gradient-to-br from-[#4F8EF7] to-[#30C48D] rounded-2xl flex items-center justify-center text-white text-xl font-bold">
         --
        </div>
        <div>
         <h3 id="user-fullname" class="font-heading font-semibold text-gray-800 dark:text-white">KullanÄ±cÄ±</h3>
         <p id="user-username" class="text-sm text-gray-400">@kullanici</p>
        </div>
       </div>
      </div>
      <nav class="flex-1 py-4"><button onclick="setActiveMenu(this); showDashboardSection('home')" class="sidebar-item active w-full flex items-center gap-4 px-6 py-3 text-left"> <span class="text-xl">ğŸ </span> <span class="font-medium text-gray-700 dark:text-gray-300" data-i18n="home">Ana Sayfa</span> </button> <button onclick="setActiveMenu(this); showScreen('locations')" class="sidebar-item w-full flex items-center gap-4 px-6 py-3 text-left"> <span class="text-xl">â•</span> <span class="font-medium text-gray-700 dark:text-gray-300" data-i18n="new_reservation">Yeni Rezervasyon</span> </button> <button onclick="setActiveMenu(this); showDashboardSection('history')" class="sidebar-item w-full flex items-center gap-4 px-6 py-3 text-left"> <span class="text-xl">ğŸ“‹</span> <span class="font-medium text-gray-700 dark:text-gray-300" data-i18n="reservation_history">Rezervasyon GeÃ§miÅŸi</span> </button> <button onclick="setActiveMenu(this); showDashboardSection('settings')" class="sidebar-item w-full flex items-center gap-4 px-6 py-3 text-left"> <span class="text-xl">âš™ï¸</span> <span class="font-medium text-gray-700 dark:text-gray-300" data-i18n="account_settings">Hesap AyarlarÄ±</span> </button>
      </nav>
      <div class="p-4 border-t border-gray-100 dark:border-gray-700"><button onclick="handleLogout()" class="w-full flex items-center gap-4 px-4 py-3 text-left text-[#FF4B5C] hover:bg-[#FF4B5C]/5 dark:hover:bg-[#FF4B5C]/10 rounded-xl"> <span class="text-xl">ï¿½ï¿½ï¿½</span> <span class="font-medium" data-i18n="logout">Ã‡Ä±kÄ±ÅŸ Yap</span> </button>
      </div>
     </aside><!-- Mobile Header -->
     <div class="md:hidden fixed top-0 left-0 right-0 bg-white dark:bg-gray-800 shadow-md z-40 px-4 py-3 flex items-center justify-between"><button onclick="toggleSidebar()" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl">
       <svg class="w-6 h-6 dark:text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
       </svg></button> <span class="font-heading font-semibold dark:text-white" data-i18n="smart_home">AkÄ±llÄ± Ev</span>
      <div id="mobile-avatar" class="w-10 h-10 bg-gradient-to-br from-[#4F8EF7] to-[#30C48D] rounded-xl flex items-center justify-center text-white text-sm font-bold">
       --
      </div>
     </div>
     <div id="sidebar-overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black/50 z-40 hidden md:hidden"></div><!-- Main Content -->
     <main class="flex-1 p-6 md:p-8 overflow-auto pt-20 md:pt-8 dark:bg-gray-900">
      <div id="dashboard-home" class="dashboard-section">
       <h1 id="welcome-title" class="font-heading text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-2">HoÅŸ Geldiniz! ğŸ‘‹</h1>
       <p class="text-gray-500 dark:text-gray-400 mb-8" data-i18n="dashboard_overview">AkÄ±llÄ± ev kiralama sisteminize genel bakÄ±ÅŸ</p>
       <div id="no-reservation-card" class="bg-white dark:bg-gray-800 rounded-3xl p-8 shadow-lg mb-8 text-center">
        <div class="w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-2xl flex items-center justify-center mx-auto mb-4"><span class="text-4xl">ğŸ </span>
        </div>
        <h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="no_active_reservation">Aktif Rezervasyonunuz Yok</h3>
        <p class="text-gray-500 dark:text-gray-400 mb-6" data-i18n="no_reservation_desc">Hemen yeni bir rezervasyon oluÅŸturun.</p><button onclick="showScreen('locations')" class="px-6 py-3 bg-[#4F8EF7] text-white font-semibold rounded-xl"> â• <span data-i18n="new_reservation">Yeni Rezervasyon</span> </button>
       </div>
       <div id="user-stats" class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg">
         <div class="text-3xl mb-2">
          ğŸ 
         </div>
         <p id="stat-total" class="text-2xl font-bold text-gray-800 dark:text-white">0</p>
         <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="total_stays">Toplam Konaklama</p>
        </div>
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg">
         <div class="text-3xl mb-2">
          â±ï¸
         </div>
         <p id="stat-hours" class="text-2xl font-bold text-gray-800 dark:text-white">0</p>
         <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="hours">Saat</p>
        </div>
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg">
         <div class="text-3xl mb-2">
          â­
         </div>
         <p class="text-2xl font-bold text-gray-800 dark:text-white">-</p>
         <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="avg_rating">Puan OrtalamasÄ±</p>
        </div>
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg">
         <div class="text-3xl mb-2">
          ğŸ’
         </div>
         <p id="stat-level" class="text-2xl font-bold text-[#4F8EF7]" data-i18n="starter">BaÅŸlangÄ±Ã§</p>
         <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="membership_level">Ãœyelik Seviyesi</p>
        </div>
       </div>
      </div>
      <div id="dashboard-history" class="dashboard-section hidden">
       <h1 class="font-heading text-2xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="reservation_history">Rezervasyon GeÃ§miÅŸi</h1>
       <p class="text-gray-500 dark:text-gray-400 mb-6" data-i18n="history_desc">TÃ¼m rezervasyonlarÄ±nÄ±zÄ± gÃ¶rÃ¼ntÃ¼leyin ve yÃ¶netin</p>
       <div class="flex gap-3 mb-6 overflow-x-auto pb-2"><button onclick="filterReservations('all')" class="filter-btn active px-4 py-2 bg-[#4F8EF7] text-white rounded-xl font-medium whitespace-nowrap" data-filter="all" data-i18n="all">TÃ¼mÃ¼</button> <button onclick="filterReservations('active')" class="filter-btn px-4 py-2 bg-white text-gray-600 rounded-xl font-medium whitespace-nowrap" data-filter="active" data-i18n="active_reservations">Aktif</button> <button onclick="filterReservations('completed')" class="filter-btn px-4 py-2 bg-white text-gray-600 rounded-xl font-medium whitespace-nowrap" data-filter="completed" data-i18n="completed_reservations">Tamamlanan</button> <button onclick="filterReservations('cancelled')" class="filter-btn px-4 py-2 bg-white text-gray-600 rounded-xl font-medium whitespace-nowrap" data-filter="cancelled" data-i18n="cancelled_reservations">Ä°ptal Edilen</button>
       </div>
       <div id="reservations-list" class="space-y-4"></div>
       <div id="no-reservations" class="hidden text-center py-12">
        <div class="w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-2xl flex items-center justify-center mx-auto mb-4"><span class="text-4xl">ğŸ“­</span>
        </div>
        <h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="no_reservations">Rezervasyon BulunamadÄ±</h3>
        <p class="text-gray-500 dark:text-gray-400" data-i18n="no_reservations_desc">Bu kategoride henÃ¼z rezervasyonunuz yok.</p>
       </div>
      </div>
      <div id="dashboard-settings" class="dashboard-section hidden">
       <h1 class="font-heading text-2xl font-bold text-gray-800 dark:text-white mb-6" data-i18n="account_settings">Hesap AyarlarÄ±</h1>
       <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6 max-w-2xl">
        <div class="space-y-6">
         <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="full_name">Ad Soyad</label> <input type="text" id="settings-name" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 dark:text-white" readonly>
         </div>
         <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="email">E-posta</label> <input type="email" id="settings-email" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 dark:text-white" readonly>
         </div>
         <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="phone">Telefon</label> <input type="tel" id="settings-phone" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 dark:text-white" readonly>
         </div>
        </div>
       </div>
      </div>
     </main>
    </div>
   </div><!-- Screen 5: Locations -->
   <div id="screen-locations" class="screen h-full w-full hidden overflow-auto dark:bg-gray-900">
    <div class="p-6 md:p-8 pt-16 md:pt-6"><button onclick="showScreen('dashboard')" class="flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 mb-6"> <span>â†</span> <span data-i18n="back_dashboard">Dashboard'a DÃ¶n</span> </button>
     <h1 class="font-heading text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="select_location">Konaklama NoktasÄ± SeÃ§in</h1>
     <p class="text-gray-500 dark:text-gray-400 mb-8" data-i18n="select_location_desc">Size en uygun lokasyonu seÃ§in</p>
     <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><button onclick="selectLocation('istanbul-kadikoy', 'Ä°stanbul - KadÄ±kÃ¶y')" class="room-card bg-white dark:bg-gray-800 rounded-3xl p-6 shadow-lg text-left">
       <div class="w-16 h-16 bg-[#4F8EF7]/10 rounded-2xl flex items-center justify-center mb-4">
        <span class="text-3xl">ğŸ </span>
       </div><h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-1">Ä°stanbul - KadÄ±kÃ¶y</h3><p class="text-gray-500 dark:text-gray-400 mb-4">Ä°stanbul, TÃ¼rkiye</p>
       <div class="flex items-center gap-2"><span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-sm">12 <span data-i18n="rooms">Oda</span></span> <span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-sm">8 <span data-i18n="available">MÃ¼sait</span></span>
       </div></button> <button onclick="selectLocation('istanbul-besiktas', 'Ä°stanbul - BeÅŸiktaÅŸ')" class="room-card bg-white dark:bg-gray-800 rounded-3xl p-6 shadow-lg text-left">
       <div class="w-16 h-16 bg-[#4F8EF7]/10 rounded-2xl flex items-center justify-center mb-4">
        <span class="text-3xl">ğŸ </span>
       </div><h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-1">Ä°stanbul - BeÅŸiktaÅŸ</h3><p class="text-gray-500 dark:text-gray-400 mb-4">Ä°stanbul, TÃ¼rkiye</p>
       <div class="flex items-center gap-2"><span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-sm">8 <span data-i18n="rooms">Oda</span></span> <span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-sm">5 <span data-i18n="available">MÃ¼sait</span></span>
       </div></button> <button onclick="selectLocation('ankara-cankaya', 'Ankara - Ã‡ankaya')" class="room-card bg-white dark:bg-gray-800 rounded-3xl p-6 shadow-lg text-left">
       <div class="w-16 h-16 bg-[#4F8EF7]/10 rounded-2xl flex items-center justify-center mb-4">
        <span class="text-3xl">ğŸ </span>
       </div><h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-1">Ankara - Ã‡ankaya</h3><p class="text-gray-500 dark:text-gray-400 mb-4">Ankara, TÃ¼rkiye</p>
       <div class="flex items-center gap-2"><span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-sm">15 <span data-i18n="rooms">Oda</span></span> <span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-sm">10 <span data-i18n="available">MÃ¼sait</span></span>
       </div></button>
     </div>
    </div>
   </div><!-- Screen 6: DateTime -->
   <div id="screen-datetime" class="screen h-full w-full hidden overflow-auto dark:bg-gray-900">
    <div class="p-6 md:p-8 pt-16 md:pt-6 max-w-2xl mx-auto"><button onclick="showScreen('locations')" class="flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 mb-6"> <span>â†</span> <span data-i18n="back_locations">Lokasyonlara DÃ¶n</span> </button>
     <h1 class="font-heading text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="select_datetime">Tarih &amp; Saat SeÃ§in</h1>
     <p id="datetime-location" class="text-gray-500 dark:text-gray-400 mb-8">Lokasyon</p>
     <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6 md:p-8">
      <div class="space-y-6">
       <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="checkin_datetime">GiriÅŸ Tarihi &amp; Saati</label> <input type="datetime-local" id="checkin" required class="w-full px-4 py-4 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none text-lg">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="checkout_datetime">Ã‡Ä±kÄ±ÅŸ Tarihi &amp; Saati</label> <input type="datetime-local" id="checkout" required class="w-full px-4 py-4 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none text-lg">
       </div>
       <div class="p-4 bg-[#FF4B5C]/10 rounded-xl">
        <p class="font-medium text-[#FF4B5C] text-sm">âš ï¸ <span data-i18n="max_duration_warning">Maksimum SÃ¼re UyarÄ±sÄ±</span></p>
        <p class="text-sm text-gray-600 dark:text-gray-400 mt-1" data-i18n="max_duration_desc">Tek seferde maksimum 24 saat konaklama yapabilirsiniz.</p>
       </div>
       <div id="datetime-error" class="hidden p-3 bg-[#FF4B5C]/10 rounded-xl text-[#FF4B5C] text-sm"></div><button onclick="validateDateTime()" class="w-full py-4 bg-[#4F8EF7] text-white font-semibold rounded-xl" data-i18n="show_available_rooms">MÃ¼sait OdalarÄ± GÃ¶ster</button>
      </div>
     </div>
    </div>
   </div><!-- Screen 7: Rooms -->
   <div id="screen-rooms" class="screen h-full w-full hidden overflow-auto dark:bg-gray-900">
    <div class="p-6 md:p-8 pt-16 md:pt-6"><button onclick="showScreen('datetime')" class="flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 mb-6"> <span>â†</span> <span data-i18n="back_datetime">Tarih SeÃ§imine DÃ¶n</span> </button>
     <h1 class="font-heading text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="select_room">Oda SeÃ§in</h1>
     <p id="rooms-info" class="text-gray-500 dark:text-gray-400 mb-4">Lokasyon â€¢ Tarih</p>
     <div class="flex items-center gap-6 mb-8">
      <div class="flex items-center gap-2">
       <div class="w-4 h-4 bg-[#30C48D] rounded-full"></div><span class="text-sm text-gray-600 dark:text-gray-400" data-i18n="available">MÃ¼sait</span>
      </div>
      <div class="flex items-center gap-2">
       <div class="w-4 h-4 bg-[#FF4B5C] rounded-full"></div><span class="text-sm text-gray-600 dark:text-gray-400" data-i18n="occupied">Dolu</span>
      </div>
     </div>
     <div id="rooms-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4"></div>
    </div>
   </div><!-- Screen 8: Payment -->
   <div id="screen-payment" class="screen h-full w-full hidden overflow-auto dark:bg-gray-900">
    <div class="p-6 md:p-8 pt-16 md:pt-6 max-w-2xl mx-auto"><button onclick="showScreen('rooms')" class="flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 mb-6"> <span>â†</span> <span data-i18n="back_room">Oda SeÃ§imine DÃ¶n</span> </button>
     <h1 class="font-heading text-2xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="reservation_payment">Rezervasyon &amp; Ã–deme</h1>
     <p class="text-gray-500 dark:text-gray-400 mb-8" data-i18n="final_step">Son adÄ±m - Ã–deme bilgilerinizi girin</p>
     <div class="grid md:grid-cols-2 gap-6">
      <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6">
       <h3 class="font-heading font-bold text-gray-800 dark:text-white mb-4" data-i18n="reservation_summary">Rezervasyon Ã–zeti</h3>
       <div class="space-y-4">
        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl"><span class="text-gray-600 dark:text-gray-400" data-i18n="room">Oda</span> <span id="summary-room" class="font-medium dark:text-white">#-</span>
        </div>
        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl"><span class="text-gray-600 dark:text-gray-400" data-i18n="location">Lokasyon</span> <span id="summary-location" class="font-medium dark:text-white">-</span>
        </div>
        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl"><span class="text-gray-600 dark:text-gray-400" data-i18n="checkin">GiriÅŸ</span> <span id="summary-checkin" class="font-medium dark:text-white">-</span>
        </div>
        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl"><span class="text-gray-600 dark:text-gray-400" data-i18n="checkout">Ã‡Ä±kÄ±ÅŸ</span> <span id="summary-checkout" class="font-medium dark:text-white">-</span>
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="guest_count">KiÅŸi SayÄ±sÄ±</label> <select id="guests" onchange="updatePrice()" class="w-full px-4 py-3 rounded-xl border border-gray-200 bg-white"> <option value="1" data-i18n-guest="1">1 KiÅŸi</option> <option value="2" selected data-i18n-guest="2">2 KiÅŸi</option> <option value="3" data-i18n-guest="3">3 KiÅŸi</option> <option value="4" data-i18n-guest="4">4 KiÅŸi</option> </select>
        </div>
       </div>
       <div class="mt-6 p-4 bg-[#4F8EF7]/5 dark:bg-[#4F8EF7]/10 rounded-xl">
        <div class="flex items-center justify-between mb-2"><span class="text-gray-600 dark:text-gray-400"><span id="price-hours">0</span> <span data-i18n="hour_unit">saat</span> x â‚º50</span> <span id="price-base" class="font-medium dark:text-white">â‚º0</span>
        </div>
        <div id="price-extra-row" class="flex items-center justify-between mb-2 hidden"><span class="text-gray-600 dark:text-gray-400"><span data-i18n="extra_person">Ek kiÅŸi</span></span> <span id="price-extra" class="font-medium dark:text-white">â‚º0</span>
        </div>
        <div class="border-t border-[#4F8EF7]/20 my-3"></div>
        <div class="flex items-center justify-between"><span class="font-bold text-gray-800 dark:text-white" data-i18n="total">Toplam</span> <span id="price-total" class="font-bold text-xl text-[#4F8EF7]">â‚º0</span>
        </div>
       </div>
      </div>
      <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6">
       <h3 class="font-heading font-bold text-gray-800 dark:text-white mb-4">ğŸ’³ <span data-i18n="card_info">Kart Bilgileri</span></h3>
       <p class="text-xs text-gray-400 mb-4 p-2 bg-yellow-50 dark:bg-yellow-900/30 rounded-lg">âš ï¸ <span data-i18n="demo_warning">Demo amaÃ§lÄ± - GerÃ§ek Ã¶deme yapÄ±lmaz</span></p>
       <form id="payment-form" onsubmit="handlePayment(event)" class="space-y-4">
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="card_name">Kart Ãœzerindeki Ä°sim</label> <input type="text" id="card-name" placeholder="AD SOYAD" required class="w-full px-4 py-3 rounded-xl border border-gray-200 uppercase">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="card_number">Kart NumarasÄ±</label> <input type="text" id="card-number" placeholder="1234 5678 9012 3456" maxlength="19" required class="w-full px-4 py-3 rounded-xl border border-gray-200">
        </div>
        <div class="grid grid-cols-2 gap-4">
         <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="expiry_date">Son Kullanma</label> <input type="text" id="card-expiry" placeholder="MM/YY" maxlength="5" required class="w-full px-4 py-3 rounded-xl border border-gray-200">
         </div>
         <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">CVV</label> <input type="text" id="card-cvv" placeholder="123" maxlength="3" required class="w-full px-4 py-3 rounded-xl border border-gray-200">
         </div>
        </div><button type="submit" id="pay-btn" class="w-full py-4 bg-[#30C48D] text-white font-semibold rounded-xl mt-4"> <span id="pay-btn-text">â‚º0 <span data-i18n="complete_payment">Ã–demeyi Tamamla</span></span> </button>
       </form>
      </div>
     </div>
    </div>
   </div><!-- Screen 9: Ticket -->
   <div id="screen-ticket" class="screen h-full w-full hidden overflow-auto bg-gradient-to-br from-[#4F8EF7]/5 to-[#30C48D]/5 dark:from-gray-900 dark:to-gray-800">
    <div class="p-6 md:p-8 pt-16 md:pt-6 max-w-md mx-auto"><button onclick="showScreen('dashboard')" class="flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 mb-6"> <span>â†</span> <span data-i18n="back_dashboard">Dashboard'a DÃ¶n</span> </button>
     <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden">
      <div class="bg-gradient-to-r from-[#4F8EF7] to-[#30C48D] p-6 text-white text-center"><span class="text-4xl mb-3 block">ğŸ«</span>
       <h2 class="font-heading text-2xl font-bold" data-i18n="entry_ticket">GiriÅŸ Biletiniz</h2>
       <p class="text-white/80 text-sm" data-i18n="show_qr">Bu QR kodu kapÄ±da gÃ¶sterin</p>
      </div>
      <div class="p-8 flex justify-center ticket-edge dark:before:bg-gray-900 dark:after:bg-gray-900">
       <div class="w-48 h-48 bg-white dark:bg-gray-700 border-4 border-gray-100 dark:border-gray-600 rounded-2xl flex items-center justify-center">
        <svg viewbox="0 0 100 100" class="w-40 h-40"><rect fill="#000" x="10" y="10" width="25" height="25" /><rect fill="#000" x="65" y="10" width="25" height="25" /> <rect fill="#000" x="10" y="65" width="25" height="25" /><rect fill="#fff" x="15" y="15" width="15" height="15" /> <rect fill="#fff" x="70" y="15" width="15" height="15" /><rect fill="#fff" x="15" y="70" width="15" height="15" /> <rect fill="#000" x="18" y="18" width="9" height="9" /><rect fill="#000" x="73" y="18" width="9" height="9" /> <rect fill="#000" x="18" y="73" width="9" height="9" /><rect fill="#000" x="40" y="40" width="20" height="20" /> <rect fill="#fff" x="45" y="45" width="10" height="10" /><rect fill="#000" x="65" y="65" width="25" height="25" /> <rect fill="#fff" x="70" y="70" width="15" height="15" /><rect fill="#000" x="73" y="73" width="9" height="9" />
        </svg>
       </div>
      </div>
      <div class="px-6 pb-6">
       <div class="border-t-2 border-dashed border-gray-200 dark:border-gray-600 pt-6 space-y-3">
        <div class="flex items-center justify-between"><span class="text-gray-500 dark:text-gray-400" data-i18n="ticket_no">Bilet No</span> <span id="ticket-number" class="font-mono font-bold text-gray-800 dark:text-white">#TKT-0000</span>
        </div>
        <div class="flex items-center justify-between"><span class="text-gray-500 dark:text-gray-400" data-i18n="room">Oda</span> <span id="ticket-room" class="font-bold text-gray-800 dark:text-white">#-</span>
        </div>
        <div class="flex items-center justify-between"><span class="text-gray-500 dark:text-gray-400" data-i18n="location">Lokasyon</span> <span id="ticket-location" class="font-medium text-gray-800 dark:text-white">-</span>
        </div>
        <div class="flex items-center justify-between"><span class="text-gray-500 dark:text-gray-400" data-i18n="checkin">GiriÅŸ</span> <span id="ticket-checkin" class="font-medium text-gray-800 dark:text-white">-</span>
        </div>
        <div class="flex items-center justify-between"><span class="text-gray-500 dark:text-gray-400" data-i18n="checkout">Ã‡Ä±kÄ±ÅŸ</span> <span id="ticket-checkout" class="font-medium text-gray-800 dark:text-white">-</span>
        </div>
        <div class="flex items-center justify-between"><span class="text-gray-500 dark:text-gray-400" data-i18n="guest_count">KiÅŸi</span> <span id="ticket-guests" class="font-medium text-gray-800 dark:text-white">-</span>
        </div>
       </div><button onclick="showScreen('room-control')" class="w-full py-4 bg-[#4F8EF7] text-white font-semibold rounded-xl mt-6"> ğŸ® <span data-i18n="go_to_control">Oda Kontrol Paneline Git</span> </button>
      </div>
     </div>
    </div>
   </div><!-- Screen 10: Room Control -->
   <div id="screen-room-control" class="screen h-full w-full hidden overflow-auto bg-gray-900">
    <div class="p-6 md:p-8 pt-16 md:pt-6 max-w-2xl mx-auto"><button onclick="showScreen('dashboard')" class="flex items-center gap-2 text-gray-400 hover:text-white mb-6"> <span>â†</span> <span data-i18n="back_dashboard">Dashboard'a DÃ¶n</span> </button>
     <div class="text-center mb-8"><span class="text-5xl mb-4 block">ğŸ </span>
      <h1 class="font-heading text-2xl font-bold text-white mb-2" data-i18n="room_control_panel">Oda Kontrol Paneli</h1>
      <p id="control-room-info" class="text-gray-400">Oda #-</p>
     </div>
     <div class="space-y-4">
      <div class="bg-gray-800 rounded-2xl p-6">
       <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
         <div class="w-14 h-14 bg-yellow-500/20 rounded-xl flex items-center justify-center">
          <span class="text-3xl">ğŸ’¡</span>
         </div>
         <div>
          <h3 class="font-medium text-white text-lg" data-i18n="lights">IÅŸÄ±klar</h3>
          <p class="text-gray-400 text-sm" data-i18n="main_lighting">Ana aydÄ±nlatma</p>
         </div>
        </div>
        <div id="toggle-light" onclick="toggleSwitch('light')" class="toggle-switch active"></div>
       </div>
      </div>
      <div class="bg-gray-800 rounded-2xl p-6">
       <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-4">
         <div class="w-14 h-14 bg-blue-500/20 rounded-xl flex items-center justify-center">
          <span class="text-3xl">â„ï¸</span>
         </div>
         <div>
          <h3 class="font-medium text-white text-lg" data-i18n="ac">Klima</h3>
          <p class="text-gray-400 text-sm" data-i18n="temp_control">SÄ±caklÄ±k kontrolÃ¼</p>
         </div>
        </div>
        <div id="toggle-ac" onclick="toggleSwitch('ac')" class="toggle-switch active"></div>
       </div>
       <div class="mt-4">
        <div class="flex items-center justify-between mb-3"><span class="text-gray-400" data-i18n="temperature">SÄ±caklÄ±k</span> <span id="temp-value" class="text-2xl font-bold text-white">22Â°C</span>
        </div><input type="range" id="temp-slider" min="16" max="30" value="22" oninput="updateTemp(this.value)" class="w-full">
       </div>
      </div>
      <div class="bg-gray-800 rounded-2xl p-6">
       <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
         <div class="w-14 h-14 bg-purple-500/20 rounded-xl flex items-center justify-center">
          <span class="text-3xl">ğŸ“º</span>
         </div>
         <div>
          <h3 class="font-medium text-white text-lg" data-i18n="tv">Televizyon</h3>
          <p class="text-gray-400 text-sm">Smart TV</p>
         </div>
        </div>
        <div id="toggle-tv" onclick="toggleSwitch('tv')" class="toggle-switch"></div>
       </div>
      </div>
      <div class="bg-gradient-to-r from-[#30C48D] to-[#28B07D] rounded-2xl p-6">
       <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
         <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
          <span class="text-3xl">ğŸšª</span>
         </div>
         <div>
          <h3 class="font-medium text-white text-lg" data-i18n="door_control">KapÄ± KontrolÃ¼</h3>
          <p class="text-white/70 text-sm" data-i18n="door_desc">Bluetooth / QR ile aÃ§Ä±n</p>
         </div>
        </div>
       </div><button id="door-btn" onclick="openDoor()" class="w-full mt-4 py-4 bg-white text-[#30C48D] font-bold rounded-xl"> <span>ğŸ”“</span> <span data-i18n="open_door">KapÄ±yÄ± AÃ§</span> </button>
      </div>
     </div>
     <p class="text-center text-gray-500 text-sm mt-8">ğŸ”’ <span data-i18n="secure_connection">GÃ¼venli baÄŸlantÄ± â€¢ Bluetooth LE destekli</span></p>
    </div>
   </div>
  </div>
  <script>
    // ==================== TRANSLATIONS ====================
    const translations = {
      tr: {
        app_title: 'AkÄ±llÄ± Ev Kiralama Sistemi',
        welcome_subtitle: 'AkÄ±llÄ± odalara anlÄ±k rezervasyon, kontrol ve giriÅŸ sistemi',
        smart_home: 'AkÄ±llÄ± Ev',
        login: 'GiriÅŸ Yap',
        register: 'Ãœye Ol',
        logout: 'Ã‡Ä±kÄ±ÅŸ Yap',
        access_account: 'HesabÄ±nÄ±za eriÅŸin',
        tc_id: 'T.C. Kimlik No',
        tc_placeholder: '11 haneli T.C. Kimlik No',
        password: 'Åifre',
        no_account: 'HesabÄ±nÄ±z yok mu? Ãœye olun',
        back_home: 'â† Ana sayfaya dÃ¶n',
        personal_info: 'KiÅŸisel Bilgiler',
        account_info: 'Hesap Bilgileri',
        agreements: 'SÃ¶zleÅŸmeler',
        completed: 'TamamlandÄ±',
        first_name: 'Ad',
        last_name: 'Soyad',
        your_name: 'AdÄ±nÄ±z',
        your_surname: 'SoyadÄ±nÄ±z',
        phone: 'Telefon',
        email: 'E-posta',
        gender: 'Cinsiyet',
        select: 'SeÃ§iniz',
        male: 'Erkek',
        female: 'KadÄ±n',
        prefer_not_say: 'Belirtmek Ä°stemiyorum',
        username: 'KullanÄ±cÄ± AdÄ±',
        password_confirm: 'Åifre Tekrar',
        password_requirements: 'Åifre gereksinimleri:',
        req_length: 'En az 8 karakter',
        req_upper: 'En az 1 bÃ¼yÃ¼k harf',
        req_number: 'En az 1 rakam',
        req_special: 'En az 1 Ã¶zel karakter',
        passwords_not_match: 'Åifreler eÅŸleÅŸmiyor',
        terms_of_use: 'KullanÄ±m ÅartlarÄ±',
        terms_desc: 'Hizmet kullanÄ±m koÅŸullarÄ±nÄ± okudum ve kabul ediyorum.',
        privacy_policy: 'KVKK & Gizlilik PolitikasÄ±',
        privacy_desc: 'KiÅŸisel verilerimin iÅŸlenmesine iliÅŸkin aydÄ±nlatma metnini okudum.',
        register_success: 'Ãœyelik BaÅŸarÄ±lÄ±!',
        register_success_desc: 'HesabÄ±nÄ±z baÅŸarÄ±yla oluÅŸturuldu.',
        back: 'â† Geri',
        next: 'Ä°leri â†’',
        complete: 'Tamamla',
        step: 'AdÄ±m',
        home: 'Ana Sayfa',
        new_reservation: 'Yeni Rezervasyon',
        account_settings: 'Hesap AyarlarÄ±',
        dashboard_overview: 'AkÄ±llÄ± ev kiralama sisteminize genel bakÄ±ÅŸ',
        no_active_reservation: 'Aktif Rezervasyonunuz Yok',
        no_reservation_desc: 'Hemen yeni bir rezervasyon oluÅŸturun.',
        total_stays: 'Toplam Konaklama',
        hours: 'Saat',
        hour_unit: 'saat',
        avg_rating: 'Puan OrtalamasÄ±',
        membership_level: 'Ãœyelik Seviyesi',
        starter: 'BaÅŸlangÄ±Ã§',
        silver: 'GÃ¼mÃ¼ÅŸ',
        gold: 'AltÄ±n',
        full_name: 'Ad Soyad',
        back_dashboard: "Dashboard'a DÃ¶n",
        select_location: 'Konaklama NoktasÄ± SeÃ§in',
        select_location_desc: 'Size en uygun lokasyonu seÃ§in',
        rooms: 'Oda',
        available: 'MÃ¼sait',
        occupied: 'Dolu',
        select_datetime: 'Tarih & Saat SeÃ§in',
        checkin_datetime: 'GiriÅŸ Tarihi & Saati',
        checkout_datetime: 'Ã‡Ä±kÄ±ÅŸ Tarihi & Saati',
        max_duration_warning: 'Maksimum SÃ¼re UyarÄ±sÄ±',
        max_duration_desc: 'Tek seferde maksimum 24 saat konaklama yapabilirsiniz.',
        show_available_rooms: 'MÃ¼sait OdalarÄ± GÃ¶ster',
        back_locations: 'Lokasyonlara DÃ¶n',
        select_room: 'Oda SeÃ§in',
        back_datetime: 'Tarih SeÃ§imine DÃ¶n',
        reservation_payment: 'Rezervasyon & Ã–deme',
        final_step: 'Son adÄ±m - Ã–deme bilgilerinizi girin',
        reservation_summary: 'Rezervasyon Ã–zeti',
        room: 'Oda',
        location: 'Lokasyon',
        checkin: 'GiriÅŸ',
        checkout: 'Ã‡Ä±kÄ±ÅŸ',
        guest_count: 'KiÅŸi SayÄ±sÄ±',
        person: 'KiÅŸi',
        person_1: '1 KiÅŸi',
        person_2: '2 KiÅŸi',
        person_3: '3 KiÅŸi',
        person_4: '4 KiÅŸi',
        extra_person: 'Ek kiÅŸi',
        total: 'Toplam',
        card_info: 'Kart Bilgileri',
        demo_warning: 'Demo amaÃ§lÄ± - GerÃ§ek Ã¶deme yapÄ±lmaz',
        card_name: 'Kart Ãœzerindeki Ä°sim',
        card_number: 'Kart NumarasÄ±',
        expiry_date: 'Son Kullanma',
        complete_payment: 'Ã–demeyi Tamamla',
        back_room: 'Oda SeÃ§imine DÃ¶n',
        entry_ticket: 'GiriÅŸ Biletiniz',
        show_qr: 'Bu QR kodu kapÄ±da gÃ¶sterin',
        ticket_no: 'Bilet No',
        go_to_control: 'Oda Kontrol Paneline Git',
        room_control_panel: 'Oda Kontrol Paneli',
        lights: 'IÅŸÄ±klar',
        main_lighting: 'Ana aydÄ±nlatma',
        ac: 'Klima',
        temp_control: 'SÄ±caklÄ±k kontrolÃ¼',
        temperature: 'SÄ±caklÄ±k',
        tv: 'Televizyon',
        door_control: 'KapÄ± KontrolÃ¼',
        door_desc: 'Bluetooth / QR ile aÃ§Ä±n',
        open_door: 'KapÄ±yÄ± AÃ§',
        secure_connection: 'GÃ¼venli baÄŸlantÄ± â€¢ Bluetooth LE destekli',
        login_success: 'GiriÅŸ baÅŸarÄ±lÄ±! HoÅŸ geldiniz',
        logout_success: 'Ã‡Ä±kÄ±ÅŸ yapÄ±ldÄ±',
        reservation_success: 'Rezervasyonunuz baÅŸarÄ±yla oluÅŸturuldu!',
        fill_all_fields: 'LÃ¼tfen tÃ¼m alanlarÄ± doldurun.',
        tc_invalid: 'T.C. Kimlik No 11 haneli olmalÄ±dÄ±r.',
        tc_exists: 'Bu T.C. Kimlik No ile kayÄ±tlÄ± hesap var.',
        password_requirements_not_met: 'Åifre gereksinimlerini karÅŸÄ±lamÄ±yor.',
        username_taken: 'Bu kullanÄ±cÄ± adÄ± zaten alÄ±nmÄ±ÅŸ.',
        accept_agreements: 'TÃ¼m sÃ¶zleÅŸmeleri kabul etmelisiniz.',
        login_failed: 'T.C. Kimlik No veya ÅŸifre hatalÄ±.',
        select_dates: 'LÃ¼tfen tarih seÃ§in.',
        past_date: 'GeÃ§miÅŸ tarih seÃ§ilemez.',
        checkout_before_checkin: 'Ã‡Ä±kÄ±ÅŸ tarihi giriÅŸten sonra olmalÄ±.',
        max_24_hours: 'Maksimum 24 saat konaklama yapÄ±labilir.',
        processing: 'Ä°ÅŸleniyor...',
        payment_completed: 'Ã–deme TamamlandÄ± âœ“',
        opening: 'AÃ§Ä±lÄ±yor...',
        door_opened: 'KapÄ± AÃ§Ä±ldÄ±!',
        reservation_history: 'Rezervasyon GeÃ§miÅŸi',
        history_desc: 'TÃ¼m rezervasyonlarÄ±nÄ±zÄ± gÃ¶rÃ¼ntÃ¼leyin ve yÃ¶netin',
        all: 'TÃ¼mÃ¼',
        active_reservations: 'Aktif',
        completed_reservations: 'Tamamlanan',
        cancelled_reservations: 'Ä°ptal Edilen',
        no_reservations: 'Rezervasyon BulunamadÄ±',
        no_reservations_desc: 'Bu kategoride henÃ¼z rezervasyonunuz yok.',
        cancel_reservation: 'Rezervasyonu Ä°ptal Et',
        view_ticket: 'Bileti GÃ¶rÃ¼ntÃ¼le',
        room_control: 'Oda KontrolÃ¼',
        status_active: 'Aktif',
        status_completed: 'TamamlandÄ±',
        status_cancelled: 'Ä°ptal Edildi',
        cancel_confirm_title: 'Rezervasyonu Ä°ptal Et',
        cancel_confirm_msg: 'Bu rezervasyonu iptal etmek istediÄŸinizden emin misiniz?',
        yes_cancel: 'Evet, Ä°ptal Et',
        no_go_back: 'HayÄ±r, Geri DÃ¶n',
        reservation_cancelled: 'Rezervasyon iptal edildi',
        cannot_cancel_past: 'GeÃ§miÅŸ rezervasyonlar iptal edilemez'
      },
      en: {
        app_title: 'Smart Home Rental System',
        welcome_subtitle: 'Instant booking, control and access to smart rooms',
        smart_home: 'Smart Home',
        login: 'Login',
        register: 'Sign Up',
        logout: 'Logout',
        access_account: 'Access your account',
        tc_id: 'ID Number',
        tc_placeholder: '11-digit ID Number',
        password: 'Password',
        no_account: "Don't have an account? Sign up",
        back_home: 'â† Back to home',
        personal_info: 'Personal Information',
        account_info: 'Account Information',
        agreements: 'Agreements',
        completed: 'Completed',
        first_name: 'First Name',
        last_name: 'Last Name',
        your_name: 'Your name',
        your_surname: 'Your surname',
        phone: 'Phone',
        email: 'Email',
        gender: 'Gender',
        select: 'Select',
        male: 'Male',
        female: 'Female',
        prefer_not_say: 'Prefer not to say',
        username: 'Username',
        password_confirm: 'Confirm Password',
        password_requirements: 'Password requirements:',
        req_length: 'At least 8 characters',
        req_upper: 'At least 1 uppercase letter',
        req_number: 'At least 1 number',
        req_special: 'At least 1 special character',
        passwords_not_match: 'Passwords do not match',
        terms_of_use: 'Terms of Use',
        terms_desc: 'I have read and accept the terms of service.',
        privacy_policy: 'Privacy Policy',
        privacy_desc: 'I have read the privacy policy.',
        register_success: 'Registration Successful!',
        register_success_desc: 'Your account has been created successfully.',
        back: 'â† Back',
        next: 'Next â†’',
        complete: 'Complete',
        step: 'Step',
        home: 'Home',
        new_reservation: 'New Reservation',
        account_settings: 'Account Settings',
        dashboard_overview: 'Overview of your smart home rental system',
        no_active_reservation: 'No Active Reservation',
        no_reservation_desc: 'Create a new reservation now.',
        total_stays: 'Total Stays',
        hours: 'Hours',
        hour_unit: 'hours',
        avg_rating: 'Average Rating',
        membership_level: 'Membership Level',
        starter: 'Starter',
        silver: 'Silver',
        gold: 'Gold',
        full_name: 'Full Name',
        back_dashboard: 'Back to Dashboard',
        select_location: 'Select Location',
        select_location_desc: 'Choose the most suitable location',
        rooms: 'Rooms',
        available: 'Available',
        occupied: 'Occupied',
        select_datetime: 'Select Date & Time',
        checkin_datetime: 'Check-in Date & Time',
        checkout_datetime: 'Check-out Date & Time',
        max_duration_warning: 'Maximum Duration Warning',
        max_duration_desc: 'Maximum stay is 24 hours at a time.',
        show_available_rooms: 'Show Available Rooms',
        back_locations: 'Back to Locations',
        select_room: 'Select Room',
        back_datetime: 'Back to Date Selection',
        reservation_payment: 'Reservation & Payment',
        final_step: 'Final step - Enter payment details',
        reservation_summary: 'Reservation Summary',
        room: 'Room',
        location: 'Location',
        checkin: 'Check-in',
        checkout: 'Check-out',
        guest_count: 'Number of Guests',
        person: 'Person',
        person_1: '1 Person',
        person_2: '2 People',
        person_3: '3 People',
        person_4: '4 People',
        extra_person: 'Extra person',
        total: 'Total',
        card_info: 'Card Information',
        demo_warning: 'Demo only - No real payment',
        card_name: 'Name on Card',
        card_number: 'Card Number',
        expiry_date: 'Expiry Date',
        complete_payment: 'Complete Payment',
        back_room: 'Back to Room Selection',
        entry_ticket: 'Your Entry Ticket',
        show_qr: 'Show this QR code at the door',
        ticket_no: 'Ticket No',
        go_to_control: 'Go to Room Control Panel',
        room_control_panel: 'Room Control Panel',
        lights: 'Lights',
        main_lighting: 'Main lighting',
        ac: 'Air Conditioning',
        temp_control: 'Temperature control',
        temperature: 'Temperature',
        tv: 'Television',
        door_control: 'Door Control',
        door_desc: 'Open with Bluetooth / QR',
        open_door: 'Open Door',
        secure_connection: 'Secure connection â€¢ Bluetooth LE supported',
        login_success: 'Login successful! Welcome',
        logout_success: 'Logged out',
        reservation_success: 'Your reservation has been created!',
        fill_all_fields: 'Please fill in all fields.',
        tc_invalid: 'ID Number must be 11 digits.',
        tc_exists: 'An account with this ID already exists.',
        password_requirements_not_met: 'Password does not meet requirements.',
        username_taken: 'This username is already taken.',
        accept_agreements: 'You must accept all agreements.',
        login_failed: 'ID Number or password is incorrect.',
        select_dates: 'Please select dates.',
        past_date: 'Cannot select past date.',
        checkout_before_checkin: 'Check-out must be after check-in.',
        max_24_hours: 'Maximum stay is 24 hours.',
        processing: 'Processing...',
        payment_completed: 'Payment Completed âœ“',
        opening: 'Opening...',
        door_opened: 'Door Opened!',
        reservation_history: 'Reservation History',
        history_desc: 'View and manage all your reservations',
        all: 'All',
        active_reservations: 'Active',
        completed_reservations: 'Completed',
        cancelled_reservations: 'Cancelled',
        no_reservations: 'No Reservations Found',
        no_reservations_desc: 'You have no reservations in this category.',
        cancel_reservation: 'Cancel Reservation',
        view_ticket: 'View Ticket',
        room_control: 'Room Control',
        status_active: 'Active',
        status_completed: 'Completed',
        status_cancelled: 'Cancelled',
        cancel_confirm_title: 'Cancel Reservation',
        cancel_confirm_msg: 'Are you sure you want to cancel this reservation?',
        yes_cancel: 'Yes, Cancel',
        no_go_back: 'No, Go Back',
        reservation_cancelled: 'Reservation cancelled',
        cannot_cancel_past: 'Past reservations cannot be cancelled'
      },
      de: {
        app_title: 'Smart Home Mietsystem',
        welcome_subtitle: 'Sofortige Buchung, Kontrolle und Zugang zu Smart Rooms',
        smart_home: 'Smart Home',
        login: 'Anmelden',
        register: 'Registrieren',
        logout: 'Abmelden',
        access_account: 'Auf Ihr Konto zugreifen',
        tc_id: 'Ausweisnummer',
        tc_placeholder: '11-stellige Ausweisnummer',
        password: 'Passwort',
        no_account: 'Kein Konto? Registrieren',
        back_home: 'â† ZurÃ¼ck zur Startseite',
        personal_info: 'PersÃ¶nliche Daten',
        account_info: 'Kontoinformationen',
        agreements: 'Vereinbarungen',
        completed: 'Abgeschlossen',
        first_name: 'Vorname',
        last_name: 'Nachname',
        your_name: 'Ihr Vorname',
        your_surname: 'Ihr Nachname',
        phone: 'Telefon',
        email: 'E-Mail',
        gender: 'Geschlecht',
        select: 'AuswÃ¤hlen',
        male: 'MÃ¤nnlich',
        female: 'Weiblich',
        prefer_not_say: 'Keine Angabe',
        username: 'Benutzername',
        password_confirm: 'Passwort bestÃ¤tigen',
        password_requirements: 'Passwortanforderungen:',
        req_length: 'Mindestens 8 Zeichen',
        req_upper: 'Mindestens 1 GroÃŸbuchstabe',
        req_number: 'Mindestens 1 Zahl',
        req_special: 'Mindestens 1 Sonderzeichen',
        passwords_not_match: 'PasswÃ¶rter stimmen nicht Ã¼berein',
        terms_of_use: 'Nutzungsbedingungen',
        terms_desc: 'Ich habe die Nutzungsbedingungen gelesen und akzeptiere sie.',
        privacy_policy: 'Datenschutzrichtlinie',
        privacy_desc: 'Ich habe die Datenschutzrichtlinie gelesen.',
        register_success: 'Registrierung erfolgreich!',
        register_success_desc: 'Ihr Konto wurde erfolgreich erstellt.',
        back: 'â† ZurÃ¼ck',
        next: 'Weiter â†’',
        complete: 'AbschlieÃŸen',
        step: 'Schritt',
        home: 'Startseite',
        new_reservation: 'Neue Reservierung',
        account_settings: 'Kontoeinstellungen',
        dashboard_overview: 'Ãœbersicht Ihres Smart Home Mietsystems',
        no_active_reservation: 'Keine aktive Reservierung',
        no_reservation_desc: 'Erstellen Sie jetzt eine neue Reservierung.',
        total_stays: 'Gesamtaufenthalte',
        hours: 'Stunden',
        hour_unit: 'Stunden',
        avg_rating: 'Durchschnittsbewertung',
        membership_level: 'Mitgliedschaftsstufe',
        starter: 'Einsteiger',
        silver: 'Silber',
        gold: 'Gold',
        full_name: 'VollstÃ¤ndiger Name',
        back_dashboard: 'ZurÃ¼ck zum Dashboard',
        select_location: 'Standort auswÃ¤hlen',
        select_location_desc: 'WÃ¤hlen Sie den passendsten Standort',
        rooms: 'Zimmer',
        available: 'VerfÃ¼gbar',
        occupied: 'Belegt',
        select_datetime: 'Datum & Uhrzeit auswÃ¤hlen',
        checkin_datetime: 'Check-in Datum & Uhrzeit',
        checkout_datetime: 'Check-out Datum & Uhrzeit',
        max_duration_warning: 'Maximale Dauer Warnung',
        max_duration_desc: 'Maximaler Aufenthalt betrÃ¤gt 24 Stunden.',
        show_available_rooms: 'VerfÃ¼gbare Zimmer anzeigen',
        back_locations: 'ZurÃ¼ck zu Standorten',
        select_room: 'Zimmer auswÃ¤hlen',
        back_datetime: 'ZurÃ¼ck zur Datumsauswahl',
        reservation_payment: 'Reservierung & Zahlung',
        final_step: 'Letzter Schritt - Zahlungsdaten eingeben',
        reservation_summary: 'ReservierungsÃ¼bersicht',
        room: 'Zimmer',
        location: 'Standort',
        checkin: 'Check-in',
        checkout: 'Check-out',
        guest_count: 'Anzahl der GÃ¤ste',
        person: 'Person',
        person_1: '1 Person',
        person_2: '2 Personen',
        person_3: '3 Personen',
        person_4: '4 Personen',
        extra_person: 'ZusÃ¤tzliche Person',
        total: 'Gesamt',
        card_info: 'Karteninformationen',
        demo_warning: 'Nur Demo - Keine echte Zahlung',
        card_name: 'Name auf der Karte',
        card_number: 'Kartennummer',
        expiry_date: 'Ablaufdatum',
        complete_payment: 'Zahlung abschlieÃŸen',
        back_room: 'ZurÃ¼ck zur Zimmerauswahl',
        entry_ticket: 'Ihr Eintrittticket',
        show_qr: 'Zeigen Sie diesen QR-Code an der TÃ¼r',
        ticket_no: 'Ticket-Nr.',
        go_to_control: 'Zur Zimmersteuerung',
        room_control_panel: 'Zimmersteuerung',
        lights: 'Beleuchtung',
        main_lighting: 'Hauptbeleuchtung',
        ac: 'Klimaanlage',
        temp_control: 'Temperaturregelung',
        temperature: 'Temperatur',
        tv: 'Fernseher',
        door_control: 'TÃ¼rsteuerung',
        door_desc: 'Mit Bluetooth / QR Ã¶ffnen',
        open_door: 'TÃ¼r Ã¶ffnen',
        secure_connection: 'Sichere Verbindung â€¢ Bluetooth LE unterstÃ¼tzt',
        login_success: 'Anmeldung erfolgreich! Willkommen',
        logout_success: 'Abgemeldet',
        reservation_success: 'Ihre Reservierung wurde erstellt!',
        fill_all_fields: 'Bitte fÃ¼llen Sie alle Felder aus.',
        tc_invalid: 'Ausweisnummer muss 11-stellig sein.',
        tc_exists: 'Ein Konto mit dieser ID existiert bereits.',
        password_requirements_not_met: 'Passwort erfÃ¼llt die Anforderungen nicht.',
        username_taken: 'Dieser Benutzername ist bereits vergeben.',
        accept_agreements: 'Sie mÃ¼ssen alle Vereinbarungen akzeptieren.',
        login_failed: 'Ausweisnummer oder Passwort ist falsch.',
        select_dates: 'Bitte wÃ¤hlen Sie Datum.',
        past_date: 'Vergangenes Datum nicht wÃ¤hlbar.',
        checkout_before_checkin: 'Check-out muss nach Check-in sein.',
        max_24_hours: 'Maximaler Aufenthalt ist 24 Stunden.',
        processing: 'Wird verarbeitet...',
        payment_completed: 'Zahlung abgeschlossen âœ“',
        opening: 'Wird geÃ¶ffnet...',
        door_opened: 'TÃ¼r geÃ¶ffnet!',
        reservation_history: 'Reservierungsverlauf',
        history_desc: 'Alle Ihre Reservierungen anzeigen und verwalten',
        all: 'Alle',
        active_reservations: 'Aktiv',
        completed_reservations: 'Abgeschlossen',
        cancelled_reservations: 'Storniert',
        no_reservations: 'Keine Reservierungen',
        no_reservations_desc: 'Sie haben keine Reservierungen in dieser Kategorie.',
        cancel_reservation: 'Reservierung stornieren',
        view_ticket: 'Ticket anzeigen',
        room_control: 'Zimmersteuerung',
        status_active: 'Aktiv',
        status_completed: 'Abgeschlossen',
        status_cancelled: 'Storniert',
        cancel_confirm_title: 'Reservierung stornieren',
        cancel_confirm_msg: 'MÃ¶chten Sie diese Reservierung wirklich stornieren?',
        yes_cancel: 'Ja, stornieren',
        no_go_back: 'Nein, zurÃ¼ck',
        reservation_cancelled: 'Reservierung storniert',
        cannot_cancel_past: 'Vergangene Reservierungen kÃ¶nnen nicht storniert werden'
      }
    };

    let currentLang = localStorage.getItem('smartHome_lang') || 'tr';
    let isDarkMode = localStorage.getItem('smartHome_darkMode') === 'true';

    // ==================== DARK MODE ====================
    function toggleDarkMode() {
      isDarkMode = !isDarkMode;
      localStorage.setItem('smartHome_darkMode', isDarkMode);
      applyDarkMode();
    }
    
    function applyDarkMode() {
      const html = document.documentElement;
      const themeIcon = document.getElementById('theme-icon');
      
      if (isDarkMode) {
        html.classList.add('dark');
        if (themeIcon) themeIcon.textContent = 'â˜€ï¸';
      } else {
        html.classList.remove('dark');
        if (themeIcon) themeIcon.textContent = 'ğŸŒ™';
      }
    }
    
    function t(key) { return translations[currentLang][key] || translations['tr'][key] || key; }
    
    function setLanguage(lang) {
      currentLang = lang;
      localStorage.setItem('smartHome_lang', lang);
      updateAllTranslations();
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
      });
      document.documentElement.lang = lang;
    }
    
    function updateAllTranslations() {
      // Normal text Ã§evirileri
      document.querySelectorAll('[data-i18n]').forEach(el => { el.textContent = t(el.dataset.i18n); });
      // Placeholder Ã§evirileri
      document.querySelectorAll('[data-i18n-placeholder]').forEach(el => { el.placeholder = t(el.dataset.i18nPlaceholder); });
      // Select option Ã§evirileri
      document.querySelectorAll('[data-i18n-opt]').forEach(opt => { opt.textContent = t(opt.dataset.i18nOpt); });
      // KiÅŸi sayÄ±sÄ± Ã§evirileri
      document.querySelectorAll('[data-i18n-guest]').forEach(opt => {
        opt.textContent = t('person_' + opt.dataset.i18nGuest);
      });
      
      document.title = t('app_title');
      
      const stepLabel = document.getElementById('step-label');
      if (stepLabel) stepLabel.textContent = `${t('step')} ${currentStep}/4`;
      
      const btnNext = document.getElementById('btn-next');
      if (btnNext) btnNext.textContent = currentStep === 3 ? t('complete') : t('next');
      
      const btnPrev = document.getElementById('btn-prev');
      if (btnPrev) btnPrev.textContent = t('back');
      
      const user = getCurrentUser();
      if (user) {
        const welcomeTitle = document.getElementById('welcome-title');
        if (welcomeTitle) welcomeTitle.textContent = `${user.name}, ${t('home')}! ğŸ‘‹`;
      }
      
      // Ãœyelik seviyesi Ã§evirisi
      updateMembershipLevel();
    }
    
    function updateMembershipLevel() {
      const user = getCurrentUser();
      if (!user) return;
      const reservations = getUserReservations(user.tc);
      const statLevel = document.getElementById('stat-level');
      if (statLevel) {
        if (reservations.length >= 10) statLevel.textContent = t('gold');
        else if (reservations.length >= 5) statLevel.textContent = t('silver');
        else statLevel.textContent = t('starter');
      }
    }

    // ==================== STATE ====================
    const defaultConfig = { app_title: 'AkÄ±llÄ± Ev Kiralama Sistemi', welcome_subtitle: 'AkÄ±llÄ± odalara anlÄ±k rezervasyon, kontrol ve giriÅŸ sistemi', logo_url: '' };
    let currentBooking = { locationId: null, locationName: null, checkin: null, checkout: null, room: null, guests: 2, price: 0, hours: 0 };
    let currentStep = 1;

    // ==================== STORAGE ====================
    function getUsers() { return JSON.parse(localStorage.getItem('smartHome_users') || '[]'); }
    function saveUsers(users) { localStorage.setItem('smartHome_users', JSON.stringify(users)); }
    function getCurrentUser() { return JSON.parse(localStorage.getItem('smartHome_currentUser') || 'null'); }
    function setCurrentUser(user) { localStorage.setItem('smartHome_currentUser', JSON.stringify(user)); }
    function clearCurrentUser() { localStorage.removeItem('smartHome_currentUser'); }
    function getUserReservations(tc) { return JSON.parse(localStorage.getItem('smartHome_reservations') || '[]').filter(r => r.userTc === tc); }
    function saveReservation(res) { const all = JSON.parse(localStorage.getItem('smartHome_reservations') || '[]'); all.push(res); localStorage.setItem('smartHome_reservations', JSON.stringify(all)); }

    // ==================== TOAST ====================
    function showToast(message, type = 'success') {
      const container = document.getElementById('toast-container');
      const toast = document.createElement('div');
      toast.className = `toast ${type === 'success' ? 'bg-[#30C48D]' : type === 'error' ? 'bg-[#FF4B5C]' : 'bg-[#4F8EF7]'} text-white px-6 py-3 rounded-xl shadow-lg font-medium`;
      toast.textContent = message;
      container.appendChild(toast);
      setTimeout(() => { toast.style.opacity = '0'; toast.style.transition = 'opacity 0.3s'; setTimeout(() => toast.remove(), 300); }, 3000);
    }

    // ==================== NAVIGATION ====================
    function showScreen(screenId) {
      document.querySelectorAll('.screen').forEach(s => { s.classList.add('hidden'); s.classList.remove('flex'); });
      const target = document.getElementById('screen-' + screenId);
      if (target) { target.classList.remove('hidden'); if (['welcome', 'login', 'register'].includes(screenId)) target.classList.add('flex'); }
      if (screenId === 'dashboard') updateDashboard();
    }

    // ==================== AUTH ====================
    function handleLogin(event) {
      event.preventDefault();
      const tc = document.getElementById('login-tc').value.trim();
      const password = document.getElementById('login-password').value;
      const errorDiv = document.getElementById('login-error');
      
      if (tc.length !== 11) { errorDiv.textContent = t('tc_invalid'); errorDiv.classList.remove('hidden'); return; }
      
      const user = getUsers().find(u => u.tc === tc && u.password === password);
      if (!user) { errorDiv.textContent = t('login_failed'); errorDiv.classList.remove('hidden'); return; }
      
      errorDiv.classList.add('hidden');
      setCurrentUser(user);
      showToast(t('login_success') + ', ' + user.name);
      showScreen('dashboard');
    }

    function handleLogout() { clearCurrentUser(); showToast(t('logout_success'), 'info'); showScreen('welcome'); }

    // ==================== REGISTER ====================
    function validateStep(step) {
      const errorDiv = document.getElementById('register-error');
      errorDiv.classList.add('hidden');
      
      if (step === 1) {
        const name = document.getElementById('reg-name').value.trim();
        const surname = document.getElementById('reg-surname').value.trim();
        const phone = document.getElementById('reg-phone').value.trim();
        const email = document.getElementById('reg-email').value.trim();
        const tc = document.getElementById('reg-tc').value.trim();
        const gender = document.getElementById('reg-gender').value;
        
        if (!name || !surname || !phone || !email || !tc || !gender) { errorDiv.textContent = t('fill_all_fields'); errorDiv.classList.remove('hidden'); return false; }
        if (tc.length !== 11 || !/^\d+$/.test(tc)) { errorDiv.textContent = t('tc_invalid'); errorDiv.classList.remove('hidden'); return false; }
        if (getUsers().some(u => u.tc === tc)) { errorDiv.textContent = t('tc_exists'); errorDiv.classList.remove('hidden'); return false; }
        document.getElementById('reg-username').value = (name + '.' + surname).toLowerCase().replace(/[^a-z.]/g, '');
      }
      
      if (step === 2) {
        const username = document.getElementById('reg-username').value.trim();
        const password = document.getElementById('reg-password').value;
        const passwordConfirm = document.getElementById('reg-password-confirm').value;
        
        if (!username || !password || !passwordConfirm) { errorDiv.textContent = t('fill_all_fields'); errorDiv.classList.remove('hidden'); return false; }
        if (!(password.length >= 8 && /[A-Z]/.test(password) && /\d/.test(password) && /[!@#$%^&*(),.?":{}|<>]/.test(password))) {
          errorDiv.textContent = t('password_requirements_not_met'); errorDiv.classList.remove('hidden'); return false;
        }
        if (password !== passwordConfirm) { errorDiv.textContent = t('passwords_not_match'); errorDiv.classList.remove('hidden'); return false; }
        if (getUsers().some(u => u.username === username)) { errorDiv.textContent = t('username_taken'); errorDiv.classList.remove('hidden'); return false; }
      }
      
      if (step === 3) {
        if (!document.getElementById('agree-terms').checked || !document.getElementById('agree-kvkk').checked) {
          document.getElementById('agreement-error').textContent = t('accept_agreements');
          document.getElementById('agreement-error').classList.remove('hidden');
          return false;
        }
        document.getElementById('agreement-error').classList.add('hidden');
        
        const newUser = {
          name: document.getElementById('reg-name').value.trim(),
          surname: document.getElementById('reg-surname').value.trim(),
          phone: document.getElementById('reg-phone').value.trim(),
          email: document.getElementById('reg-email').value.trim(),
          tc: document.getElementById('reg-tc').value.trim(),
          gender: document.getElementById('reg-gender').value,
          username: document.getElementById('reg-username').value.trim(),
          password: document.getElementById('reg-password').value,
          createdAt: new Date().toISOString()
        };
        const users = getUsers(); users.push(newUser); saveUsers(users);
      }
      return true;
    }

    function nextStep() {
      if (currentStep < 4) {
        if (!validateStep(currentStep)) return;
        document.getElementById('register-step-' + currentStep).classList.add('hidden');
        currentStep++;
        document.getElementById('register-step-' + currentStep).classList.remove('hidden');
        updateProgressBar();
      }
    }

    function prevStep() {
      if (currentStep > 1) {
        document.getElementById('register-step-' + currentStep).classList.add('hidden');
        currentStep--;
        document.getElementById('register-step-' + currentStep).classList.remove('hidden');
        updateProgressBar();
      }
    }

    function updateProgressBar() {
      document.getElementById('progress-bar').style.width = (currentStep / 4) * 100 + '%';
      document.getElementById('step-label').textContent = `${t('step')} ${currentStep}/4`;
      const titles = [t('personal_info'), t('account_info'), t('agreements'), t('completed')];
      document.getElementById('step-title').textContent = titles[currentStep - 1];
      document.getElementById('btn-prev').classList.toggle('hidden', currentStep === 1);
      document.getElementById('register-nav').classList.toggle('hidden', currentStep === 4);
      document.getElementById('btn-next').textContent = currentStep === 3 ? t('complete') : t('next');
    }

    // ==================== DASHBOARD ====================
    function updateDashboard() {
      const user = getCurrentUser();
      if (!user) { showScreen('welcome'); return; }
      
      const initials = (user.name[0] + user.surname[0]).toUpperCase();
      document.getElementById('user-avatar').textContent = initials;
      document.getElementById('mobile-avatar').textContent = initials;
      document.getElementById('user-fullname').textContent = user.name + ' ' + user.surname;
      document.getElementById('user-username').textContent = '@' + user.username;
      document.getElementById('welcome-title').textContent = `${user.name}, ${t('home')}! ğŸ‘‹`;
      document.getElementById('settings-name').value = user.name + ' ' + user.surname;
      document.getElementById('settings-email').value = user.email;
      document.getElementById('settings-phone').value = user.phone;
      
      const reservations = getUserReservations(user.tc);
      document.getElementById('stat-total').textContent = reservations.length;
      document.getElementById('stat-hours').textContent = reservations.reduce((sum, r) => sum + (r.hours || 0), 0);
      updateMembershipLevel();
    }

    function showDashboardSection(sectionId) {
      document.querySelectorAll('.dashboard-section').forEach(s => s.classList.add('hidden'));
      const target = document.getElementById('dashboard-' + sectionId);
      if (target) target.classList.remove('hidden');
      if (sectionId === 'history') loadReservations();
      if (window.innerWidth < 768) toggleSidebar();
    }

    function setActiveMenu(element) {
      document.querySelectorAll('.sidebar-item').forEach(item => item.classList.remove('active'));
      element.classList.add('active');
    }

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('-translate-x-full');
      document.getElementById('sidebar-overlay').classList.toggle('hidden');
    }

    // ==================== BOOKING ====================
    function selectLocation(id, name) {
      currentBooking.locationId = id; currentBooking.locationName = name;
      document.getElementById('datetime-location').textContent = name;
      showScreen('datetime');
    }

    function validateDateTime() {
      const checkin = document.getElementById('checkin').value;
      const checkout = document.getElementById('checkout').value;
      const errorDiv = document.getElementById('datetime-error');
      
      if (!checkin || !checkout) { errorDiv.textContent = t('select_dates'); errorDiv.classList.remove('hidden'); return; }
      
      const checkinDate = new Date(checkin), checkoutDate = new Date(checkout), now = new Date();
      if (checkinDate < now) { errorDiv.textContent = t('past_date'); errorDiv.classList.remove('hidden'); return; }
      if (checkoutDate <= checkinDate) { errorDiv.textContent = t('checkout_before_checkin'); errorDiv.classList.remove('hidden'); return; }
      
      const diffHours = (checkoutDate - checkinDate) / (1000 * 60 * 60);
      if (diffHours > 24) { errorDiv.textContent = t('max_24_hours'); errorDiv.classList.remove('hidden'); return; }
      
      errorDiv.classList.add('hidden');
      currentBooking.checkin = checkin; currentBooking.checkout = checkout; currentBooking.hours = Math.ceil(diffHours);
      document.getElementById('rooms-info').textContent = `${currentBooking.locationName} â€¢ ${formatDate(checkin)}`;
      generateRooms();
      showScreen('rooms');
    }

    function generateRooms() {
      const grid = document.getElementById('rooms-grid');
      const occupied = [3, 5, 8, 11];
      grid.innerHTML = '';
      
      for (let i = 1; i <= 12; i++) {
        const isOcc = occupied.includes(i);
        grid.innerHTML += isOcc
          ? `<div class="room-card disabled bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-lg text-center border-2 border-[#FF4B5C]/20"><div class="w-14 h-14 bg-[#FF4B5C]/10 rounded-xl flex items-center justify-center mx-auto mb-3"><span class="text-2xl">ğŸ </span></div><p class="font-bold text-gray-400">${t('room')} #${i}</p><span class="text-xs px-2 py-1 bg-[#FF4B5C]/10 text-[#FF4B5C] rounded-full">${t('occupied')}</span></div>`
          : `<button onclick="selectRoom(${i})" class="room-card bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-lg text-center border-2 border-transparent hover:border-[#30C48D]"><div class="w-14 h-14 bg-[#30C48D]/10 rounded-xl flex items-center justify-center mx-auto mb-3"><span class="text-2xl">ğŸ </span></div><p class="font-bold text-gray-800 dark:text-white">${t('room')} #${i}</p><span class="text-xs px-2 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full">${t('available')}</span></button>`;
      }
    }

    function selectRoom(roomNumber) {
      currentBooking.room = roomNumber;
      document.getElementById('summary-room').textContent = '#' + roomNumber;
      document.getElementById('summary-location').textContent = currentBooking.locationName;
      document.getElementById('summary-checkin').textContent = formatDateTime(currentBooking.checkin);
      document.getElementById('summary-checkout').textContent = formatDateTime(currentBooking.checkout);
      updatePrice();
      showScreen('payment');
    }

    function updatePrice() {
      const guests = parseInt(document.getElementById('guests').value);
      currentBooking.guests = guests;
      const hours = currentBooking.hours || 1;
      const basePrice = hours * 50;
      const extraGuests = Math.max(0, guests - 1);
      const extraPrice = extraGuests * 25;
      const total = basePrice + extraPrice;
      currentBooking.price = total;
      
      document.getElementById('price-hours').textContent = hours;
      document.getElementById('price-base').textContent = 'â‚º' + basePrice;
      document.getElementById('price-extra-row').classList.toggle('hidden', extraGuests === 0);
      document.getElementById('price-extra').textContent = 'â‚º' + extraPrice;
      document.getElementById('price-total').textContent = 'â‚º' + total;
      document.getElementById('pay-btn-text').innerHTML = 'â‚º' + total + ' ' + t('complete_payment');
    }

    function handlePayment(event) {
      event.preventDefault();
      const user = getCurrentUser();
      if (!user) { showScreen('login'); return; }
      
      const btn = document.getElementById('pay-btn');
      btn.disabled = true;
      btn.innerHTML = '<span class="animate-spin inline-block">â³</span> ' + t('processing');
      
      setTimeout(() => {
        const resId = 'TKT-' + Date.now();
        const reservation = { id: resId, userTc: user.tc, locationId: currentBooking.locationId, locationName: currentBooking.locationName, room: currentBooking.room, checkin: currentBooking.checkin, checkout: currentBooking.checkout, guests: currentBooking.guests, hours: currentBooking.hours, price: currentBooking.price, status: 'active', createdAt: new Date().toISOString() };
        saveReservation(reservation);
        
        document.getElementById('ticket-number').textContent = '#' + resId;
        document.getElementById('ticket-room').textContent = '#' + reservation.room;
        document.getElementById('ticket-location').textContent = reservation.locationName;
        document.getElementById('ticket-checkin').textContent = formatDateTime(reservation.checkin);
        document.getElementById('ticket-checkout').textContent = formatDateTime(reservation.checkout);
        document.getElementById('ticket-guests').textContent = reservation.guests + ' ' + t('person');
        
        btn.disabled = false;
        btn.innerHTML = t('payment_completed');
        showToast(t('reservation_success'));
        showScreen('ticket');
        currentBooking = { locationId: null, locationName: null, checkin: null, checkout: null, room: null, guests: 2, price: 0, hours: 0 };
      }, 2000);
    }

    // ==================== RESERVATION HISTORY ====================
    let currentFilter = 'all';
    
    function loadReservations() {
      const user = getCurrentUser();
      if (!user) return;
      
      let reservations = getUserReservations(user.tc);
      const now = new Date();
      
      reservations = reservations.map(res => {
        if (res.status !== 'cancelled') {
          const checkoutDate = new Date(res.checkout);
          if (checkoutDate < now) res.status = 'completed';
          else res.status = 'active';
        }
        return res;
      });
      
      if (currentFilter !== 'all') reservations = reservations.filter(r => r.status === currentFilter);
      reservations.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
      renderReservations(reservations);
    }
    
    function renderReservations(reservations) {
      const listContainer = document.getElementById('reservations-list');
      const noReservationsDiv = document.getElementById('no-reservations');
      
      if (reservations.length === 0) {
        listContainer.innerHTML = '';
        noReservationsDiv.classList.remove('hidden');
        return;
      }
      
      noReservationsDiv.classList.add('hidden');
      
      listContainer.innerHTML = reservations.map(res => {
        const statusColors = { active: 'bg-[#30C48D]/10 text-[#30C48D]', completed: 'bg-[#4F8EF7]/10 text-[#4F8EF7]', cancelled: 'bg-[#FF4B5C]/10 text-[#FF4B5C]' };
        const statusTexts = { active: t('status_active'), completed: t('status_completed'), cancelled: t('status_cancelled') };
        const isActive = res.status === 'active';
        const checkinDate = new Date(res.checkin);
        const canCancel = isActive && checkinDate > new Date();
        
        return `
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-5 border-l-4 ${res.status === 'active' ? 'border-[#30C48D]' : res.status === 'completed' ? 'border-[#4F8EF7]' : 'border-[#FF4B5C]'}">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
              <div class="flex items-start gap-4">
                <div class="w-14 h-14 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center flex-shrink-0"><span class="text-2xl">${res.status === 'cancelled' ? 'âŒ' : 'ğŸ '}</span></div>
                <div>
                  <div class="flex items-center gap-3 mb-1">
                    <h3 class="font-heading font-bold text-gray-800 dark:text-white">${res.locationName}</h3>
                    <span class="px-2 py-1 ${statusColors[res.status]} rounded-full text-xs font-medium">${statusTexts[res.status]}</span>
                  </div>
                  <p class="text-gray-600 dark:text-gray-400 text-sm">${t('room')} #${res.room} â€¢ ${res.guests} ${t('person')}</p>
                  <p class="text-gray-500 dark:text-gray-400 text-sm mt-1">ğŸ“… ${formatDateTime(res.checkin)} â†’ ${formatDateTime(res.checkout)}</p>
                  <p class="text-gray-400 dark:text-gray-500 text-xs mt-1">${t('ticket_no')}: #${res.id}</p>
                </div>
              </div>
              <div class="flex items-center gap-2 ml-auto">
                <span class="font-bold text-lg text-gray-800 dark:text-white">â‚º${res.price}</span>
                ${isActive ? `<button onclick="viewReservationTicket('${res.id}')" class="px-4 py-2 bg-[#4F8EF7] text-white rounded-xl text-sm font-medium hover:bg-[#3D7CE5]">ğŸ« ${t('view_ticket')}</button>` : ''}
                ${canCancel ? `<button onclick="showCancelConfirm('${res.id}')" class="px-4 py-2 bg-[#FF4B5C]/10 text-[#FF4B5C] rounded-xl text-sm font-medium hover:bg-[#FF4B5C]/20">âŒ ${t('cancel_reservation')}</button>` : ''}
              </div>
            </div>
          </div>
        `;
      }).join('');
    }
    
    function filterReservations(filter) {
      currentFilter = filter;
      document.querySelectorAll('.filter-btn').forEach(btn => {
        if (btn.dataset.filter === filter) { btn.classList.remove('bg-white', 'text-gray-600'); btn.classList.add('bg-[#4F8EF7]', 'text-white'); }
        else { btn.classList.remove('bg-[#4F8EF7]', 'text-white'); btn.classList.add('bg-white', 'text-gray-600'); }
      });
      loadReservations();
    }
    
    function viewReservationTicket(resId) {
      const user = getCurrentUser();
      if (!user) return;
      const reservations = JSON.parse(localStorage.getItem('smartHome_reservations') || '[]');
      const res = reservations.find(r => r.id === resId);
      if (res) {
        document.getElementById('ticket-number').textContent = '#' + res.id;
        document.getElementById('ticket-room').textContent = '#' + res.room;
        document.getElementById('ticket-location').textContent = res.locationName;
        document.getElementById('ticket-checkin').textContent = formatDateTime(res.checkin);
        document.getElementById('ticket-checkout').textContent = formatDateTime(res.checkout);
        document.getElementById('ticket-guests').textContent = res.guests + ' ' + t('person');
        document.getElementById('control-room-info').textContent = t('room') + ' #' + res.room + ' â€¢ ' + res.locationName;
        showScreen('ticket');
      }
    }
    
    function showCancelConfirm(resId) {
      const modal = document.createElement('div');
      modal.id = 'cancel-modal';
      modal.className = 'fixed inset-0 bg-black/50 z-[100] flex items-center justify-center p-4';
      modal.innerHTML = `
        <div class="bg-white dark:bg-gray-800 rounded-3xl p-6 max-w-md w-full shadow-2xl">
          <div class="text-center mb-6">
            <div class="w-16 h-16 bg-[#FF4B5C]/10 rounded-2xl flex items-center justify-center mx-auto mb-4"><span class="text-3xl">âš ï¸</span></div>
            <h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-2">${t('cancel_confirm_title')}</h3>
            <p class="text-gray-500 dark:text-gray-400">${t('cancel_confirm_msg')}</p>
          </div>
          <div class="flex gap-3">
            <button onclick="closeCancelModal()" class="flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600">${t('no_go_back')}</button>
            <button onclick="cancelReservation('${resId}')" class="flex-1 py-3 bg-[#FF4B5C] text-white font-semibold rounded-xl hover:bg-[#E63E4C]">${t('yes_cancel')}</button>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }
    
    function closeCancelModal() { const modal = document.getElementById('cancel-modal'); if (modal) modal.remove(); }
    
    function cancelReservation(resId) {
      const reservations = JSON.parse(localStorage.getItem('smartHome_reservations') || '[]');
      const resIndex = reservations.findIndex(r => r.id === resId);
      if (resIndex !== -1) {
        const res = reservations[resIndex];
        if (new Date(res.checkin) <= new Date()) { showToast(t('cannot_cancel_past'), 'error'); closeCancelModal(); return; }
        reservations[resIndex].status = 'cancelled';
        reservations[resIndex].cancelledAt = new Date().toISOString();
        localStorage.setItem('smartHome_reservations', JSON.stringify(reservations));
        showToast(t('reservation_cancelled'), 'info');
        closeCancelModal();
        loadReservations();
        updateDashboard();
      }
    }

    // ==================== ROOM CONTROL ====================
    function toggleSwitch(id) { document.getElementById('toggle-' + id).classList.toggle('active'); }
    function updateTemp(value) { document.getElementById('temp-value').textContent = value + 'Â°C'; }
    function openDoor() {
      const btn = document.getElementById('door-btn');
      btn.innerHTML = '<span class="animate-spin">â³</span> ' + t('opening');
      btn.disabled = true;
      setTimeout(() => {
        btn.innerHTML = '<span>âœ…</span> ' + t('door_opened');
        setTimeout(() => { btn.innerHTML = '<span>ğŸ”“</span> ' + t('open_door'); btn.disabled = false; }, 2000);
      }, 1500);
    }

    // ==================== HELPERS ====================
    function formatDateTime(dateString) {
      const date = new Date(dateString);
      const locales = { tr: 'tr-TR', en: 'en-US', de: 'de-DE' };
      return date.toLocaleDateString(locales[currentLang] || 'tr-TR', { day: 'numeric', month: 'short', hour: '2-digit', minute: '2-digit' });
    }
    function formatDate(dateString) {
      const date = new Date(dateString);
      const locales = { tr: 'tr-TR', en: 'en-US', de: 'de-DE' };
      return date.toLocaleDateString(locales[currentLang] || 'tr-TR', { day: 'numeric', month: 'long', year: 'numeric' });
    }

    // ==================== LOGO ====================
    function updateLogo(logoUrl) {
      const customLogo = document.getElementById('custom-logo');
      const defaultIcon = document.getElementById('default-logo-icon');
      
      if (logoUrl && logoUrl.trim() !== '') {
        customLogo.src = logoUrl;
        customLogo.classList.remove('hidden');
        customLogo.style.display = 'block';
        defaultIcon.style.display = 'none';
      } else {
        customLogo.classList.add('hidden');
        customLogo.style.display = 'none';
        defaultIcon.style.display = 'block';
      }
    }

    // ==================== ELEMENT SDK ====================
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (config) => {
          const title = document.getElementById('main-title');
          const subtitle = document.getElementById('main-subtitle');
          
          if (title) title.textContent = config.app_title || defaultConfig.app_title;
          if (subtitle) subtitle.textContent = config.welcome_subtitle || defaultConfig.welcome_subtitle;
          
          // Logo gÃ¼ncelleme
          updateLogo(config.logo_url || defaultConfig.logo_url);
        },
        mapToCapabilities: () => ({ recolorables: [], borderables: [], fontEditable: undefined, fontSizeable: undefined }),
        mapToEditPanelValues: (config) => new Map([
          ['app_title', config.app_title || defaultConfig.app_title],
          ['welcome_subtitle', config.welcome_subtitle || defaultConfig.welcome_subtitle],
          ['logo_url', config.logo_url || defaultConfig.logo_url]
        ])
      });
    }

    // ==================== INIT ====================
    function init() {
      // Dark mode baÅŸlat
      applyDarkMode();
      
      document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.toggle('active', btn.dataset.lang === currentLang));
      updateAllTranslations();
      
      const user = getCurrentUser();
      showScreen(user ? 'dashboard' : 'welcome');
      
      const cardNumber = document.getElementById('card-number');
      if (cardNumber) cardNumber.addEventListener('input', function(e) { let v = e.target.value.replace(/\D/g, ''); e.target.value = v.match(/.{1,4}/g)?.join(' ') || v; });
      
      const cardExpiry = document.getElementById('card-expiry');
      if (cardExpiry) cardExpiry.addEventListener('input', function(e) { let v = e.target.value.replace(/\D/g, ''); if (v.length >= 2) v = v.slice(0,2) + '/' + v.slice(2,4); e.target.value = v; });
      
      const now = new Date().toISOString().slice(0, 16);
      const checkinInput = document.getElementById('checkin');
      const checkoutInput = document.getElementById('checkout');
      if (checkinInput) checkinInput.min = now;
      if (checkoutInput) checkoutInput.min = now;
    }

    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9af942c0416ed5ef',t:'MTc2NjAwNDI5MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
