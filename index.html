<!doctype html>
<html lang="tr" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AkÄ±llÄ± Ev Kiralama Sistemi</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { extend: {} }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&amp;family=Inter:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body { box-sizing: border-box; }
    * { font-family: 'Inter', sans-serif; }
    h1, h2, h3, h4, h5, h6, .font-heading { font-family: 'Poppins', sans-serif; }
    .glass-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
    .float-animation { animation: float 6s ease-in-out infinite; }
    .float-animation-delayed { animation: float 6s ease-in-out infinite; animation-delay: -2s; }
    @keyframes float { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-20px) rotate(5deg); } }
    @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 20px rgba(79, 142, 247, 0.3); } 50% { box-shadow: 0 0 40px rgba(79, 142, 247, 0.6); } }
    .pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
    @keyframes slide-up { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    .slide-up { animation: slide-up 0.6s ease-out forwards; }
    .slide-up-delayed { animation: slide-up 0.6s ease-out forwards; animation-delay: 0.1s; opacity: 0; }
    .slide-up-delayed-2 { animation: slide-up 0.6s ease-out forwards; animation-delay: 0.2s; opacity: 0; }
    .room-card { transition: all 0.3s ease; }
    .room-card:hover:not(.disabled) { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); }
    .room-card.disabled { opacity: 0.6; cursor: not-allowed; }
    .toggle-switch { width: 56px; height: 28px; background: #E5E7EB; border-radius: 14px; position: relative; cursor: pointer; transition: background 0.3s ease; }
    .toggle-switch.active { background: #30C48D; }
    .toggle-switch::after { content: ''; position: absolute; width: 24px; height: 24px; background: white; border-radius: 50%; top: 2px; left: 2px; transition: transform 0.3s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
    .toggle-switch.active::after { transform: translateX(28px); }
    .ticket-edge { position: relative; }
    .ticket-edge::before, .ticket-edge::after { content: ''; position: absolute; width: 20px; height: 20px; background: #F5F7FA; border-radius: 50%; top: 50%; transform: translateY(-50%); }
    .ticket-edge::before { left: -10px; }
    .ticket-edge::after { right: -10px; }
    input[type="range"] { -webkit-appearance: none; height: 8px; background: #E5E7EB; border-radius: 4px; }
    input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 24px; height: 24px; background: #4F8EF7; border-radius: 50%; cursor: pointer; }
    .sidebar-item { transition: all 0.2s ease; }
    .sidebar-item:hover { background: rgba(79, 142, 247, 0.1); }
    .sidebar-item.active { background: rgba(79, 142, 247, 0.15); border-left: 3px solid #4F8EF7; }
    .toast { animation: toast-in 0.3s ease-out; }
    @keyframes toast-in { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
    .lang-btn { transition: all 0.2s ease; }
    .lang-btn:hover { transform: scale(1.05); }
    .lang-btn.active { box-shadow: 0 0 0 2px #4F8EF7; }
    .dark .glass-card { background: rgba(31, 41, 55, 0.95); }
    .dark input, .dark select, .dark textarea { background-color: #374151 !important; border-color: #4B5563 !important; color: #F9FAFB !important; }
    .dark input::placeholder { color: #9CA3AF !important; }
    .dark .room-card:not(.disabled) { background-color: #1F2937; }
    .dark .room-card.disabled { background-color: #111827; }
    .dark .filter-btn.bg-white { background-color: #374151 !important; }
    .leaflet-map-container { width: 100%; height: 400px; border-radius: 16px; overflow: hidden; z-index: 1; }
    .dark .leaflet-map-container { filter: brightness(0.85) saturate(1.2); }
    .leaflet-container { background: #E8F4FD; }
    .dark .leaflet-container { background: #1F2937; }
    .custom-marker { width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #4F8EF7, #30C48D); border-radius: 50% 50% 50% 0; transform: rotate(-45deg); box-shadow: 0 4px 15px rgba(79, 142, 247, 0.5); border: 3px solid white; cursor: pointer; transition: all 0.3s ease; }
    .custom-marker:hover { transform: rotate(-45deg) scale(1.15); box-shadow: 0 6px 20px rgba(79, 142, 247, 0.6); }
    .custom-marker.selected { background: linear-gradient(135deg, #30C48D, #28B07D); transform: rotate(-45deg) scale(1.2); box-shadow: 0 6px 25px rgba(48, 196, 141, 0.6); }
    .custom-marker span { transform: rotate(45deg); font-size: 18px; }
    .leaflet-popup-content-wrapper { border-radius: 12px; padding: 0; box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
    .dark .leaflet-popup-content-wrapper { background: #374151; }
    .leaflet-popup-content { margin: 0; min-width: 180px; }
    .leaflet-popup-tip { background: white; }
    .dark .leaflet-popup-tip { background: #374151; }
    .popup-content { padding: 12px 16px; text-align: center; }
    .popup-content h4 { font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 14px; color: #1F2937; margin-bottom: 4px; }
    .dark .popup-content h4 { color: #F9FAFB; }
    .popup-content p { font-size: 12px; color: #6B7280; margin-bottom: 8px; }
    .dark .popup-content p { color: #9CA3AF; }
    .popup-btn { display: inline-block; padding: 6px 14px; background: linear-gradient(135deg, #4F8EF7, #30C48D); color: white; border-radius: 8px; font-size: 12px; font-weight: 500; cursor: pointer; transition: all 0.2s ease; border: none; }
    .popup-btn:hover { transform: scale(1.05); box-shadow: 0 4px 12px rgba(79, 142, 247, 0.4); }
    .leaflet-control-zoom { border: none !important; border-radius: 12px !important; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1) !important; }
    .leaflet-control-zoom a { width: 36px !important; height: 36px !important; line-height: 36px !important; font-size: 18px !important; color: #4F8EF7 !important; background: white !important; border: none !important; }
    .dark .leaflet-control-zoom a { background: #374151 !important; color: #60A5FA !important; }
    .leaflet-control-zoom a:hover { background: #F3F4F6 !important; }
    .dark .leaflet-control-zoom a:hover { background: #4B5563 !important; }
    @keyframes marker-pulse { 0%, 100% { box-shadow: 0 4px 15px rgba(79, 142, 247, 0.5); } 50% { box-shadow: 0 4px 25px rgba(79, 142, 247, 0.8); } }
    .custom-marker.selected { animation: marker-pulse 1.5s ease-in-out infinite; }
    .location-card { transition: all 0.3s ease; border: 2px solid transparent; }
    .location-card:hover { border-color: #4F8EF7; transform: translateY(-3px); }
    .location-card.selected { border-color: #30C48D; background: linear-gradient(135deg, rgba(48, 196, 141, 0.1), rgba(79, 142, 247, 0.1)); }
    .cancel-modal { animation: modal-in 0.3s ease-out; }
    @keyframes modal-in { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-[#F5F7FA] dark:bg-gray-900 overflow-auto">
  <div id="app" class="h-full w-full"><!-- Toast Container -->
   <div id="toast-container" class="fixed top-4 right-4 z-[100] space-y-2"></div><!-- Terms Modal -->
   <div id="terms-modal" class="fixed inset-0 bg-black/50 z-[150] hidden items-center justify-center p-4 overflow-auto">
    <div class="cancel-modal bg-white dark:bg-gray-800 rounded-3xl p-6 max-w-2xl w-full shadow-2xl max-h-[90%] overflow-auto my-4">
     <div class="flex items-center justify-between mb-4">
      <h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white" data-i18n="terms_of_use">KullanÄ±m ÅartlarÄ±</h3><button onclick="closeTermsModal()" class="w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-600"> <span class="text-xl">âœ•</span> </button>
     </div>
     <div class="prose dark:prose-invert text-sm text-gray-600 dark:text-gray-300 space-y-4 max-h-[60vh] overflow-auto pr-2">
      <p class="font-semibold text-gray-800 dark:text-white">SmartStay AkÄ±llÄ± Ev Kiralama Hizmet KullanÄ±m ÅartlarÄ±</p>
      <p><strong>Son GÃ¼ncelleme:</strong> 01 Ocak 2025</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">1. Hizmetin TanÄ±mÄ±</h4>
      <p>SmartStay, kullanÄ±cÄ±lara kÄ±sa sÃ¼reli akÄ±llÄ± ev konaklama hizmeti sunan bir platformdur. Bu hizmet, mobil uygulama ve web sitesi Ã¼zerinden rezervasyon yapma, Ã¶deme iÅŸleme ve akÄ±llÄ± oda kontrolÃ¼ Ã¶zelliklerini iÃ§erir.</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">2. Ãœyelik KoÅŸullarÄ±</h4>
      <p>2.1. Hizmeti kullanabilmek iÃ§in 18 yaÅŸÄ±nÄ± doldurmuÅŸ olmanÄ±z gerekmektedir.</p>
      <p>2.2. KayÄ±t sÄ±rasÄ±nda verilen bilgilerin doÄŸru ve gÃ¼ncel olmasÄ± zorunludur.</p>
      <p>2.3. Her kullanÄ±cÄ± yalnÄ±zca bir hesap aÃ§abilir.</p>
      <p>2.4. Hesap bilgilerinizin gÃ¼venliÄŸinden siz sorumlusunuz.</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">3. Rezervasyon ve Ä°ptal PolitikasÄ±</h4>
      <p>3.1. Rezervasyonlar, mÃ¼saitlik durumuna gÃ¶re onaylanÄ±r.</p>
      <p>3.2. GiriÅŸ saatinden en az 2 saat Ã¶nce yapÄ±lan iptallerde tam iade yapÄ±lÄ±r.</p>
      <p>3.3. 2 saatten az sÃ¼rede yapÄ±lan iptallerde %50 kesinti uygulanÄ±r.</p>
      <p>3.4. GiriÅŸ saatinden sonra yapÄ±lan iptallerde iade yapÄ±lmaz.</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">4. Ã–deme KoÅŸullarÄ±</h4>
      <p>4.1. TÃ¼m Ã¶demeler rezervasyon sÄ±rasÄ±nda alÄ±nÄ±r.</p>
      <p>4.2. Kabul edilen Ã¶deme yÃ¶ntemleri: Kredi kartÄ±, banka kartÄ±.</p>
      <p>4.3. Fiyatlar KDV dahildir.</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">5. KullanÄ±cÄ± SorumluluklarÄ±</h4>
      <p>5.1. Konaklama sÃ¼resince odaya ve demirbaÅŸlara zarar vermemeyi kabul edersiniz.</p>
      <p>5.2. Oda kapasitesini aÅŸan kiÅŸi sayÄ±sÄ±yla konaklama yapÄ±lamaz.</p>
      <p>5.3. YasadÄ±ÅŸÄ± faaliyetler kesinlikle yasaktÄ±r.</p>
      <p>5.4. GÃ¼rÃ¼ltÃ¼ ve komÅŸu haklarÄ± ihlalleri tolere edilmez.</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">6. AkÄ±llÄ± Ev Ã–zellikleri</h4>
      <p>6.1. AkÄ±llÄ± kapÄ± kilidi, aydÄ±nlatma ve klima kontrolÃ¼ hizmetlerimize dahildir.</p>
      <p>6.2. Bu Ã¶zelliklerin kÃ¶tÃ¼ye kullanÄ±mÄ± hesap askÄ±ya alÄ±nmasÄ±na neden olabilir.</p>
      <p>6.3. Teknik arÄ±zalarda 7/24 destek hattÄ±mÄ±z hizmetinizdedir.</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">7. Sorumluluk SÄ±nÄ±rlarÄ±</h4>
      <p>7.1. SmartStay, kullanÄ±cÄ±larÄ±n kiÅŸisel eÅŸyalarÄ±ndan sorumlu deÄŸildir.</p>
      <p>7.2. MÃ¼cbir sebeplerden kaynaklanan aksaklÄ±klardan sorumluluk kabul edilmez.</p>
      <p>7.3. Hizmet kesintileri iÃ§in Ã¶nceden bilgilendirme yapÄ±lÄ±r.</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">8. SÃ¶zleÅŸme DeÄŸiÅŸiklikleri</h4>
      <p>SmartStay, bu ÅŸartlarÄ± Ã¶nceden bildirimde bulunarak deÄŸiÅŸtirme hakkÄ±nÄ± saklÄ± tutar. GÃ¼ncel ÅŸartlar her zaman uygulama ve web sitesinde yayÄ±nlanÄ±r.</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">9. UyuÅŸmazlÄ±k Ã‡Ã¶zÃ¼mÃ¼</h4>
      <p>Bu sÃ¶zleÅŸmeden doÄŸan uyuÅŸmazlÄ±klarda TÃ¼rkiye Cumhuriyeti kanunlarÄ± geÃ§erlidir ve Ä°stanbul Mahkemeleri yetkilidir.</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">10. Ä°letiÅŸim</h4>
      <p>SorularÄ±nÄ±z iÃ§in: destek@smartstay.com.tr</p>
     </div><button onclick="closeTermsModal()" class="w-full py-3 bg-[#4F8EF7] text-white font-semibold rounded-xl mt-4" data-i18n="close_text">Kapat</button>
    </div>
   </div><!-- Privacy Modal -->
   <div id="privacy-modal" class="fixed inset-0 bg-black/50 z-[150] hidden items-center justify-center p-4 overflow-auto">
    <div class="cancel-modal bg-white dark:bg-gray-800 rounded-3xl p-6 max-w-2xl w-full shadow-2xl max-h-[90%] overflow-auto my-4">
     <div class="flex items-center justify-between mb-4">
      <h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white" data-i18n="privacy_policy">KVKK &amp; Gizlilik PolitikasÄ±</h3><button onclick="closePrivacyModal()" class="w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-600"> <span class="text-xl">âœ•</span> </button>
     </div>
     <div class="prose dark:prose-invert text-sm text-gray-600 dark:text-gray-300 space-y-4 max-h-[60vh] overflow-auto pr-2">
      <p class="font-semibold text-gray-800 dark:text-white">SmartStay KiÅŸisel Verilerin KorunmasÄ± ve Gizlilik PolitikasÄ±</p>
      <p><strong>Son GÃ¼ncelleme:</strong> 01 Ocak 2025</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">1. Veri Sorumlusu</h4>
      <p>SmartStay Teknoloji A.Å. ("Åirket") olarak, 6698 sayÄ±lÄ± KiÅŸisel Verilerin KorunmasÄ± Kanunu ("KVKK") kapsamÄ±nda veri sorumlusu sÄ±fatÄ±yla kiÅŸisel verilerinizi iÅŸlemekteyiz.</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">2. Toplanan KiÅŸisel Veriler</h4>
      <p>Hizmetlerimizi sunabilmek iÃ§in aÅŸaÄŸÄ±daki kiÅŸisel verileri topluyoruz:</p>
      <ul class="list-disc pl-5 space-y-1">
       <li><strong>Kimlik Bilgileri:</strong> Ad, soyad, T.C. kimlik numarasÄ±, cinsiyet</li>
       <li><strong>Ä°letiÅŸim Bilgileri:</strong> Telefon numarasÄ±, e-posta adresi</li>
       <li><strong>Hesap Bilgileri:</strong> KullanÄ±cÄ± adÄ±, ÅŸifre (ÅŸifrelenmiÅŸ olarak)</li>
       <li><strong>Ä°ÅŸlem Bilgileri:</strong> Rezervasyon geÃ§miÅŸi, Ã¶deme kayÄ±tlarÄ±</li>
       <li><strong>Konum Bilgileri:</strong> Konaklama noktasÄ± tercihleri</li>
       <li><strong>Cihaz Bilgileri:</strong> IP adresi, tarayÄ±cÄ± tÃ¼rÃ¼, iÅŸletim sistemi</li>
      </ul>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">3. Verilerin Ä°ÅŸlenme AmaÃ§larÄ±</h4>
      <p>KiÅŸisel verileriniz aÅŸaÄŸÄ±daki amaÃ§larla iÅŸlenmektedir:</p>
      <ul class="list-disc pl-5 space-y-1">
       <li>Ãœyelik iÅŸlemlerinin gerÃ§ekleÅŸtirilmesi</li>
       <li>Rezervasyon ve konaklama hizmetlerinin sunulmasÄ±</li>
       <li>Ã–deme iÅŸlemlerinin yÃ¼rÃ¼tÃ¼lmesi</li>
       <li>MÃ¼ÅŸteri hizmetleri ve destek saÄŸlanmasÄ±</li>
       <li>Yasal yÃ¼kÃ¼mlÃ¼lÃ¼klerin yerine getirilmesi</li>
       <li>Hizmet kalitesinin artÄ±rÄ±lmasÄ± ve analiz</li>
       <li>GÃ¼venlik ve dolandÄ±rÄ±cÄ±lÄ±k Ã¶nleme</li>
      </ul>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">4. Verilerin AktarÄ±lmasÄ±</h4>
      <p>KiÅŸisel verileriniz, yasal zorunluluklar ve hizmet gereksinimleri dahilinde aÅŸaÄŸÄ±daki taraflara aktarÄ±labilir:</p>
      <ul class="list-disc pl-5 space-y-1">
       <li>Ã–deme hizmeti saÄŸlayÄ±cÄ±larÄ± (bankalar, Ã¶deme kuruluÅŸlarÄ±)</li>
       <li>Yasal otoriteler (mahkemeler, dÃ¼zenleyici kurumlar)</li>
       <li>Teknik altyapÄ± hizmet saÄŸlayÄ±cÄ±larÄ±</li>
      </ul>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">5. Veri Saklama SÃ¼resi</h4>
      <p>KiÅŸisel verileriniz, iÅŸleme amaÃ§larÄ±nÄ±n gerektirdiÄŸi sÃ¼re boyunca ve yasal saklama sÃ¼releri dahilinde muhafaza edilir. Ãœyelik iptali sonrasÄ± veriler yasal sÃ¼re sonunda silinir.</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">6. Veri GÃ¼venliÄŸi</h4>
      <p>Verilerinizin gÃ¼venliÄŸi iÃ§in aÅŸaÄŸÄ±daki Ã¶nlemleri alÄ±yoruz:</p>
      <ul class="list-disc pl-5 space-y-1">
       <li>SSL/TLS ÅŸifreleme ile veri iletimi</li>
       <li>Åifrelerin hash algoritmalarÄ± ile saklanmasÄ±</li>
       <li>DÃ¼zenli gÃ¼venlik denetimleri</li>
       <li>EriÅŸim kontrolleri ve yetkilendirme</li>
       <li>Fiziksel ve dijital gÃ¼venlik Ã¶nlemleri</li>
      </ul>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">7. KVKK KapsamÄ±ndaki HaklarÄ±nÄ±z</h4>
      <p>KVKK'nÄ±n 11. maddesi uyarÄ±nca aÅŸaÄŸÄ±daki haklara sahipsiniz:</p>
      <ul class="list-disc pl-5 space-y-1">
       <li>KiÅŸisel verilerinizin iÅŸlenip iÅŸlenmediÄŸini Ã¶ÄŸrenme</li>
       <li>Ä°ÅŸlenen veriler hakkÄ±nda bilgi talep etme</li>
       <li>Verilerin iÅŸlenme amacÄ±nÄ± ve bu amaca uygun kullanÄ±lÄ±p kullanÄ±lmadÄ±ÄŸÄ±nÄ± Ã¶ÄŸrenme</li>
       <li>Verilerin yurtiÃ§i veya yurtdÄ±ÅŸÄ±nda aktarÄ±ldÄ±ÄŸÄ± Ã¼Ã§Ã¼ncÃ¼ kiÅŸileri Ã¶ÄŸrenme</li>
       <li>Eksik veya yanlÄ±ÅŸ iÅŸlenen verilerin dÃ¼zeltilmesini isteme</li>
       <li>Verilerin silinmesini veya yok edilmesini isteme</li>
       <li>DÃ¼zeltme, silme veya yok etme iÅŸlemlerinin Ã¼Ã§Ã¼ncÃ¼ kiÅŸilere bildirilmesini isteme</li>
       <li>Ä°ÅŸlenen verilerin otomatik sistemler vasÄ±tasÄ±yla analiz edilmesi sonucu aleyhinize bir sonucun ortaya Ã§Ä±kmasÄ±na itiraz etme</li>
       <li>Kanuna aykÄ±rÄ± iÅŸleme nedeniyle zarara uÄŸramanÄ±z halinde zararÄ±n giderilmesini talep etme</li>
      </ul>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">8. Ã‡erezler (Cookies)</h4>
      <p>Web sitemiz ve uygulamamÄ±z, kullanÄ±cÄ± deneyimini iyileÅŸtirmek iÃ§in Ã§erezler kullanmaktadÄ±r. Ã‡erez tercihlerinizi tarayÄ±cÄ± ayarlarÄ±ndan yÃ¶netebilirsiniz.</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">9. Politika DeÄŸiÅŸiklikleri</h4>
      <p>Bu gizlilik politikasÄ±, yasal dÃ¼zenlemeler veya hizmet deÄŸiÅŸiklikleri doÄŸrultusunda gÃ¼ncellenebilir. Ã–nemli deÄŸiÅŸiklikler iÃ§in kullanÄ±cÄ±larÄ±mÄ±zÄ± bilgilendiririz.</p>
      <h4 class="font-semibold text-gray-800 dark:text-white mt-4">10. Ä°letiÅŸim ve BaÅŸvuru</h4>
      <p>KVKK kapsamÄ±ndaki haklarÄ±nÄ±zÄ± kullanmak veya sorularÄ±nÄ±z iÃ§in:</p>
      <p><strong>E-posta:</strong> kvkk@smartstay.com.tr</p>
      <p><strong>Adres:</strong> SmartStay Teknoloji A.Å., Ä°stanbul, TÃ¼rkiye</p>
      <p><strong>KEP:</strong> smartstay@hs01.kep.tr</p>
     </div><button onclick="closePrivacyModal()" class="w-full py-3 bg-[#4F8EF7] text-white font-semibold rounded-xl mt-4" data-i18n="close_text">Kapat</button>
    </div>
   </div><!-- Cancel Confirmation Modal -->
   <div id="cancel-modal" class="fixed inset-0 bg-black/50 z-[150] hidden items-center justify-center p-4">
    <div class="cancel-modal bg-white dark:bg-gray-800 rounded-3xl p-8 max-w-md w-full shadow-2xl">
     <div class="text-center">
      <div class="w-20 h-20 bg-[#FF4B5C]/10 rounded-full flex items-center justify-center mx-auto mb-4"><span class="text-4xl">âš ï¸</span>
      </div>
      <h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="cancel_confirm_title">Rezervasyonu Ä°ptal Et</h3>
      <p class="text-gray-500 dark:text-gray-400 mb-6" data-i18n="cancel_confirm_msg">Bu rezervasyonu iptal etmek istediÄŸinizden emin misiniz?</p>
      <div class="flex gap-3"><button onclick="closeCancelModal()" class="flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-xl" data-i18n="no_go_back">HayÄ±r, Geri DÃ¶n</button> <button onclick="confirmCancelReservation()" class="flex-1 py-3 bg-[#FF4B5C] text-white font-medium rounded-xl" data-i18n="yes_cancel">Evet, Ä°ptal Et</button>
      </div>
     </div>
    </div>
   </div><!-- Language & Theme Selector - Vertical Right Side -->
   <div class="fixed right-4 top-1/2 -translate-y-1/2 z-[200] flex flex-col gap-2"><button onclick="toggleDarkMode()" id="theme-toggle" class="w-10 h-10 rounded-xl bg-white dark:bg-white shadow-lg flex items-center justify-center text-lg hover:shadow-xl transition-all" title="Dark Mode"> <span id="theme-icon">ğŸŒ™</span> </button> <button onclick="setLanguage('tr')" class="lang-btn w-10 h-10 rounded-xl bg-white dark:bg-white shadow-lg flex items-center justify-center text-xl hover:shadow-xl hover:scale-110 transition-all" data-lang="tr" title="TÃ¼rkÃ§e">ğŸ‡¹ğŸ‡·</button> <button onclick="setLanguage('en')" class="lang-btn w-10 h-10 rounded-xl bg-white dark:bg-white shadow-lg flex items-center justify-center text-xl hover:shadow-xl hover:scale-110 transition-all" data-lang="en" title="English">ğŸ‡¬ğŸ‡§</button> <button onclick="setLanguage('de')" class="lang-btn w-10 h-10 rounded-xl bg-white dark:bg-white shadow-lg flex items-center justify-center text-xl hover:shadow-xl hover:scale-110 transition-all" data-lang="de" title="Deutsch">ğŸ‡©ğŸ‡ª</button>
   </div><!-- Screen 1: Welcome with Header -->
   <div id="screen-welcome" class="screen h-full w-full flex flex-col overflow-hidden"><!-- Header -->
    <header class="bg-white dark:bg-gray-800 shadow-md z-50 flex-shrink-0">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16"><!-- Logo -->
       <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-gradient-to-br from-[#4F8EF7] to-[#30C48D] rounded-xl flex items-center justify-center">
         <svg viewbox="0 0 100 100" class="w-7 h-7"><path d="M50 15 L85 45 L85 85 L15 85 L15 45 Z" fill="white" opacity="0.9" /> <path d="M50 8 L92 42 L85 42 L50 15 L15 42 L8 42 Z" fill="white" /> <rect x="40" y="55" width="20" height="30" rx="2" fill="#4F8EF7" /> <circle cx="55" cy="72" r="2.5" fill="#30C48D" />
         </svg>
        </div><span class="font-heading font-bold text-gray-800 dark:text-white text-xl hidden sm:block">SmartStay</span>
       </div><!-- Navigation Links -->
       <nav class="hidden md:flex items-center gap-6"><button onclick="requireAuth('locations')" class="text-gray-600 dark:text-gray-300 hover:text-[#4F8EF7] font-medium transition-colors flex items-center gap-2"> <span>â•</span> <span data-i18n="new_reservation">Yeni Rezervasyon</span> </button> <button onclick="requireAuth('history')" class="text-gray-600 dark:text-gray-300 hover:text-[#4F8EF7] font-medium transition-colors flex items-center gap-2"> <span>ğŸ“‹</span> <span data-i18n="reservation_history">Rezervasyon GeÃ§miÅŸi</span> </button> <button onclick="requireAuth('settings')" class="text-gray-600 dark:text-gray-300 hover:text-[#4F8EF7] font-medium transition-colors flex items-center gap-2"> <span>âš™ï¸</span> <span data-i18n="account_settings">Hesap AyarlarÄ±</span> </button> <button onclick="showScreen('about')" class="text-gray-600 dark:text-gray-300 hover:text-[#4F8EF7] font-medium transition-colors flex items-center gap-2"> <span>â„¹ï¸</span> <span data-i18n="about_us">HakkÄ±mÄ±zda</span> </button>
       </nav><!-- Auth Buttons -->
       <div class="flex items-center gap-3"><button onclick="showScreen('login')" class="px-4 py-2 text-[#4F8EF7] font-semibold hover:bg-[#4F8EF7]/5 rounded-xl transition-all" data-i18n="login">GiriÅŸ Yap</button> <button onclick="showScreen('register')" class="px-4 py-2 bg-[#4F8EF7] text-white font-semibold rounded-xl hover:bg-[#3D7CE5] transition-all" data-i18n="register">Ãœye Ol</button>
       </div>
      </div><!-- Mobile Navigation -->
      <div class="md:hidden pb-3 flex gap-2 overflow-x-auto"><button onclick="requireAuth('locations')" class="flex-shrink-0 px-3 py-2 text-sm text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg">â• <span data-i18n="new_reservation">Yeni Rezervasyon</span></button> <button onclick="requireAuth('history')" class="flex-shrink-0 px-3 py-2 text-sm text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg">ğŸ“‹ <span data-i18n="reservation_history">GeÃ§miÅŸ</span></button> <button onclick="requireAuth('settings')" class="flex-shrink-0 px-3 py-2 text-sm text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg">âš™ï¸ <span data-i18n="account_settings">Ayarlar</span></button> <button onclick="showScreen('about')" class="flex-shrink-0 px-3 py-2 text-sm text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg">â„¹ï¸ <span data-i18n="about_us">HakkÄ±mÄ±zda</span></button>
      </div>
     </div>
    </header><!-- Hero Content -->
    <div class="flex-1 flex flex-col items-center justify-center p-6 relative overflow-hidden bg-[#F5F7FA] dark:bg-gray-900">
     <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div class="absolute top-20 left-10 text-6xl opacity-20 float-animation">
       ğŸ¡
      </div>
      <div class="absolute top-40 right-20 text-5xl opacity-15 float-animation-delayed">
       ğŸ”‘
      </div>
      <div class="absolute bottom-32 left-20 text-5xl opacity-15">
       ï¿½ï¿½ï¿½
      </div>
      <div class="absolute top-1/3 left-1/4 w-64 h-64 bg-[#4F8EF7] rounded-full opacity-10 dark:opacity-20 blur-3xl"></div>
     </div>
     <div class="relative z-10 text-center max-w-2xl">
      <div class="w-28 h-28 bg-gradient-to-br from-[#4F8EF7] to-[#30C48D] rounded-3xl flex items-center justify-center mx-auto mb-8 shadow-2xl pulse-glow slide-up">
       <svg viewbox="0 0 100 100" class="w-20 h-20"><defs>
         <lineargradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#ffffff;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#e0f0ff;stop-opacity:1" />
         </lineargradient>
        </defs> <path d="M50 15 L85 45 L85 85 L15 85 L15 45 Z" fill="url(#logoGrad)" stroke="white" stroke-width="2" /> <path d="M50 8 L92 42 L85 42 L50 15 L15 42 L8 42 Z" fill="white" /> <rect x="40" y="55" width="20" height="30" rx="2" fill="#4F8EF7" /> <circle cx="55" cy="72" r="2.5" fill="#30C48D" /> <rect x="22" y="50" width="12" height="12" rx="1" fill="#4F8EF7" opacity="0.8" /> <rect x="66" y="50" width="12" height="12" rx="1" fill="#4F8EF7" opacity="0.8" /> <path d="M75 25 Q80 20 85 25" stroke="#30C48D" stroke-width="2.5" fill="none" stroke-linecap="round" /> <path d="M78 30 Q82 27 86 30" stroke="#30C48D" stroke-width="2" fill="none" stroke-linecap="round" /> <circle cx="82" cy="34" r="2" fill="#30C48D" />
       </svg>
      </div>
      <h1 id="main-title" class="font-heading text-3xl md:text-5xl font-bold text-gray-800 dark:text-white mb-4 slide-up-delayed" data-i18n="app_title">AkÄ±llÄ± Ev Kiralama Sistemi</h1>
      <p id="main-subtitle" class="text-gray-500 dark:text-gray-400 text-lg md:text-xl mb-10 slide-up-delayed-2" data-i18n="welcome_subtitle">AkÄ±llÄ± odalara anlÄ±k rezervasyon, kontrol ve giriÅŸ sistemi</p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center"><button onclick="showScreen('register')" class="px-8 py-4 bg-[#4F8EF7] text-white font-semibold rounded-2xl shadow-lg shadow-[#4F8EF7]/30 hover:bg-[#3D7CE5] transition-all text-lg">ğŸš€ <span data-i18n="get_started">Hemen BaÅŸla</span></button> <button onclick="requireAuth('locations')" class="px-8 py-4 bg-white dark:bg-gray-800 text-[#4F8EF7] font-semibold rounded-2xl border-2 border-[#4F8EF7] hover:bg-[#4F8EF7]/5 transition-all text-lg">â• <span data-i18n="new_reservation">Yeni Rezervasyon</span></button>
      </div><!-- Features -->
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mt-16">
       <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg">
        <div class="text-4xl mb-3">
         ğŸ”
        </div>
        <h3 class="font-heading font-bold text-gray-800 dark:text-white mb-2" data-i18n="feature_smart_access">AkÄ±llÄ± EriÅŸim</h3>
        <p class="text-gray-500 dark:text-gray-400 text-sm" data-i18n="feature_smart_access_desc">QR kod ile kapÄ± aÃ§ma</p>
       </div>
       <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg">
        <div class="text-4xl mb-3">
         ğŸ®
        </div>
        <h3 class="font-heading font-bold text-gray-800 dark:text-white mb-2" data-i18n="feature_room_control">Oda KontrolÃ¼</h3>
        <p class="text-gray-500 dark:text-gray-400 text-sm" data-i18n="feature_room_control_desc">IÅŸÄ±k, klima, TV kontrolÃ¼</p>
       </div>
       <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg">
        <div class="text-4xl mb-3">
         ğŸ“
        </div>
        <h3 class="font-heading font-bold text-gray-800 dark:text-white mb-2" data-i18n="feature_locations">12 Lokasyon</h3>
        <p class="text-gray-500 dark:text-gray-400 text-sm" data-i18n="feature_locations_desc">TÃ¼rkiye genelinde</p>
       </div>
      </div>
     </div>
    </div>
   </div><!-- Screen 2: Login -->
   <div id="screen-login" class="screen h-full w-full hidden flex-col items-center justify-center p-6 bg-gradient-to-br from-[#F5F7FA] to-[#E8F4FD] dark:from-gray-900 dark:to-gray-800">
    <div class="w-full max-w-md">
     <div class="glass-card rounded-3xl shadow-xl p-8">
      <div class="text-center mb-8">
       <div class="w-16 h-16 bg-[#4F8EF7]/10 rounded-2xl flex items-center justify-center mx-auto mb-4">
        <span class="text-3xl">ğŸ”</span>
       </div>
       <h2 class="font-heading text-2xl font-bold text-gray-800 dark:text-white" data-i18n="login">GiriÅŸ Yap</h2>
       <p class="text-gray-500 dark:text-gray-400 text-sm mt-2" data-i18n="access_account">HesabÄ±nÄ±za eriÅŸin</p>
      </div>
      <form id="login-form" onsubmit="handleLogin(event)" class="space-y-5">
       <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="login-tc" data-i18n="tc_id">T.C. Kimlik No</label> <input type="text" id="login-tc" maxlength="11" placeholder="11 haneli T.C. Kimlik No" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] focus:ring-2 focus:ring-[#4F8EF7]/20 outline-none transition-all">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="login-password" data-i18n="password">Åifre</label> <input type="password" id="login-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] focus:ring-2 focus:ring-[#4F8EF7]/20 outline-none transition-all">
       </div>
       <div id="login-error" class="hidden p-3 bg-[#FF4B5C]/10 border border-[#FF4B5C]/20 rounded-xl text-[#FF4B5C] text-sm"></div><button type="submit" class="w-full py-4 bg-[#4F8EF7] text-white font-semibold rounded-xl shadow-lg shadow-[#4F8EF7]/30 hover:bg-[#3D7CE5] transition-all" data-i18n="login">GiriÅŸ Yap</button>
      </form>
      <div class="mt-6 text-center space-y-3"><button onclick="showScreen('register')" class="text-[#4F8EF7] hover:underline text-sm font-medium" data-i18n="no_account">HesabÄ±nÄ±z yok mu? Ãœye olun</button> <br><button onclick="showScreen('welcome')" class="text-gray-400 hover:text-gray-600 text-sm" data-i18n="back_home">ï¿½ï¿½ï¿½ï¿½ï¿½ Ana sayfaya dÃ¶n</button>
      </div>
     </div>
    </div>
   </div><!-- Screen 3: Register -->
   <div id="screen-register" class="screen h-full w-full hidden flex-col items-center justify-center p-6 overflow-auto">
    <div class="w-full max-w-lg py-8">
     <div class="mb-8">
      <div class="flex items-center justify-between mb-4"><span id="step-label" class="text-sm font-medium text-gray-600 dark:text-gray-400">AdÄ±m 1/4</span> <span id="step-title" class="text-sm font-medium text-[#4F8EF7]" data-i18n="personal_info">KiÅŸisel Bilgiler</span>
      </div>
      <div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
       <div id="progress-bar" class="h-full bg-gradient-to-r from-[#4F8EF7] to-[#30C48D] transition-all duration-500" style="width: 25%"></div>
      </div>
     </div>
     <div class="glass-card rounded-3xl shadow-xl p-8"><!-- Step 1 -->
      <div id="register-step-1" class="register-step">
       <h2 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-6">ğŸ‘¤ <span data-i18n="personal_info">KiÅŸisel Bilgiler</span></h2>
       <div class="space-y-4">
        <div class="grid grid-cols-2 gap-4">
         <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-name" data-i18n="first_name">Ad</label> <input type="text" id="reg-name" placeholder="AdÄ±nÄ±z" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
         </div>
         <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-surname" data-i18n="last_name">Soyad</label> <input type="text" id="reg-surname" placeholder="SoyadÄ±nÄ±z" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
         </div>
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-phone" data-i18n="phone">Telefon</label> <input type="tel" id="reg-phone" placeholder="0(5XX) XXX XX XX" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-email" data-i18n="email">E-posta</label> <input type="email" id="reg-email" placeholder="ornek@email.com" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-tc" data-i18n="tc_id">T.C. Kimlik No</label> <input type="text" id="reg-tc" maxlength="11" placeholder="11 haneli T.C. Kimlik No" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-gender" data-i18n="gender">Cinsiyet</label> <select id="reg-gender" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none bg-white"> <option value="" data-i18n-opt="select">SeÃ§iniz</option> <option value="male" data-i18n-opt="male">Erkek</option> <option value="female" data-i18n-opt="female">KadÄ±n</option> <option value="other" data-i18n-opt="prefer_not_say">Belirtmek Ä°stemiyorum</option> </select>
        </div>
       </div>
      </div><!-- Step 2 -->
      <div id="register-step-2" class="register-step hidden">
       <h2 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-6">ğŸ” <span data-i18n="account_info">Hesap Bilgileri</span></h2>
       <div class="space-y-4">
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-username" data-i18n="username">KullanÄ±cÄ± AdÄ±</label> <input type="text" id="reg-username" placeholder="kullanici.adi" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-password" data-i18n="password">Åifre</label> <input type="password" id="reg-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
         <div class="mt-2 p-3 bg-[#4F8EF7]/5 rounded-lg">
          <p class="text-xs text-gray-600 dark:text-gray-400 font-medium mb-1" data-i18n="password_requirements">Åifre gereksinimleri:</p>
          <ul class="text-xs text-gray-500 space-y-1">
           <li id="req-length">â—‹ <span data-i18n="req_length">En az 8 karakter</span></li>
           <li id="req-upper">â—‹ <span data-i18n="req_upper">En az 1 bÃ¼yÃ¼k harf</span></li>
           <li id="req-number">â—‹ <span data-i18n="req_number">En az 1 rakam</span></li>
           <li id="req-special">â—‹ <span data-i18n="req_special">En az 1 Ã¶zel karakter</span></li>
          </ul>
         </div>
        </div>
        <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" for="reg-password-confirm" data-i18n="password_confirm">Åifre Tekrar</label> <input type="password" id="reg-password-confirm" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none">
        </div>
       </div>
      </div><!-- Step 3 -->
      <div id="register-step-3" class="register-step hidden">
       <h2 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-6">ğŸ“‹ <span data-i18n="agreements">SÃ¶zleÅŸmeler</span></h2>
       <div class="space-y-4">
        <div class="flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl"><input type="checkbox" id="agree-terms" class="w-5 h-5 mt-0.5 rounded border-gray-300 text-[#4F8EF7] cursor-pointer">
         <div class="flex-1">
          <div class="flex items-center justify-between">
           <p class="font-medium text-gray-800 dark:text-white" data-i18n="terms_of_use">KullanÄ±m ÅartlarÄ±</p><button type="button" onclick="openTermsModal()" class="text-[#4F8EF7] hover:underline text-sm font-medium flex items-center gap-1"> <span>ğŸ“„</span> <span data-i18n="read_text">Oku</span> </button>
          </div>
          <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="terms_desc">Hizmet kullanÄ±m koÅŸullarÄ±nÄ± okudum ve kabul ediyorum.</p>
         </div>
        </div>
        <div class="flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl"><input type="checkbox" id="agree-kvkk" class="w-5 h-5 mt-0.5 rounded border-gray-300 text-[#4F8EF7] cursor-pointer">
         <div class="flex-1">
          <div class="flex items-center justify-between">
           <p class="font-medium text-gray-800 dark:text-white" data-i18n="privacy_policy">KVKK &amp; Gizlilik PolitikasÄ±</p><button type="button" onclick="openPrivacyModal()" class="text-[#4F8EF7] hover:underline text-sm font-medium flex items-center gap-1"> <span>ğŸ“„</span> <span data-i18n="read_text">Oku</span> </button>
          </div>
          <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="privacy_desc">KiÅŸisel verilerimin iÅŸlenmesine iliÅŸkin aydÄ±nlatma metnini okudum.</p>
         </div>
        </div>
        <div id="agreement-error" class="hidden p-3 bg-[#FF4B5C]/10 border border-[#FF4B5C]/20 rounded-xl text-[#FF4B5C] text-sm"></div>
       </div>
      </div><!-- Step 4 -->
      <div id="register-step-4" class="register-step hidden text-center py-8">
       <div class="w-24 h-24 bg-[#30C48D]/10 rounded-full flex items-center justify-center mx-auto mb-6">
        <span class="text-5xl">ğŸ‰</span>
       </div>
       <h2 class="font-heading text-2xl font-bold text-gray-800 dark:text-white mb-3" data-i18n="register_success">Ãœyelik BaÅŸarÄ±lÄ±!</h2>
       <p class="text-gray-500 dark:text-gray-400 mb-8" data-i18n="register_success_desc">HesabÄ±nÄ±z baÅŸarÄ±yla oluÅŸturuldu.</p><button onclick="afterRegister()" class="px-8 py-4 bg-[#30C48D] text-white font-semibold rounded-xl" data-i18n="login">GiriÅŸ Yap</button>
      </div>
      <div id="register-nav" class="flex gap-4 mt-8"><button onclick="prevStep()" id="btn-prev" class="flex-1 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-xl hidden" data-i18n="back">â† Geri</button> <button onclick="nextStep()" id="btn-next" class="flex-1 py-3 bg-[#4F8EF7] text-white font-semibold rounded-xl" data-i18n="next">Ä°leri â†’</button>
      </div>
      <div id="register-error" class="hidden mt-4 p-3 bg-[#FF4B5C]/10 border border-[#FF4B5C]/20 rounded-xl text-[#FF4B5C] text-sm"></div>
     </div><button onclick="showScreen('welcome')" class="text-gray-400 hover:text-gray-600 text-sm mt-6 block mx-auto" data-i18n="back_home">â† Ana sayfaya dÃ¶n</button>
    </div>
   </div><!-- Screen 4: Dashboard -->
   <div id="screen-dashboard" class="screen h-full w-full hidden">
    <div class="flex h-full"><!-- Sidebar -->
     <aside id="sidebar" class="w-72 bg-white dark:bg-gray-800 h-full shadow-xl flex flex-col fixed md:relative z-50 transform -translate-x-full md:translate-x-0 transition-transform duration-300">
      <div class="p-4 border-b border-gray-100 dark:border-gray-700 flex items-center justify-center">
       <div class="flex items-center gap-2">
        <div class="w-10 h-10 bg-gradient-to-br from-[#4F8EF7] to-[#30C48D] rounded-xl flex items-center justify-center">
         <svg viewbox="0 0 100 100" class="w-7 h-7"><path d="M50 15 L85 45 L85 85 L15 85 L15 45 Z" fill="white" opacity="0.9" /> <path d="M50 8 L92 42 L85 42 L50 15 L15 42 L8 42 Z" fill="white" /> <rect x="40" y="55" width="20" height="30" rx="2" fill="#4F8EF7" /> <circle cx="55" cy="72" r="2.5" fill="#30C48D" />
         </svg>
        </div><span class="font-heading font-bold text-gray-800 dark:text-white text-lg">SmartStay</span>
       </div>
      </div>
      <div class="p-6 border-b border-gray-100 dark:border-gray-700">
       <div class="flex items-center gap-4">
        <div id="user-avatar" class="w-14 h-14 bg-gradient-to-br from-[#4F8EF7] to-[#30C48D] rounded-2xl flex items-center justify-center text-white text-xl font-bold">
         --
        </div>
        <div>
         <h3 id="user-fullname" class="font-heading font-semibold text-gray-800 dark:text-white">KullanÄ±cÄ±</h3>
         <p id="user-username" class="text-sm text-gray-400">@kullanici</p>
        </div>
       </div>
      </div>
      <nav class="flex-1 py-4"><button onclick="setActiveMenu(this); showDashboardSection('home')" class="sidebar-item active w-full flex items-center gap-4 px-6 py-3 text-left"> <span class="text-xl">ğŸ </span> <span class="font-medium text-gray-700 dark:text-gray-300" data-i18n="home">Ana Sayfa</span> </button> <button onclick="setActiveMenu(this); showScreen('locations')" class="sidebar-item w-full flex items-center gap-4 px-6 py-3 text-left"> <span class="text-xl">â•</span> <span class="font-medium text-gray-700 dark:text-gray-300" data-i18n="new_reservation">Yeni Rezervasyon</span> </button> <button onclick="setActiveMenu(this); showDashboardSection('history')" class="sidebar-item w-full flex items-center gap-4 px-6 py-3 text-left"> <span class="text-xl">ğŸ“‹</span> <span class="font-medium text-gray-700 dark:text-gray-300" data-i18n="reservation_history">Rezervasyon GeÃ§miÅŸi</span> </button> <button onclick="setActiveMenu(this); showDashboardSection('settings')" class="sidebar-item w-full flex items-center gap-4 px-6 py-3 text-left"> <span class="text-xl">âš™ï¸</span> <span class="font-medium text-gray-700 dark:text-gray-300" data-i18n="account_settings">Hesap AyarlarÄ±</span> </button>
      </nav>
      <div class="p-4 border-t border-gray-100 dark:border-gray-700"><button onclick="handleLogout()" class="w-full flex items-center gap-4 px-4 py-3 text-left text-[#FF4B5C] hover:bg-[#FF4B5C]/5 rounded-xl"> <span class="text-xl">ï¿½ï¿½</span> <span class="font-medium" data-i18n="logout">Ã‡Ä±kÄ±ÅŸ Yap</span> </button>
      </div>
     </aside><!-- Mobile Header -->
     <div class="md:hidden fixed top-0 left-0 right-0 bg-white dark:bg-gray-800 shadow-md z-40 px-4 py-3 flex items-center justify-between"><button onclick="toggleSidebar()" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl">
       <svg class="w-6 h-6 dark:text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
       </svg></button>
      <div class="flex items-center gap-2">
       <div class="w-8 h-8 bg-gradient-to-br from-[#4F8EF7] to-[#30C48D] rounded-lg flex items-center justify-center">
        <svg viewbox="0 0 100 100" class="w-5 h-5"><path d="M50 15 L85 45 L85 85 L15 85 L15 45 Z" fill="white" opacity="0.9" /> <path d="M50 8 L92 42 L85 42 L50 15 L15 42 L8 42 Z" fill="white" /> <rect x="40" y="55" width="20" height="30" rx="2" fill="#4F8EF7" />
        </svg>
       </div><span class="font-heading font-semibold dark:text-white">SmartStay</span>
      </div>
      <div id="mobile-avatar" class="w-10 h-10 bg-gradient-to-br from-[#4F8EF7] to-[#30C48D] rounded-xl flex items-center justify-center text-white text-sm font-bold">
       --
      </div>
     </div>
     <div id="sidebar-overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black/50 z-40 hidden md:hidden"></div><!-- Main Content -->
     <main class="flex-1 p-6 md:p-8 overflow-auto pt-20 md:pt-8 dark:bg-gray-900">
      <div id="dashboard-home" class="dashboard-section">
       <h1 id="welcome-title" class="font-heading text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-2">HoÅŸ Geldiniz! ğŸ‘‹</h1>
       <p class="text-gray-500 dark:text-gray-400 mb-8" data-i18n="dashboard_overview">AkÄ±llÄ± ev kiralama sisteminize genel bakÄ±ÅŸ</p>
       <div id="no-reservation-card" class="bg-white dark:bg-gray-800 rounded-3xl p-8 shadow-lg mb-8 text-center">
        <div class="w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-2xl flex items-center justify-center mx-auto mb-4">
         <span class="text-4xl">ğŸ </span>
        </div>
        <h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="no_active_reservation">Aktif Rezervasyonunuz Yok</h3>
        <p class="text-gray-500 dark:text-gray-400 mb-6" data-i18n="no_reservation_desc">Hemen yeni bir rezervasyon oluÅŸturun.</p><button onclick="showScreen('locations')" class="px-6 py-3 bg-[#4F8EF7] text-white font-semibold rounded-xl">â• <span data-i18n="new_reservation">Yeni Rezervasyon</span></button>
       </div>
       <div id="user-stats" class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg">
         <div class="text-3xl mb-2">
          ğŸ 
         </div>
         <p id="stat-total" class="text-2xl font-bold text-gray-800 dark:text-white">0</p>
         <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="total_stays">Toplam Konaklama</p>
        </div>
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg">
         <div class="text-3xl mb-2">
          â±ï¸
         </div>
         <p id="stat-hours" class="text-2xl font-bold text-gray-800 dark:text-white">0</p>
         <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="hours">Saat</p>
        </div>
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg">
         <div class="text-3xl mb-2">
          â­
         </div>
         <p class="text-2xl font-bold text-gray-800 dark:text-white">-</p>
         <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="avg_rating">Puan OrtalamasÄ±</p>
        </div>
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg">
         <div class="text-3xl mb-2">
          ğŸ’
         </div>
         <p id="stat-level" class="text-2xl font-bold text-[#4F8EF7]" data-i18n="starter">BaÅŸlangÄ±Ã§</p>
         <p class="text-sm text-gray-500 dark:text-gray-400" data-i18n="membership_level">Ãœyelik Seviyesi</p>
        </div>
       </div>
      </div>
      <div id="dashboard-history" class="dashboard-section hidden">
       <h1 class="font-heading text-2xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="reservation_history">Rezervasyon GeÃ§miÅŸi</h1>
       <p class="text-gray-500 dark:text-gray-400 mb-6" data-i18n="history_desc">TÃ¼m rezervasyonlarÄ±nÄ±zÄ± gÃ¶rÃ¼ntÃ¼leyin ve yÃ¶netin</p>
       <div class="flex gap-3 mb-6 overflow-x-auto pb-2"><button onclick="filterReservations('all')" class="filter-btn active px-4 py-2 bg-[#4F8EF7] text-white rounded-xl font-medium whitespace-nowrap" data-filter="all" data-i18n="all">TÃ¼mÃ¼</button> <button onclick="filterReservations('active')" class="filter-btn px-4 py-2 bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-xl font-medium whitespace-nowrap" data-filter="active" data-i18n="active_reservations">Aktif</button> <button onclick="filterReservations('completed')" class="filter-btn px-4 py-2 bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-xl font-medium whitespace-nowrap" data-filter="completed" data-i18n="completed_reservations">Tamamlanan</button> <button onclick="filterReservations('cancelled')" class="filter-btn px-4 py-2 bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-xl font-medium whitespace-nowrap" data-filter="cancelled" data-i18n="cancelled_reservations">Ä°ptal Edilen</button>
       </div>
       <div id="reservations-list" class="space-y-4"></div>
       <div id="no-reservations" class="hidden text-center py-12">
        <div class="w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-2xl flex items-center justify-center mx-auto mb-4">
         <span class="text-4xl">ğŸ“­</span>
        </div>
        <h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="no_reservations">Rezervasyon BulunamadÄ±</h3>
        <p class="text-gray-500 dark:text-gray-400" data-i18n="no_reservations_desc">Bu kategoride henÃ¼z rezervasyonunuz yok.</p>
       </div>
      </div>
      <div id="dashboard-settings" class="dashboard-section hidden">
       <h1 class="font-heading text-2xl font-bold text-gray-800 dark:text-white mb-6" data-i18n="account_settings">Hesap AyarlarÄ±</h1>
       <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6 max-w-2xl">
        <div class="space-y-6">
         <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="full_name">Ad Soyad</label><input type="text" id="settings-name" class="w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50" readonly>
         </div>
         <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="email">E-posta</label><input type="email" id="settings-email" class="w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50" readonly>
         </div>
         <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="phone">Telefon</label><input type="tel" id="settings-phone" class="w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50" readonly>
         </div>
        </div>
       </div>
      </div>
     </main>
    </div>
   </div><!-- Screen 5: Locations -->
   <div id="screen-locations" class="screen h-full w-full hidden overflow-auto">
    <div class="p-6 md:p-8 pt-16 md:pt-6"><button onclick="showScreen('dashboard')" class="flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 mb-6"><span>â†</span> <span data-i18n="back_dashboard">Dashboard'a DÃ¶n</span></button>
     <h1 class="font-heading text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="select_location">Konaklama NoktasÄ± SeÃ§in</h1>
     <p class="text-gray-500 dark:text-gray-400 mb-6" data-i18n="select_location_desc">Haritadan bir lokasyon seÃ§in veya aÅŸaÄŸÄ±daki listeden tercih yapÄ±n</p><!-- Find Nearest Location Button -->
     <div id="location-suggestion" class="bg-gradient-to-r from-[#4F8EF7] to-[#30C48D] rounded-2xl p-5 mb-6 shadow-lg">
      <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
       <div class="flex items-center gap-4">
        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center"><span class="text-3xl">ğŸ“</span>
        </div>
        <div>
         <h3 class="font-heading font-bold text-white" data-i18n="find_nearest">Size En YakÄ±n NoktayÄ± Bulun</h3>
         <p class="text-white/80 text-sm" data-i18n="find_nearest_desc">Konumunuza gÃ¶re en yakÄ±n konaklama noktasÄ±nÄ± Ã¶neririz</p>
        </div>
       </div><button onclick="findNearestLocation()" id="find-location-btn" class="px-6 py-3 bg-white text-[#4F8EF7] font-bold rounded-xl hover:bg-gray-100 transition-all flex items-center gap-2"> <span>ğŸ§­</span> <span data-i18n="use_my_location">Konumumu Kullan</span> </button>
      </div>
      <div id="nearest-result" class="hidden mt-4 p-4 bg-white/10 rounded-xl">
       <div class="flex items-center justify-between">
        <div>
         <p class="text-white/80 text-sm" data-i18n="nearest_location">En YakÄ±n Konaklama NoktasÄ±:</p>
         <h4 id="nearest-name" class="font-heading font-bold text-white text-lg">-</h4>
         <p id="nearest-distance" class="text-white/70 text-sm">-</p>
        </div><button onclick="selectNearestLocation()" class="px-5 py-2 bg-white text-[#30C48D] font-bold rounded-xl hover:bg-gray-100 transition-all"> <span data-i18n="select_this">Bunu SeÃ§</span> â†’ </button>
       </div>
      </div>
     </div><!-- Interactive Leaflet Map -->
     <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6 mb-8">
      <div id="leaflet-map" class="leaflet-map-container"></div>
      <div class="mt-4 text-center">
       <p class="text-sm text-gray-500 dark:text-gray-400">ğŸ“ <span data-i18n="click_pin">Haritadaki pinlere tÄ±klayarak lokasyon seÃ§in</span></p>
      </div>
     </div>
     <h3 class="font-heading text-lg font-bold text-gray-800 dark:text-white mb-4" data-i18n="location_list">Lokasyon Listesi</h3>
     <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4" id="location-cards">
      <div class="location-card bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg cursor-pointer" id="card-kirklareli" onclick="selectLocationFromMap('kirklareli')">
       <div class="flex items-start justify-between mb-3">
        <div class="flex items-center gap-3">
         <div class="w-12 h-12 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center">
          <span class="text-2xl">ğŸ›£ï¸</span>
         </div>
         <div>
          <h4 class="font-heading font-bold text-gray-800 dark:text-white">E80 Avrupa Otoyolu</h4>
          <p class="text-sm text-gray-500 dark:text-gray-400">KÄ±rklareli</p>
         </div>
        </div><a href="https://www.google.com/maps/@41.5767065,26.9846208,3a,75y,218.91h,90t" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" class="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-[#4F8EF7] hover:text-white transition-all" title="Google Maps'te AÃ§">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
         </svg></a>
       </div>
       <div class="flex items-center gap-2">
        <span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-xs font-medium">12 Oda</span><span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-xs font-medium">9 MÃ¼sait</span>
       </div>
      </div>
      <div class="location-card bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg cursor-pointer" id="card-bolu" onclick="selectLocationFromMap('bolu')">
       <div class="flex items-start justify-between mb-3">
        <div class="flex items-center gap-3">
         <div class="w-12 h-12 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center">
          <span class="text-2xl">ğŸ›£ï¸</span>
         </div>
         <div>
          <h4 class="font-heading font-bold text-gray-800 dark:text-white">E89 Otoyolu</h4>
          <p class="text-sm text-gray-500 dark:text-gray-400">Bolu - Ankara</p>
         </div>
        </div><a href="https://www.google.com/maps/@40.6377893,32.2326244,3a,75y,192.05h,97.08t" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" class="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-[#4F8EF7] hover:text-white transition-all" title="Google Maps'te AÃ§">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
         </svg></a>
       </div>
       <div class="flex items-center gap-2">
        <span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-xs font-medium">12 Oda</span><span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-xs font-medium">8 MÃ¼sait</span>
       </div>
      </div>
      <div class="location-card bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg cursor-pointer" id="card-mersin" onclick="selectLocationFromMap('mersin')">
       <div class="flex items-start justify-between mb-3">
        <div class="flex items-center gap-3">
         <div class="w-12 h-12 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center">
          <span class="text-2xl">ğŸ›£ï¸</span>
         </div>
         <div>
          <h4 class="font-heading font-bold text-gray-800 dark:text-white">E90 Otoyolu</h4>
          <p class="text-sm text-gray-500 dark:text-gray-400">Mersin - Adana</p>
         </div>
        </div><a href="https://www.google.com/maps/@37.0187251,35.0094363,3a,75y,8.08h,86.47t" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" class="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-[#4F8EF7] hover:text-white transition-all" title="Google Maps'te AÃ§">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
         </svg></a>
       </div>
       <div class="flex items-center gap-2">
        <span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-xs font-medium">12 Oda</span><span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-xs font-medium">10 MÃ¼sait</span>
       </div>
      </div>
      <div class="location-card bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg cursor-pointer" id="card-izmir" onclick="selectLocationFromMap('izmir')">
       <div class="flex items-start justify-between mb-3">
        <div class="flex items-center gap-3">
         <div class="w-12 h-12 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center">
          <span class="text-2xl">ğŸ›£ï¸</span>
         </div>
         <div>
          <h4 class="font-heading font-bold text-gray-800 dark:text-white">E96 Otoyolu</h4>
          <p class="text-sm text-gray-500 dark:text-gray-400">Ä°zmir - UÅŸak</p>
         </div>
        </div><a href="https://www.google.com/maps/@38.530735,28.412058,3a,75y,316.74h,78.64t" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" class="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-[#4F8EF7] hover:text-white transition-all" title="Google Maps'te AÃ§">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
         </svg></a>
       </div>
       <div class="flex items-center gap-2">
        <span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-xs font-medium">12 Oda</span><span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-xs font-medium">8 MÃ¼sait</span>
       </div>
      </div>
      <div class="location-card bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg cursor-pointer" id="card-erzurum" onclick="selectLocationFromMap('erzurum')">
       <div class="flex items-start justify-between mb-3">
        <div class="flex items-center gap-3">
         <div class="w-12 h-12 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center">
          <span class="text-2xl">ğŸ›£ï¸</span>
         </div>
         <div>
          <h4 class="font-heading font-bold text-gray-800 dark:text-white">E97 Otoyolu</h4>
          <p class="text-sm text-gray-500 dark:text-gray-400">Erzurum</p>
         </div>
        </div><a href="https://www.google.com/maps/@39.9598748,40.5747777,3a,75y,31.6h,76.59t" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" class="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-[#4F8EF7] hover:text-white transition-all" title="Google Maps'te AÃ§">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
         </svg></a>
       </div>
       <div class="flex items-center gap-2">
        <span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-xs font-medium">12 Oda</span><span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-xs font-medium">9 MÃ¼sait</span>
       </div>
      </div>
      <div class="location-card bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg cursor-pointer" id="card-sivas" onclick="selectLocationFromMap('sivas')">
       <div class="flex items-start justify-between mb-3">
        <div class="flex items-center gap-3">
         <div class="w-12 h-12 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center">
          <span class="text-2xl">ğŸ›£ï¸</span>
         </div>
         <div>
          <h4 class="font-heading font-bold text-gray-800 dark:text-white">E88 Otoyolu</h4>
          <p class="text-sm text-gray-500 dark:text-gray-400">Sivas</p>
         </div>
        </div><a href="https://www.google.com/maps/@39.8121973,36.2433486,3a,75y,278.56h,78.63t" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" class="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-[#4F8EF7] hover:text-white transition-all" title="Google Maps'te AÃ§">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
         </svg></a>
       </div>
       <div class="flex items-center gap-2">
        <span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-xs font-medium">12 Oda</span><span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-xs font-medium">7 MÃ¼sait</span>
       </div>
      </div>
      <div class="location-card bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg cursor-pointer" id="card-sanliurfa" onclick="selectLocationFromMap('sanliurfa')">
       <div class="flex items-start justify-between mb-3">
        <div class="flex items-center gap-3">
         <div class="w-12 h-12 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center">
          <span class="text-2xl">ğŸ›£ï¸</span>
         </div>
         <div>
          <h4 class="font-heading font-bold text-gray-800 dark:text-white">E90 Otoyolu</h4>
          <p class="text-sm text-gray-500 dark:text-gray-400">Adana - ÅanlÄ±urfa</p>
         </div>
        </div><a href="https://www.google.com/maps/@37.079789,38.0383604,3a,75y,205.55h,84.22t" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" class="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-[#4F8EF7] hover:text-white transition-all" title="Google Maps'te AÃ§">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
         </svg></a>
       </div>
       <div class="flex items-center gap-2">
        <span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-xs font-medium">12 Oda</span><span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-xs font-medium">10 MÃ¼sait</span>
       </div>
      </div>
      <div class="location-card bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg cursor-pointer" id="card-balikesir" onclick="selectLocationFromMap('balikesir')">
       <div class="flex items-start justify-between mb-3">
        <div class="flex items-center gap-3">
         <div class="w-12 h-12 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center">
          <span class="text-2xl">ğŸ›£ï¸</span>
         </div>
         <div>
          <h4 class="font-heading font-bold text-gray-800 dark:text-white">E881 Otoyolu</h4>
          <p class="text-sm text-gray-500 dark:text-gray-400">Ä°stanbul - Ä°zmir</p>
         </div>
        </div><a href="https://www.google.com/maps/@39.4494202,27.6342165,3a,75y,126.75h,80.13t" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" class="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-[#4F8EF7] hover:text-white transition-all" title="Google Maps'te AÃ§">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
         </svg></a>
       </div>
       <div class="flex items-center gap-2">
        <span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-xs font-medium">12 Oda</span><span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-xs font-medium">9 MÃ¼sait</span>
       </div>
      </div>
      <div class="location-card bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg cursor-pointer" id="card-denizli" onclick="selectLocationFromMap('denizli')">
       <div class="flex items-start justify-between mb-3">
        <div class="flex items-center gap-3">
         <div class="w-12 h-12 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center">
          <span class="text-2xl">ğŸ›£ï¸</span>
         </div>
         <div>
          <h4 class="font-heading font-bold text-gray-800 dark:text-white">E87 Otoyolu</h4>
          <p class="text-sm text-gray-500 dark:text-gray-400">Antalya - Denizli</p>
         </div>
        </div><a href="https://www.google.com/maps/@37.2161411,29.611929,3a,75y,300.92h,85.61t" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" class="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-[#4F8EF7] hover:text-white transition-all" title="Google Maps'te AÃ§">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
         </svg></a>
       </div>
       <div class="flex items-center gap-2">
        <span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-xs font-medium">12 Oda</span><span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-xs font-medium">8 MÃ¼sait</span>
       </div>
      </div>
      <div class="location-card bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg cursor-pointer" id="card-karadeniz" onclick="selectLocationFromMap('karadeniz')">
       <div class="flex items-start justify-between mb-3">
        <div class="flex items-center gap-3">
         <div class="w-12 h-12 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center">
          <span class="text-2xl">ğŸ›£ï¸</span>
         </div>
         <div>
          <h4 class="font-heading font-bold text-gray-800 dark:text-white">E70 Sahil Yolu</h4>
          <p class="text-sm text-gray-500 dark:text-gray-400">Karadeniz</p>
         </div>
        </div><a href="https://www.google.com/maps/@41.5017339,41.5337955,3a,75y,19.02h,87.96t" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" class="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-[#4F8EF7] hover:text-white transition-all" title="Google Maps'te AÃ§">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
         </svg></a>
       </div>
       <div class="flex items-center gap-2">
        <span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-xs font-medium">12 Oda</span><span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-xs font-medium">11 MÃ¼sait</span>
       </div>
      </div>
      <div class="location-card bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg cursor-pointer" id="card-igdir" onclick="selectLocationFromMap('igdir')">
       <div class="flex items-start justify-between mb-3">
        <div class="flex items-center gap-3">
         <div class="w-12 h-12 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center">
          <span class="text-2xl">ğŸ›£ï¸</span>
         </div>
         <div>
          <h4 class="font-heading font-bold text-gray-800 dark:text-white">E99 Otoyolu</h4>
          <p class="text-sm text-gray-500 dark:text-gray-400">IÄŸdÄ±r SÄ±nÄ±r</p>
         </div>
        </div><a href="https://www.google.com/maps/@39.7694363,44.6554241,3a,75y,109.12h,80t" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" class="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-[#4F8EF7] hover:text-white transition-all" title="Google Maps'te AÃ§">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
         </svg></a>
       </div>
       <div class="flex items-center gap-2">
        <span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-xs font-medium">12 Oda</span><span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-xs font-medium">10 MÃ¼sait</span>
       </div>
      </div>
      <div class="location-card bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-lg cursor-pointer" id="card-sivasyeni" onclick="selectLocationFromMap('sivasyeni')">
       <div class="flex items-start justify-between mb-3">
        <div class="flex items-center gap-3">
         <div class="w-12 h-12 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center">
          <span class="text-2xl">ğŸ›£ï¸</span>
         </div>
         <div>
          <h4 class="font-heading font-bold text-gray-800 dark:text-white">E88 Otoyolu</h4>
          <p class="text-sm text-gray-500 dark:text-gray-400">Sivas Merkez</p>
         </div>
        </div><a href="https://www.google.com/maps/@39.8121973,36.2433486,3a,75y,80h,85t" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation()" class="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-[#4F8EF7] hover:text-white transition-all" title="Google Maps'te AÃ§">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
         </svg></a>
       </div>
       <div class="flex items-center gap-2">
        <span class="px-3 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full text-xs font-medium">12 Oda</span><span class="px-3 py-1 bg-[#4F8EF7]/10 text-[#4F8EF7] rounded-full text-xs font-medium">9 MÃ¼sait</span>
       </div>
      </div>
     </div>
     <div id="selected-location-info" class="hidden mt-8 bg-gradient-to-r from-[#4F8EF7] to-[#30C48D] rounded-2xl p-6 text-white">
      <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
       <div class="flex items-center gap-4">
        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
         <span class="text-3xl">âœ…</span>
        </div>
        <div>
         <p class="text-white/80 text-sm" data-i18n="selected_location">SeÃ§ilen Lokasyon</p>
         <h3 id="selected-location-name" class="font-heading text-xl font-bold">-</h3>
        </div>
       </div><button onclick="continueToDatetime()" class="px-8 py-4 bg-white text-[#4F8EF7] font-bold rounded-xl hover:bg-gray-100 transition-all"><span data-i18n="continue">Devam Et</span> â†’</button>
      </div>
     </div>
    </div>
   </div><!-- Screen 6: DateTime -->
   <div id="screen-datetime" class="screen h-full w-full hidden overflow-auto">
    <div class="p-6 md:p-8 pt-16 md:pt-6 max-w-2xl mx-auto"><button onclick="showScreen('locations')" class="flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 mb-6"><span>â†</span> <span data-i18n="back_locations">Lokasyonlara DÃ¶n</span></button>
     <h1 class="font-heading text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="select_datetime">Tarih &amp; Saat SeÃ§in</h1>
     <p id="datetime-location" class="text-gray-500 dark:text-gray-400 mb-8">Lokasyon</p>
     <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6 md:p-8">
      <div class="space-y-6">
       <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="checkin_datetime">GiriÅŸ Tarihi &amp; Saati</label><input type="datetime-local" id="checkin" required class="w-full px-4 py-4 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none text-lg">
       </div>
       <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="checkout_datetime">Ã‡Ä±kÄ±ÅŸ Tarihi &amp; Saati</label><input type="datetime-local" id="checkout" required class="w-full px-4 py-4 rounded-xl border border-gray-200 focus:border-[#4F8EF7] outline-none text-lg">
       </div>
       <div class="p-4 bg-[#FF4B5C]/10 rounded-xl">
        <p class="font-medium text-[#FF4B5C] text-sm">âš ï¸ <span data-i18n="max_duration_warning">Maksimum SÃ¼re UyarÄ±sÄ±</span></p>
        <p class="text-sm text-gray-600 dark:text-gray-400 mt-1" data-i18n="max_duration_desc">Tek seferde maksimum 24 saat konaklama yapabilirsiniz.</p>
       </div>
       <div id="datetime-error" class="hidden p-3 bg-[#FF4B5C]/10 rounded-xl text-[#FF4B5C] text-sm"></div><button onclick="validateDateTime()" class="w-full py-4 bg-[#4F8EF7] text-white font-semibold rounded-xl" data-i18n="show_available_rooms">Mï¿½ï¿½sait OdalarÄ± GÃ¶ster</button>
      </div>
     </div>
    </div>
   </div><!-- Screen 7: Rooms -->
   <div id="screen-rooms" class="screen h-full w-full hidden overflow-auto">
    <div class="p-6 md:p-8 pt-16 md:pt-6"><button onclick="showScreen('datetime')" class="flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 mb-6"><span>â†</span> <span data-i18n="back_datetime">Tarih SeÃ§imine DÃ¶n</span></button>
     <h1 class="font-heading text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="select_room">Oda SeÃ§in</h1>
     <p id="rooms-info" class="text-gray-500 dark:text-gray-400 mb-4">Lokasyon â€¢ Tarih</p>
     <div class="flex items-center gap-6 mb-8">
      <div class="flex items-center gap-2">
       <div class="w-4 h-4 bg-[#30C48D] rounded-full"></div><span class="text-sm text-gray-600 dark:text-gray-400" data-i18n="available">MÃ¼sait</span>
      </div>
      <div class="flex items-center gap-2">
       <div class="w-4 h-4 bg-[#FF4B5C] rounded-full"></div><span class="text-sm text-gray-600 dark:text-gray-400" data-i18n="occupied">Dolu</span>
      </div>
     </div>
     <div id="rooms-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4"></div>
    </div>
   </div><!-- Screen 8: Payment -->
   <div id="screen-payment" class="screen h-full w-full hidden overflow-auto">
    <div class="p-6 md:p-8 pt-16 md:pt-6 max-w-2xl mx-auto"><button onclick="showScreen('rooms')" class="flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 mb-6"><span>â†</span> <span data-i18n="back_room">Oda SeÃ§imine DÃ¶n</span></button>
     <h1 class="font-heading text-2xl font-bold text-gray-800 dark:text-white mb-2" data-i18n="reservation_payment">Rezervasyon &amp; Ã–deme</h1>
     <p class="text-gray-500 dark:text-gray-400 mb-8" data-i18n="final_step">Son adÄ±m - Ã–deme bilgilerinizi girin</p>
     <div class="grid md:grid-cols-2 gap-6">
      <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6">
       <h3 class="font-heading font-bold text-gray-800 dark:text-white mb-4" data-i18n="reservation_summary">Rezervasyon Ã–zeti</h3>
       <div class="space-y-4">
        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl">
         <span class="text-gray-600 dark:text-gray-400" data-i18n="room">Oda</span><span id="summary-room" class="font-medium dark:text-white">#-</span>
        </div>
        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl">
         <span class="text-gray-600 dark:text-gray-400" data-i18n="location">Lokasyon</span><span id="summary-location" class="font-medium dark:text-white">-</span>
        </div>
        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl">
         <span class="text-gray-600 dark:text-gray-400" data-i18n="checkin">GiriÅŸ</span><span id="summary-checkin" class="font-medium dark:text-white">-</span>
        </div>
        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl">
         <span class="text-gray-600 dark:text-gray-400" data-i18n="checkout">Ã‡Ä±kÄ±ÅŸ</span><span id="summary-checkout" class="font-medium dark:text-white">-</span>
        </div>
        <div>
         <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="guest_count">KiÅŸi SayÄ±sÄ±</label><select id="guests" onchange="updatePrice()" class="w-full px-4 py-3 rounded-xl border border-gray-200 bg-white"><option value="1">1 KiÅŸi</option><option value="2" selected>2 KiÅŸi</option><option value="3">3 KiÅŸi</option><option value="4">4 KiÅŸi</option></select>
        </div>
       </div>
       <div class="mt-6 p-4 bg-[#4F8EF7]/5 rounded-xl">
        <div class="flex items-center justify-between mb-2">
         <span class="text-gray-600 dark:text-gray-400"><span id="price-hours">0</span> <span data-i18n="hour_unit">saat</span> x â‚º50</span><span id="price-base" class="font-medium dark:text-white">â‚º0</span>
        </div>
        <div id="price-extra-row" class="flex items-center justify-between mb-2 hidden">
         <span class="text-gray-600 dark:text-gray-400"><span data-i18n="extra_person">Ek kiÅŸi</span></span><span id="price-extra" class="font-medium dark:text-white">â‚º0</span>
        </div>
        <div class="border-t border-[#4F8EF7]/20 my-3"></div>
        <div class="flex items-center justify-between">
         <span class="font-bold text-gray-800 dark:text-white" data-i18n="total">Toplam</span><span id="price-total" class="font-bold text-xl text-[#4F8EF7]">â‚º0</span>
        </div>
       </div>
      </div>
      <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6">
       <h3 class="font-heading font-bold text-gray-800 dark:text-white mb-4">ğŸ’³ <span data-i18n="card_info">Kart Bilgileri</span></h3>
       <p class="text-xs text-gray-400 mb-4 p-2 bg-yellow-50 dark:bg-yellow-900/30 rounded-lg">âš ï¸ <span data-i18n="demo_warning">Demo amaÃ§lÄ± - GerÃ§ek Ã¶deme yapÄ±lmaz</span></p>
       <form id="payment-form" onsubmit="handlePayment(event)" class="space-y-4">
        <div>
         <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="card_name">Kart Ãœzerindeki Ä°sim</label><input type="text" id="card-name" placeholder="AD SOYAD" required class="w-full px-4 py-3 rounded-xl border border-gray-200 uppercase">
        </div>
        <div>
         <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="card_number">Kart NumarasÄ±</label><input type="text" id="card-number" placeholder="1234 5678 9012 3456" maxlength="19" required class="w-full px-4 py-3 rounded-xl border border-gray-200">
        </div>
        <div class="grid grid-cols-2 gap-4">
         <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" data-i18n="expiry_date">Son Kullanma</label><input type="text" id="card-expiry" placeholder="MM/YY" maxlength="5" required class="w-full px-4 py-3 rounded-xl border border-gray-200">
         </div>
         <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">CVV</label><input type="text" id="card-cvv" placeholder="123" maxlength="3" required class="w-full px-4 py-3 rounded-xl border border-gray-200">
         </div>
        </div><button type="submit" id="pay-btn" class="w-full py-4 bg-[#30C48D] text-white font-semibold rounded-xl mt-4"><span id="pay-btn-text">â‚º0 <span data-i18n="complete_payment">Ã–demeyi Tamamla</span></span></button>
       </form>
      </div>
     </div>
    </div>
   </div><!-- Screen 9: Ticket -->
   <div id="screen-ticket" class="screen h-full w-full hidden overflow-auto bg-gradient-to-br from-[#4F8EF7]/5 to-[#30C48D]/5 dark:from-gray-900 dark:to-gray-800">
    <div class="p-6 md:p-8 pt-16 md:pt-6 max-w-md mx-auto"><button onclick="showScreen('dashboard')" class="flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 mb-6"><span>â†</span> <span data-i18n="back_dashboard">Dashboard'a DÃ¶n</span></button>
     <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden">
      <div class="bg-gradient-to-r from-[#4F8EF7] to-[#30C48D] p-6 text-white text-center">
       <span class="text-4xl mb-3 block">ğŸ«</span>
       <h2 class="font-heading text-2xl font-bold" data-i18n="entry_ticket">GiriÅŸ Biletiniz</h2>
       <p class="text-white/80 text-sm" data-i18n="show_qr">Bu QR kodu kapÄ±da gÃ¶sterin</p>
      </div>
      <div class="p-8 flex justify-center ticket-edge dark:before:bg-gray-900 dark:after:bg-gray-900">
       <div class="w-48 h-48 bg-white dark:bg-gray-700 border-4 border-gray-100 dark:border-gray-600 rounded-2xl flex items-center justify-center">
        <svg viewbox="0 0 100 100" class="w-40 h-40">
         <rect fill="#000" x="10" y="10" width="25" height="25" /><rect fill="#000" x="65" y="10" width="25" height="25" /><rect fill="#000" x="10" y="65" width="25" height="25" /><rect fill="#fff" x="15" y="15" width="15" height="15" /><rect fill="#fff" x="70" y="15" width="15" height="15" /><rect fill="#fff" x="15" y="70" width="15" height="15" /><rect fill="#000" x="18" y="18" width="9" height="9" /><rect fill="#000" x="73" y="18" width="9" height="9" /><rect fill="#000" x="18" y="73" width="9" height="9" /><rect fill="#000" x="40" y="40" width="20" height="20" /><rect fill="#fff" x="45" y="45" width="10" height="10" /><rect fill="#000" x="65" y="65" width="25" height="25" /><rect fill="#fff" x="70" y="70" width="15" height="15" /><rect fill="#000" x="73" y="73" width="9" height="9" />
        </svg>
       </div>
      </div>
      <div class="px-6 pb-6">
       <div class="border-t-2 border-dashed border-gray-200 dark:border-gray-600 pt-6 space-y-3">
        <div class="flex items-center justify-between">
         <span class="text-gray-500 dark:text-gray-400" data-i18n="ticket_no">Bilet No</span><span id="ticket-number" class="font-mono font-bold text-gray-800 dark:text-white">#TKT-0000</span>
        </div>
        <div class="flex items-center justify-between">
         <span class="text-gray-500 dark:text-gray-400" data-i18n="room">Oda</span><span id="ticket-room" class="font-bold text-gray-800 dark:text-white">#-</span>
        </div>
        <div class="flex items-center justify-between">
         <span class="text-gray-500 dark:text-gray-400" data-i18n="location">Lokasyon</span><span id="ticket-location" class="font-medium text-gray-800 dark:text-white">-</span>
        </div>
        <div class="flex items-center justify-between">
         <span class="text-gray-500 dark:text-gray-400" data-i18n="checkin">GiriÅŸ</span><span id="ticket-checkin" class="font-medium text-gray-800 dark:text-white">-</span>
        </div>
        <div class="flex items-center justify-between">
         <span class="text-gray-500 dark:text-gray-400" data-i18n="checkout">Ã‡Ä±kÄ±ÅŸ</span><span id="ticket-checkout" class="font-medium text-gray-800 dark:text-white">-</span>
        </div>
        <div class="flex items-center justify-between">
         <span class="text-gray-500 dark:text-gray-400" data-i18n="guest_count">KiÅŸi</span><span id="ticket-guests" class="font-medium text-gray-800 dark:text-white">-</span>
        </div>
       </div><button onclick="showScreen('room-control')" class="w-full py-4 bg-[#4F8EF7] text-white font-semibold rounded-xl mt-6">ğŸ® <span data-i18n="go_to_control">Oda Kontrol Paneline Git</span></button>
      </div>
     </div>
    </div>
   </div><!-- Screen 11: About Us -->
   <div id="screen-about" class="screen h-full w-full hidden overflow-auto">
    <div class="p-6 md:p-8 pt-16 md:pt-6 max-w-4xl mx-auto"><button onclick="showScreen('welcome')" class="flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 mb-6"><span>â†</span> <span data-i18n="back_home">Ana sayfaya dÃ¶n</span></button>
     <div class="text-center mb-12">
      <div class="w-24 h-24 bg-gradient-to-br from-[#4F8EF7] to-[#30C48D] rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl">
       <svg viewbox="0 0 100 100" class="w-16 h-16"><path d="M50 15 L85 45 L85 85 L15 85 L15 45 Z" fill="white" opacity="0.9" /> <path d="M50 8 L92 42 L85 42 L50 15 L15 42 L8 42 Z" fill="white" /> <rect x="40" y="55" width="20" height="30" rx="2" fill="#4F8EF7" /> <circle cx="55" cy="72" r="2.5" fill="#30C48D" />
       </svg>
      </div>
      <h1 class="font-heading text-3xl md:text-4xl font-bold text-gray-800 dark:text-white mb-4" data-i18n="about_us">HakkÄ±mÄ±zda</h1>
      <p class="text-gray-500 dark:text-gray-400 text-lg max-w-2xl mx-auto" data-i18n="about_subtitle">SmartStay ile akÄ±llÄ± konaklama deneyimi</p>
     </div>
     <div class="grid md:grid-cols-2 gap-8 mb-12">
      <div class="bg-white dark:bg-gray-800 rounded-3xl p-8 shadow-xl">
       <div class="w-16 h-16 bg-[#4F8EF7]/10 rounded-2xl flex items-center justify-center mb-6"><span class="text-3xl">ğŸ¯</span>
       </div>
       <h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-4" data-i18n="our_mission">Misyonumuz</h3>
       <p class="text-gray-600 dark:text-gray-400 leading-relaxed" data-i18n="mission_desc">Seyahat edenlere ve yolculara, TÃ¼rkiye'nin dÃ¶rt bir yanÄ±nda konforlu, gÃ¼venli ve teknolojik konaklama imkanÄ± sunmak. AkÄ±llÄ± ev teknolojileri ile konaklama deneyimini yeniden tanÄ±mlÄ±yoruz.</p>
      </div>
      <div class="bg-white dark:bg-gray-800 rounded-3xl p-8 shadow-xl">
       <div class="w-16 h-16 bg-[#30C48D]/10 rounded-2xl flex items-center justify-center mb-6"><span class="text-3xl">ğŸ‘ï¸</span>
       </div>
       <h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-4" data-i18n="our_vision">Vizyonumuz</h3>
       <p class="text-gray-600 dark:text-gray-400 leading-relaxed" data-i18n="vision_desc">2025 yÄ±lÄ±na kadar TÃ¼rkiye'nin en bÃ¼yÃ¼k akÄ±llÄ± konaklama aÄŸÄ± olmak ve 50+ lokasyonda hizmet vermek. SÃ¼rdÃ¼rÃ¼lebilir ve Ã§evre dostu konaklama Ã§Ã¶zÃ¼mleri sunmak.</p>
      </div>
     </div>
     <div class="bg-gradient-to-r from-[#4F8EF7] to-[#30C48D] rounded-3xl p-8 md:p-12 text-white mb-12">
      <h3 class="font-heading text-2xl font-bold mb-6 text-center" data-i18n="why_smartstay">Neden SmartStay?</h3>
      <div class="grid sm:grid-cols-2 md:grid-cols-4 gap-6">
       <div class="text-center">
        <div class="text-4xl mb-3">
         ğŸ”
        </div>
        <h4 class="font-semibold mb-2" data-i18n="feature_secure">GÃ¼venli GiriÅŸ</h4>
        <p class="text-white/80 text-sm" data-i18n="feature_secure_desc">QR kod ve Bluetooth ile temassÄ±z giriÅŸ</p>
       </div>
       <div class="text-center">
        <div class="text-4xl mb-3">
         ğŸ“±
        </div>
        <h4 class="font-semibold mb-2" data-i18n="feature_app">Mobil Kontrol</h4>
        <p class="text-white/80 text-sm" data-i18n="feature_app_desc">TÃ¼m oda kontrolÃ¼ telefonunuzda</p>
       </div>
       <div class="text-center">
        <div class="text-4xl mb-3">
         âš¡
        </div>
        <h4 class="font-semibold mb-2" data-i18n="feature_instant">AnÄ±nda Rezervasyon</h4>
        <p class="text-white/80 text-sm" data-i18n="feature_instant_desc">Dakikalar iÃ§inde konaklama</p>
       </div>
       <div class="text-center">
        <div class="text-4xl mb-3">
         ğŸŒ
        </div>
        <h4 class="font-semibold mb-2" data-i18n="feature_locations_about">12 Lokasyon</h4>
        <p class="text-white/80 text-sm" data-i18n="feature_locations_about_desc">TÃ¼rkiye genelinde hizmet</p>
       </div>
      </div>
     </div>
     <div class="bg-white dark:bg-gray-800 rounded-3xl p-8 shadow-xl mb-12">
      <h3 class="font-heading text-xl font-bold text-gray-800 dark:text-white mb-6 text-center" data-i18n="contact_us">Ä°letiÅŸim</h3>
      <div class="grid sm:grid-cols-3 gap-6 text-center">
       <div>
        <div class="w-14 h-14 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center mx-auto mb-3"><span class="text-2xl">ğŸ“§</span>
        </div>
        <p class="font-medium text-gray-800 dark:text-white">E-posta</p>
        <p class="text-gray-500 dark:text-gray-400 text-sm">destek@smartstay.com.tr</p>
       </div>
       <div>
        <div class="w-14 h-14 bg-[#30C48D]/10 rounded-xl flex items-center justify-center mx-auto mb-3"><span class="text-2xl">ğŸ“</span>
        </div>
        <p class="font-medium text-gray-800 dark:text-white" data-i18n="phone">Telefon</p>
        <p class="text-gray-500 dark:text-gray-400 text-sm">0850 123 45 67</p>
       </div>
       <div>
        <div class="w-14 h-14 bg-[#4F8EF7]/10 rounded-xl flex items-center justify-center mx-auto mb-3"><span class="text-2xl">ğŸ“</span>
        </div>
        <p class="font-medium text-gray-800 dark:text-white" data-i18n="address">Adres</p>
        <p class="text-gray-500 dark:text-gray-400 text-sm">Ä°stanbul, TÃ¼rkiye</p>
       </div>
      </div>
     </div>
     <div class="text-center"><button onclick="showScreen('register')" class="px-8 py-4 bg-[#4F8EF7] text-white font-semibold rounded-2xl shadow-lg hover:bg-[#3D7CE5] transition-all">ğŸš€ <span data-i18n="get_started">Hemen BaÅŸla</span></button>
     </div>
    </div>
   </div><!-- Screen 10: Room Control -->
   <div id="screen-room-control" class="screen h-full w-full hidden overflow-auto bg-gray-900">
    <div class="p-6 md:p-8 pt-16 md:pt-6 max-w-2xl mx-auto"><button onclick="showScreen('dashboard')" class="flex items-center gap-2 text-gray-400 hover:text-white mb-6"><span>â†</span> <span data-i18n="back_dashboard">Dashboard'a DÃ¶n</span></button>
     <div class="text-center mb-8">
      <span class="text-5xl mb-4 block">ğŸ </span>
      <h1 class="font-heading text-2xl font-bold text-white mb-2" data-i18n="room_control_panel">Oda Kontrol Paneli</h1>
      <p id="control-room-info" class="text-gray-400">Oda #-</p>
     </div>
     <div class="space-y-4">
      <div class="bg-gray-800 rounded-2xl p-6">
       <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
         <div class="w-14 h-14 bg-yellow-500/20 rounded-xl flex items-center justify-center">
          <span class="text-3xl">ğŸ’¡</span>
         </div>
         <div>
          <h3 class="font-medium text-white text-lg" data-i18n="lights">IÅŸÄ±klar</h3>
          <p class="text-gray-400 text-sm" data-i18n="main_lighting">Ana aydÄ±nlatma</p>
         </div>
        </div>
        <div id="toggle-light" onclick="toggleSwitch('light')" class="toggle-switch active"></div>
       </div>
      </div>
      <div class="bg-gray-800 rounded-2xl p-6">
       <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-4">
         <div class="w-14 h-14 bg-blue-500/20 rounded-xl flex items-center justify-center">
          <span class="text-3xl">ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¸</span>
         </div>
         <div>
          <h3 class="font-medium text-white text-lg" data-i18n="ac">Klima</h3>
          <p class="text-gray-400 text-sm" data-i18n="temp_control">SÄ±caklÄ±k kontrolÃ¼</p>
         </div>
        </div>
        <div id="toggle-ac" onclick="toggleSwitch('ac')" class="toggle-switch active"></div>
       </div>
       <div class="mt-4">
        <div class="flex items-center justify-between mb-3">
         <span class="text-gray-400" data-i18n="temperature">SÄ±caklÄ±k</span><span id="temp-value" class="text-2xl font-bold text-white">22Â°C</span>
        </div><input type="range" id="temp-slider" min="16" max="30" value="22" oninput="updateTemp(this.value)" class="w-full">
       </div>
      </div>
      <div class="bg-gray-800 rounded-2xl p-6">
       <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
         <div class="w-14 h-14 bg-purple-500/20 rounded-xl flex items-center justify-center">
          <span class="text-3xl">ğŸ“º</span>
         </div>
         <div>
          <h3 class="font-medium text-white text-lg" data-i18n="tv">Televizyon</h3>
          <p class="text-gray-400 text-sm">Smart TV</p>
         </div>
        </div>
        <div id="toggle-tv" onclick="toggleSwitch('tv')" class="toggle-switch"></div>
       </div>
      </div>
      <div class="bg-gradient-to-r from-[#30C48D] to-[#28B07D] rounded-2xl p-6">
       <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
         <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
          <span class="text-3xl">ğŸšª</span>
         </div>
         <div>
          <h3 class="font-medium text-white text-lg" data-i18n="door_control">KapÄ± KontrolÃ¼</h3>
          <p class="text-white/70 text-sm" data-i18n="door_desc">Bluetooth / QR ile aÃ§Ä±n</p>
         </div>
        </div>
       </div><button id="door-btn" onclick="openDoor()" class="w-full mt-4 py-4 bg-white text-[#30C48D] font-bold rounded-xl"><span>ğŸ”“</span> <span data-i18n="open_door">KapÄ±yÄ± AÃ§</span></button>
      </div>
     </div>
     <p class="text-center text-gray-500 text-sm mt-8">ğŸ”’ <span data-i18n="secure_connection">GÃ¼venli baÄŸlantÄ± â€¢ Bluetooth LE destekli</span></p>
    </div>
   </div>
  </div>
  <script>
    // ==================== TRANSLATIONS ====================
    const translations = {
      tr: { app_title: 'AkÄ±llÄ± Ev Kiralama Sistemi', welcome_subtitle: 'AkÄ±llÄ± odalara anlÄ±k rezervasyon, kontrol ve giriÅŸ sistemi', smart_home: 'AkÄ±llÄ± Ev', login: 'GiriÅŸ Yap', read_text: 'Oku', close_text: 'Kapat', register: 'Ãœye Ol', get_started: 'Hemen BaÅŸla', feature_smart_access: 'AkÄ±llÄ± EriÅŸim', feature_smart_access_desc: 'QR kod ile kapÄ± aÃ§ma', feature_room_control: 'Oda KontrolÃ¼', feature_room_control_desc: 'IÅŸÄ±k, klima, TV kontrolÃ¼', feature_locations: '12 Lokasyon', feature_locations_desc: 'TÃ¼rkiye genelinde', login_required: 'Bu iÅŸlem iÃ§in giriÅŸ yapmanÄ±z gerekiyor', about_us: 'HakkÄ±mÄ±zda', about_subtitle: 'SmartStay ile akÄ±llÄ± konaklama deneyimi', our_mission: 'Misyonumuz', mission_desc: 'Seyahat edenlere ve yolculara, TÃ¼rkiye\'nin dÃ¶rt bir yanÄ±nda konforlu, gÃ¼venli ve teknolojik konaklama imkanÄ± sunmak. AkÄ±llÄ± ev teknolojileri ile konaklama deneyimini yeniden tanÄ±mlÄ±yoruz.', our_vision: 'Vizyonumuz', vision_desc: '2025 yÄ±lÄ±na kadar TÃ¼rkiye\'nin en bÃ¼yÃ¼k akÄ±llÄ± konaklama aÄŸÄ± olmak ve 50+ lokasyonda hizmet vermek. SÃ¼rdÃ¼rÃ¼lebilir ve Ã§evre dostu konaklama Ã§Ã¶zÃ¼mleri sunmak.', why_smartstay: 'Neden SmartStay?', feature_secure: 'GÃ¼venli GiriÅŸ', feature_secure_desc: 'QR kod ve Bluetooth ile temassÄ±z giriÅŸ', feature_app: 'Mobil Kontrol', feature_app_desc: 'TÃ¼m oda kontrolÃ¼ telefonunuzda', feature_instant: 'AnÄ±nda Rezervasyon', feature_instant_desc: 'Dakikalar iÃ§inde konaklama', feature_locations_about: '12 Lokasyon', feature_locations_about_desc: 'TÃ¼rkiye genelinde hizmet', contact_us: 'Ä°letiÅŸim', address: 'Adres', logout: 'Ã‡Ä±kÄ±ÅŸ Yap', access_account: 'HesabÄ±nÄ±za eriÅŸin', tc_id: 'T.C. Kimlik No', password: 'Åifre', no_account: 'HesabÄ±nÄ±z yok mu? Ãœye olun', back_home: 'â† Ana sayfaya dÃ¶n', personal_info: 'KiÅŸisel Bilgiler', account_info: 'Hesap Bilgileri', agreements: 'SÃ¶zleÅŸmeler', completed: 'TamamlandÄ±', first_name: 'Ad', last_name: 'Soyad', phone: 'Telefon', email: 'E-posta', gender: 'Cinsiyet', select: 'SeÃ§iniz', male: 'Erkek', female: 'KadÄ±n', prefer_not_say: 'Belirtmek Ä°stemiyorum', username: 'KullanÄ±cÄ± AdÄ±', password_confirm: 'Åifre Tekrar', password_requirements: 'Åifre gereksinimleri:', req_length: 'En az 8 karakter', req_upper: 'En az 1 bÃ¼yÃ¼k harf', req_number: 'En az 1 rakam', req_special: 'En az 1 Ã¶zel karakter', passwords_not_match: 'Åifreler eÅŸleÅŸmiyor', terms_of_use: 'KullanÄ±m ÅartlarÄ±', terms_desc: 'Hizmet kullanÄ±m koÅŸullarÄ±nÄ± okudum ve kabul ediyorum.', privacy_policy: 'KVKK & Gizlilik PolitikasÄ±', privacy_desc: 'KiÅŸisel verilerimin iÅŸlenmesine iliÅŸkin aydÄ±nlatma metnini okudum.', register_success: 'Ãœyelik BaÅŸarÄ±lÄ±!', register_success_desc: 'HesabÄ±nÄ±z baÅŸarÄ±yla oluÅŸturuldu.', back: 'â† Geri', next: 'Ä°leri â†’', complete: 'Tamamla', step: 'AdÄ±m', home: 'Ana Sayfa', new_reservation: 'Yeni Rezervasyon', account_settings: 'Hesap AyarlarÄ±', dashboard_overview: 'AkÄ±llÄ± ev kiralama sisteminize genel bakÄ±ÅŸ', no_active_reservation: 'Aktif Rezervasyonunuz Yok', no_reservation_desc: 'Hemen yeni bir rezervasyon oluÅŸturun.', total_stays: 'Toplam Konaklama', hours: 'Saat', hour_unit: 'saat', avg_rating: 'Puan OrtalamasÄ±', membership_level: 'Ãœyelik Seviyesi', starter: 'BaÅŸlangÄ±Ã§', silver: 'GÃ¼mÃ¼ÅŸ', gold: 'AltÄ±n', full_name: 'Ad Soyad', back_dashboard: "Dashboard'a DÃ¶n", select_location: 'Konaklama NoktasÄ± SeÃ§in', select_location_desc: 'Haritadan bir lokasyon seÃ§in veya aÅŸaÄŸÄ±daki listeden tercih yapÄ±n', click_pin: 'Haritadaki pinlere tÄ±klayarak lokasyon seÃ§in', location_list: 'Lokasyon Listesi', selected_location: 'SeÃ§ilen Lokasyon', continue: 'Devam Et', available: 'MÃ¼sait', occupied: 'Dolu', select_datetime: 'Tarih & Saat SeÃ§in', checkin_datetime: 'GiriÅŸ Tarihi & Saati', checkout_datetime: 'Ã‡Ä±kÄ±ÅŸ Tarihi & Saati', max_duration_warning: 'Maksimum SÃ¼re UyarÄ±sÄ±', max_duration_desc: 'Tek seferde maksimum 24 saat konaklama yapabilirsiniz.', show_available_rooms: 'MÃ¼sait OdalarÄ± GÃ¶ster', back_locations: 'Lokasyonlara DÃ¶n', select_room: 'Oda SeÃ§in', back_datetime: 'Tarih SeÃ§imine DÃ¶n', reservation_payment: 'Rezervasyon & Ã–deme', final_step: 'Son adÄ±m - Ã–deme bilgilerinizi girin', reservation_summary: 'Rezervasyon Ã–zeti', room: 'Oda', location: 'Lokasyon', checkin: 'GiriÅŸ', checkout: 'Ã‡Ä±kÄ±ÅŸ', guest_count: 'KiÅŸi SayÄ±sÄ±', person: 'KiÅŸi', extra_person: 'Ek kiÅŸi', total: 'Toplam', card_info: 'Kart Bilgileri', demo_warning: 'Demo amaÃ§lÄ± - GerÃ§ek Ã¶deme yapÄ±lmaz', card_name: 'Kart Ãœzerindeki Ä°sim', card_number: 'Kart NumarasÄ±', expiry_date: 'Son Kullanma', complete_payment: 'Ã–demeyi Tamamla', back_room: 'Oda SeÃ§imine DÃ¶n', entry_ticket: 'GiriÅŸ Biletiniz', show_qr: 'Bu QR kodu kapÄ±da gÃ¶sterin', ticket_no: 'Bilet No', go_to_control: 'Oda Kontrol Paneline Git', room_control_panel: 'Oda Kontrol Paneli', lights: 'IÅŸÄ±klar', main_lighting: 'Ana aydÄ±nlatma', ac: 'Klima', temp_control: 'SÄ±caklÄ±k kontrolÃ¼', temperature: 'SÄ±caklÄ±k', tv: 'Televizyon', door_control: 'KapÄ± KontrolÃ¼', door_desc: 'Bluetooth / QR ile aÃ§Ä±n', open_door: 'KapÄ±yÄ± AÃ§', secure_connection: 'GÃ¼venli baÄŸlantÄ± â€¢ Bluetooth LE destekli', login_success: 'GiriÅŸ baÅŸarÄ±lÄ±! HoÅŸ geldiniz', logout_success: 'Ã‡Ä±kÄ±ÅŸ yapÄ±ldÄ±', reservation_success: 'Rezervasyonunuz baÅŸarÄ±yla oluÅŸturuldu!', fill_all_fields: 'LÃ¼tfen tÃ¼m alanlarï¿½ï¿½ï¿½ï¿½ doldurun.', tc_invalid: 'T.C. Kimlik No 11 haneli olmalÄ±dÄ±r.', tc_exists: 'Bu T.C. Kimlik No ile kayÄ±tlÄ± hesap var.', password_requirements_not_met: 'Åifre gereksinimlerini karÅŸÄ±lamÄ±yor.', username_taken: 'Bu kullanÄ±cÄ± adÄ± zaten alÄ±nmÄ±ÅŸ.', accept_agreements: 'TÃ¼m sÃ¶zleÅŸmeleri kabul etmelisiniz.', login_failed: 'T.C. Kimlik No veya ÅŸifre hatalÄ±.', select_dates: 'LÃ¼tfen tarih seÃ§in.', past_date: 'GeÃ§miÅŸ tarih seÃ§ilemez.', checkout_before_checkin: 'Ã‡Ä±kÄ±ÅŸ tarihi giriÅŸten sonra olmalÄ±.', max_24_hours: 'Maksimum 24 saat konaklama yapÄ±labilir.', processing: 'Ä°ÅŸleniyor...', payment_completed: 'Ã–deme TamamlandÄ± âœ“', opening: 'AÃ§Ä±lÄ±yor...', door_opened: 'KapÄ± AÃ§Ä±ldÄ±!', reservation_history: 'Rezervasyon GeÃ§miÅŸi', history_desc: 'TÃ¼m rezervasyonlarÄ±nÄ±zÄ± gÃ¶rÃ¼ntÃ¼leyin ve yÃ¶netin', all: 'TÃ¼mÃ¼', active_reservations: 'Aktif', completed_reservations: 'Tamamlanan', cancelled_reservations: 'Ä°ptal Edilen', no_reservations: 'Rezervasyon BulunamadÄ±', no_reservations_desc: 'Bu kategoride henÃ¼z rezervasyonunuz yok.', cancel_reservation: 'Rezervasyonu Ä°ptal Et', view_ticket: 'Bileti GÃ¶rÃ¼ntÃ¼le', status_active: 'Aktif', status_completed: 'TamamlandÄ±', status_cancelled: 'Ä°ptal Edildi', cancel_confirm_title: 'Rezervasyonu Ä°ptal Et', cancel_confirm_msg: 'Bu rezervasyonu iptal etmek istediÄŸinizden emin misiniz?', yes_cancel: 'Evet, Ä°ptal Et', no_go_back: 'HayÄ±r, Geri DÃ¶n', reservation_cancelled: 'Rezervasyon iptal edildi', select_location_first: 'LÃ¼tfen Ã¶nce bir lokasyon seÃ§in', find_nearest: 'Size En YakÄ±n NoktayÄ± Bulun', find_nearest_desc: 'Konumunuza gÃ¶re en yakÄ±n konaklama noktasÄ±nÄ± Ã¶neririz', use_my_location: 'Konumumu Kullan', nearest_location: 'En YakÄ±n Konaklama NoktasÄ±:', select_this: 'Bunu SeÃ§', finding_location: 'Konum alÄ±nÄ±yor...', location_found: 'Konum bulundu!', location_error: 'Konum alÄ±namadÄ±', km_away: 'km uzaklÄ±kta', location_denied: 'Konum izni reddedildi' },
      en: { app_title: 'Smart Home Rental System', welcome_subtitle: 'Instant booking, control and access to smart rooms', smart_home: 'Smart Home', login: 'Login', read_text: 'Read', close_text: 'Close', register: 'Sign Up', get_started: 'Get Started', feature_smart_access: 'Smart Access', feature_smart_access_desc: 'QR code door access', feature_room_control: 'Room Control', feature_room_control_desc: 'Light, AC, TV control', feature_locations: '12 Locations', feature_locations_desc: 'Across Turkey', login_required: 'Please login to continue', about_us: 'About Us', about_subtitle: 'Smart accommodation experience with SmartStay', our_mission: 'Our Mission', mission_desc: 'To provide comfortable, safe and technological accommodation to travelers across Turkey. We are redefining the accommodation experience with smart home technologies.', our_vision: 'Our Vision', vision_desc: 'To become Turkey\'s largest smart accommodation network by 2025 and serve in 50+ locations. To provide sustainable and eco-friendly accommodation solutions.', why_smartstay: 'Why SmartStay?', feature_secure: 'Secure Entry', feature_secure_desc: 'Contactless entry with QR and Bluetooth', feature_app: 'Mobile Control', feature_app_desc: 'Full room control on your phone', feature_instant: 'Instant Booking', feature_instant_desc: 'Book in minutes', feature_locations_about: '12 Locations', feature_locations_about_desc: 'Service across Turkey', contact_us: 'Contact', address: 'Address', logout: 'Logout', access_account: 'Access your account', tc_id: 'ID Number', password: 'Password', no_account: "Don't have an account? Sign up", back_home: 'â† Back to home', personal_info: 'Personal Information', account_info: 'Account Information', agreements: 'Agreements', completed: 'Completed', first_name: 'First Name', last_name: 'Last Name', phone: 'Phone', email: 'Email', gender: 'Gender', select: 'Select', male: 'Male', female: 'Female', prefer_not_say: 'Prefer not to say', username: 'Username', password_confirm: 'Confirm Password', password_requirements: 'Password requirements:', req_length: 'At least 8 characters', req_upper: 'At least 1 uppercase', req_number: 'At least 1 number', req_special: 'At least 1 special character', passwords_not_match: 'Passwords do not match', terms_of_use: 'Terms of Use', terms_desc: 'I have read and accept the terms.', privacy_policy: 'Privacy Policy', privacy_desc: 'I have read the privacy policy.', register_success: 'Registration Successful!', register_success_desc: 'Your account has been created.', back: 'â† Back', next: 'Next â†’', complete: 'Complete', step: 'Step', home: 'Home', new_reservation: 'New Reservation', account_settings: 'Account Settings', dashboard_overview: 'Overview of your smart home rental', no_active_reservation: 'No Active Reservation', no_reservation_desc: 'Create a new reservation now.', total_stays: 'Total Stays', hours: 'Hours', hour_unit: 'hours', avg_rating: 'Average Rating', membership_level: 'Membership Level', starter: 'Starter', silver: 'Silver', gold: 'Gold', full_name: 'Full Name', back_dashboard: 'Back to Dashboard', select_location: 'Select Location', select_location_desc: 'Select a location from the map or list', click_pin: 'Click pins on map to select', location_list: 'Location List', selected_location: 'Selected Location', continue: 'Continue', available: 'Available', occupied: 'Occupied', select_datetime: 'Select Date & Time', checkin_datetime: 'Check-in Date & Time', checkout_datetime: 'Check-out Date & Time', max_duration_warning: 'Maximum Duration Warning', max_duration_desc: 'Maximum stay is 24 hours.', show_available_rooms: 'Show Available Rooms', back_locations: 'Back to Locations', select_room: 'Select Room', back_datetime: 'Back to Date Selection', reservation_payment: 'Reservation & Payment', final_step: 'Final step - Enter payment details', reservation_summary: 'Reservation Summary', room: 'Room', location: 'Location', checkin: 'Check-in', checkout: 'Check-out', guest_count: 'Guests', person: 'Person', extra_person: 'Extra person', total: 'Total', card_info: 'Card Information', demo_warning: 'Demo only - No real payment', card_name: 'Name on Card', card_number: 'Card Number', expiry_date: 'Expiry Date', complete_payment: 'Complete Payment', back_room: 'Back to Room Selection', entry_ticket: 'Your Entry Ticket', show_qr: 'Show this QR code at the door', ticket_no: 'Ticket No', go_to_control: 'Go to Room Control', room_control_panel: 'Room Control Panel', lights: 'Lights', main_lighting: 'Main lighting', ac: 'Air Conditioning', temp_control: 'Temperature control', temperature: 'Temperature', tv: 'Television', door_control: 'Door Control', door_desc: 'Open with Bluetooth / QR', open_door: 'Open Door', secure_connection: 'Secure connection â€¢ Bluetooth LE', login_success: 'Login successful! Welcome', logout_success: 'Logged out', reservation_success: 'Your reservation has been created!', fill_all_fields: 'Please fill in all fields.', tc_invalid: 'ID must be 11 digits.', tc_exists: 'Account with this ID exists.', password_requirements_not_met: 'Password does not meet requirements.', username_taken: 'Username already taken.', accept_agreements: 'You must accept all agreements.', login_failed: 'ID or password incorrect.', select_dates: 'Please select dates.', past_date: 'Cannot select past date.', checkout_before_checkin: 'Check-out must be after check-in.', max_24_hours: 'Maximum stay is 24 hours.', processing: 'Processing...', payment_completed: 'Payment Completed âœ“', opening: 'Opening...', door_opened: 'Door Opened!', reservation_history: 'Reservation History', history_desc: 'View and manage your reservations', all: 'All', active_reservations: 'Active', completed_reservations: 'Completed', cancelled_reservations: 'Cancelled', no_reservations: 'No Reservations', no_reservations_desc: 'No reservations in this category.', cancel_reservation: 'Cancel Reservation', view_ticket: 'View Ticket', status_active: 'Active', status_completed: 'Completed', status_cancelled: 'Cancelled', cancel_confirm_title: 'Cancel Reservation', cancel_confirm_msg: 'Are you sure you want to cancel?', yes_cancel: 'Yes, Cancel', no_go_back: 'No, Go Back', reservation_cancelled: 'Reservation cancelled', select_location_first: 'Please select a location first', find_nearest: 'Find Nearest Location', find_nearest_desc: 'We recommend the nearest accommodation based on your location', use_my_location: 'Use My Location', nearest_location: 'Nearest Accommodation:', select_this: 'Select This', finding_location: 'Getting location...', location_found: 'Location found!', location_error: 'Could not get location', km_away: 'km away', location_denied: 'Location permission denied' },
      de: { app_title: 'Smart Home Mietsystem', welcome_subtitle: 'Sofortige Buchung und Zugang zu Smart Rooms', smart_home: 'Smart Home', login: 'Anmelden', read_text: 'Lesen', close_text: 'SchlieÃŸen', register: 'Registrieren', about_us: 'Ãœber Uns', about_subtitle: 'Intelligentes Unterkunftserlebnis mit SmartStay', our_mission: 'Unsere Mission', mission_desc: 'Reisenden in ganz TÃ¼rkei komfortable, sichere und technologische UnterkÃ¼nfte zu bieten. Wir definieren das Unterkunftserlebnis mit Smart-Home-Technologien neu.', our_vision: 'Unsere Vision', vision_desc: 'Bis 2025 das grÃ¶ÃŸte Smart-Unterkunft-Netzwerk der TÃ¼rkei zu werden und an 50+ Standorten zu dienen. Nachhaltige und umweltfreundliche UnterkunftslÃ¶sungen anzubieten.', why_smartstay: 'Warum SmartStay?', feature_secure: 'Sicherer Zugang', feature_secure_desc: 'Kontaktloser Zugang mit QR und Bluetooth', feature_app: 'Mobile Steuerung', feature_app_desc: 'Volle Zimmersteuerung auf Ihrem Telefon', feature_instant: 'Sofortige Buchung', feature_instant_desc: 'Buchen Sie in Minuten', feature_locations_about: '12 Standorte', feature_locations_about_desc: 'Service in der ganzen TÃ¼rkei', contact_us: 'Kontakt', address: 'Adresse', logout: 'Abmelden', access_account: 'Auf Ihr Konto zugreifen', tc_id: 'Ausweisnummer', password: 'Passwort', no_account: 'Kein Konto? Registrieren', back_home: 'â† ZurÃ¼ck', personal_info: 'PersÃ¶nliche Daten', account_info: 'Kontoinformationen', agreements: 'Vereinbarungen', completed: 'Abgeschlossen', first_name: 'Vorname', last_name: 'Nachname', phone: 'Telefon', email: 'E-Mail', gender: 'Geschlecht', select: 'AuswÃ¤hlen', male: 'MÃ¤nnlich', female: 'Weiblich', prefer_not_say: 'Keine Angabe', username: 'Benutzername', password_confirm: 'Passwort bestÃ¤tigen', password_requirements: 'Passwortanforderungen:', req_length: 'Mindestens 8 Zeichen', req_upper: 'Mindestens 1 GroÃŸbuchstabe', req_number: 'Mindestens 1 Zahl', req_special: 'Mindestens 1 Sonderzeichen', passwords_not_match: 'PasswÃ¶rter stimmen nicht Ã¼berein', terms_of_use: 'Nutzungsbedingungen', terms_desc: 'Ich akzeptiere die Nutzungsbedingungen.', privacy_policy: 'Datenschutzrichtlinie', privacy_desc: 'Ich habe die Datenschutzrichtlinie gelesen.', register_success: 'Registrierung erfolgreich!', register_success_desc: 'Ihr Konto wurde erstellt.', back: 'â† ZurÃ¼ck', next: 'Weiter â†’', complete: 'AbschlieÃŸen', step: 'Schritt', home: 'Startseite', new_reservation: 'Neue Reservierung', account_settings: 'Kontoeinstellungen', dashboard_overview: 'Ãœbersicht Ihres Smart Home Mietsystems', no_active_reservation: 'Keine aktive Reservierung', no_reservation_desc: 'Erstellen Sie jetzt eine Reservierung.', total_stays: 'Gesamtaufenthalte', hours: 'Stunden', hour_unit: 'Stunden', avg_rating: 'Durchschnittsbewertung', membership_level: 'Mitgliedschaftsstufe', starter: 'Einsteiger', silver: 'Silber', gold: 'Gold', full_name: 'VollstÃ¤ndiger Name', back_dashboard: 'ZurÃ¼ck zum Dashboard', select_location: 'Standort auswÃ¤hlen', select_location_desc: 'WÃ¤hlen Sie einen Standort aus der Karte oder Liste', click_pin: 'Klicken Sie auf die Pins', location_list: 'Standortliste', selected_location: 'AusgewÃ¤hlter Standort', continue: 'Weiter', available: 'VerfÃ¼gbar', occupied: 'Belegt', select_datetime: 'Datum & Uhrzeit', checkin_datetime: 'Check-in Datum & Uhrzeit', checkout_datetime: 'Check-out Datum & Uhrzeit', max_duration_warning: 'Maximale Dauer Warnung', max_duration_desc: 'Maximaler Aufenthalt ist 24 Stunden.', show_available_rooms: 'VerfÃ¼gbare Zimmer anzeigen', back_locations: 'ZurÃ¼ck zu Standorten', select_room: 'Zimmer auswÃ¤hlen', back_datetime: 'ZurÃ¼ck zur Datumsauswahl', reservation_payment: 'Reservierung & Zahlung', final_step: 'Letzter Schritt - Zahlungsdaten', reservation_summary: 'ReservierungsÃ¼bersicht', room: 'Zimmer', location: 'Standort', checkin: 'Check-in', checkout: 'Check-out', guest_count: 'GÃ¤ste', person: 'Person', extra_person: 'ZusÃ¤tzliche Person', total: 'Gesamt', card_info: 'Karteninformationen', demo_warning: 'Nur Demo - Keine echte Zahlung', card_name: 'Name auf der Karte', card_number: 'Kartennummer', expiry_date: 'Ablaufdatum', complete_payment: 'Zahlung abschlieÃŸen', back_room: 'ZurÃ¼ck zur Zimmerauswahl', entry_ticket: 'Ihr Eintrittticket', show_qr: 'Zeigen Sie diesen QR-Code', ticket_no: 'Ticket-Nr.', go_to_control: 'Zur Zimmersteuerung', room_control_panel: 'Zimmersteuerung', lights: 'Beleuchtung', main_lighting: 'Hauptbeleuchtung', ac: 'Klimaanlage', temp_control: 'Temperaturregelung', temperature: 'Temperatur', tv: 'Fernseher', door_control: 'TÃ¼rsteuerung', door_desc: 'Mit Bluetooth / QR Ã¶ffnen', open_door: 'TÃ¼r Ã¶ffnen', secure_connection: 'Sichere Verbindung â€¢ Bluetooth LE', login_success: 'Anmeldung erfolgreich!', logout_success: 'Abgemeldet', reservation_success: 'Ihre Reservierung wurde erstellt!', fill_all_fields: 'Bitte alle Felder ausfÃ¼llen.', tc_invalid: 'Ausweisnummer muss 11-stellig sein.', tc_exists: 'Ein Konto mit dieser ID existiert.', password_requirements_not_met: 'Passwort erfÃ¼llt nicht die Anforderungen.', username_taken: 'Benutzername bereits vergeben.', accept_agreements: 'Sie mÃ¼ssen alle Vereinbarungen akzeptieren.', login_failed: 'ID oder Passwort falsch.', select_dates: 'Bitte Datum wÃ¤hlen.', past_date: 'Vergangenes Datum nicht wÃ¤hlbar.', checkout_before_checkin: 'Check-out muss nach Check-in sein.', max_24_hours: 'Maximaler Aufenthalt ist 24 Stunden.', processing: 'Wird verarbeitet...', payment_completed: 'Zahlung abgeschlossen âœ“', opening: 'Wird geÃ¶ffnet...', door_opened: 'TÃ¼r geÃ¶ffnet!', reservation_history: 'Reservierungsverlauf', history_desc: 'Alle Reservierungen anzeigen', all: 'Alle', active_reservations: 'Aktiv', completed_reservations: 'Abgeschlossen', cancelled_reservations: 'Storniert', no_reservations: 'Keine Reservierungen', no_reservations_desc: 'Keine Reservierungen in dieser Kategorie.', cancel_reservation: 'Reservierung stornieren', view_ticket: 'Ticket anzeigen', status_active: 'Aktiv', status_completed: 'Abgeschlossen', status_cancelled: 'Storniert', cancel_confirm_title: 'Reservierung stornieren', cancel_confirm_msg: 'MÃ¶chten Sie wirklich stornieren?', yes_cancel: 'Ja, stornieren', no_go_back: 'Nein, zurÃ¼ck', reservation_cancelled: 'Reservierung storniert', select_location_first: 'Bitte zuerst einen Standort wÃ¤hlen', find_nearest: 'NÃ¤chsten Standort finden', find_nearest_desc: 'Wir empfehlen die nÃ¤chstgelegene Unterkunft basierend auf Ihrem Standort', use_my_location: 'Meinen Standort verwenden', nearest_location: 'NÃ¤chste Unterkunft:', select_this: 'Diesen auswï¿½ï¿½hlen', finding_location: 'Standort wird ermittelt...', location_found: 'Standort gefunden!', location_error: 'Standort konnte nicht ermittelt werden', km_away: 'km entfernt', location_denied: 'Standortberechtigung verweigert' }
    };

    let currentLang = localStorage.getItem('smartHome_lang') || 'tr';
    let isDarkMode = localStorage.getItem('smartHome_darkMode') === 'true';

    const locationData = {
      kirklareli: { id: 'kirklareli', name: 'E80 Avrupa Otoyolu - KÄ±rklareli', rooms: 12, available: 9, lat: 41.5767, lng: 26.9846 },
      bolu: { id: 'bolu', name: 'E89 Otoyolu - Bolu-Ankara', rooms: 12, available: 8, lat: 40.6378, lng: 32.2326 },
      mersin: { id: 'mersin', name: 'E90 Otoyolu - Mersin-Adana', rooms: 12, available: 10, lat: 37.0187, lng: 35.0094 },
      izmir: { id: 'izmir', name: 'E96 Otoyolu - Ä°zmir-UÅŸak', rooms: 12, available: 8, lat: 38.5307, lng: 28.4121 },
      erzurum: { id: 'erzurum', name: 'E97 Otoyolu - Erzurum', rooms: 12, available: 9, lat: 39.9599, lng: 40.5748 },
      sivas: { id: 'sivas', name: 'E88 Otoyolu - Sivas', rooms: 12, available: 7, lat: 39.8122, lng: 36.2433 },
      sanliurfa: { id: 'sanliurfa', name: 'E90 Otoyolu - Adana-ÅanlÄ±urfa', rooms: 12, available: 10, lat: 37.0798, lng: 38.0384 },
      balikesir: { id: 'balikesir', name: 'E881 Otoyolu - Ä°stanbul-Ä°zmir', rooms: 12, available: 9, lat: 39.4494, lng: 27.6342 },
      denizli: { id: 'denizli', name: 'E87 Otoyolu - Antalya-Denizli', rooms: 12, available: 8, lat: 37.2161, lng: 29.6119 },
      karadeniz: { id: 'karadeniz', name: 'E70 Karadeniz Sahil Yolu', rooms: 12, available: 11, lat: 41.5017, lng: 41.5338 },
      igdir: { id: 'igdir', name: 'E99 Otoyolu - IÄŸdÄ±r SÄ±nÄ±r', rooms: 12, available: 10, lat: 39.7694, lng: 44.6554 },
      sivasyeni: { id: 'sivasyeni', name: 'E88 Otoyolu - Sivas Merkez', rooms: 12, available: 9, lat: 39.8122, lng: 36.2433 }
    };

    let leafletMap = null;
    let mapMarkers = {};

    let currentBooking = { locationId: null, locationName: null, checkin: null, checkout: null, room: null, guests: 2, price: 0, hours: 0 };
    let currentStep = 1;
    let selectedLocationId = null;
    let currentFilter = 'all';
    let cancelResId = null;

    // Dark Mode
    function toggleDarkMode() { isDarkMode = !isDarkMode; localStorage.setItem('smartHome_darkMode', isDarkMode); applyDarkMode(); }
    function applyDarkMode() { document.documentElement.classList.toggle('dark', isDarkMode); const icon = document.getElementById('theme-icon'); if (icon) icon.textContent = isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™'; }

    // Translations
    function t(key) { return translations[currentLang][key] || translations['tr'][key] || key; }
    function setLanguage(lang) { currentLang = lang; localStorage.setItem('smartHome_lang', lang); updateAllTranslations(); document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.toggle('active', btn.dataset.lang === lang)); }
    function updateAllTranslations() { document.querySelectorAll('[data-i18n]').forEach(el => el.textContent = t(el.dataset.i18n)); document.querySelectorAll('[data-i18n-opt]').forEach(opt => opt.textContent = t(opt.dataset.i18nOpt)); document.title = t('app_title'); const user = getCurrentUser(); if (user) { const wt = document.getElementById('welcome-title'); if (wt) wt.textContent = `${user.name}, ${t('home')}! ğŸ‘‹`; } }

    // Storage
    function getUsers() { return JSON.parse(localStorage.getItem('smartHome_users') || '[]'); }
    function saveUsers(users) { localStorage.setItem('smartHome_users', JSON.stringify(users)); }
    function getCurrentUser() { return JSON.parse(localStorage.getItem('smartHome_currentUser') || 'null'); }
    function setCurrentUser(user) { localStorage.setItem('smartHome_currentUser', JSON.stringify(user)); }
    function clearCurrentUser() { localStorage.removeItem('smartHome_currentUser'); }
    function getUserReservations(tc) { return JSON.parse(localStorage.getItem('smartHome_reservations') || '[]').filter(r => r.userTc === tc); }
    function saveReservation(res) { const all = JSON.parse(localStorage.getItem('smartHome_reservations') || '[]'); all.push(res); localStorage.setItem('smartHome_reservations', JSON.stringify(all)); }
    function updateReservation(id, updates) { let all = JSON.parse(localStorage.getItem('smartHome_reservations') || '[]'); all = all.map(r => r.id === id ? {...r, ...updates} : r); localStorage.setItem('smartHome_reservations', JSON.stringify(all)); }
    function saveAppState() { localStorage.setItem('smartHome_appState', JSON.stringify({ currentScreen: getCurrentScreen(), selectedLocationId, currentBooking })); }
    function restoreAppState() { const s = localStorage.getItem('smartHome_appState'); if (s) { const state = JSON.parse(s); if (state.selectedLocationId) { selectedLocationId = state.selectedLocationId; updateLocationSelection(selectedLocationId); } if (state.currentBooking) currentBooking = state.currentBooking; return state.currentScreen; } return null; }
    function getCurrentScreen() { for (const s of document.querySelectorAll('.screen')) { if (!s.classList.contains('hidden')) return s.id.replace('screen-', ''); } return 'welcome'; }

    // Toast
    function showToast(msg, type = 'success') { const c = document.getElementById('toast-container'); const t = document.createElement('div'); t.className = `toast ${type === 'success' ? 'bg-[#30C48D]' : type === 'error' ? 'bg-[#FF4B5C]' : 'bg-[#4F8EF7]'} text-white px-6 py-3 rounded-xl shadow-lg font-medium`; t.textContent = msg; c.appendChild(t); setTimeout(() => { t.style.opacity = '0'; t.style.transition = 'opacity 0.3s'; setTimeout(() => t.remove(), 300); }, 3000); }

    // Navigation
    function showScreen(id) { document.querySelectorAll('.screen').forEach(s => { s.classList.add('hidden'); s.classList.remove('flex'); }); const target = document.getElementById('screen-' + id); if (target) { target.classList.remove('hidden'); if (['welcome', 'login', 'register'].includes(id)) target.classList.add('flex'); } if (id === 'dashboard') updateDashboard(); if (id === 'locations') { setTimeout(() => { initLeafletMap(); if (selectedLocationId) updateLocationSelection(selectedLocationId); }, 100); } saveAppState(); }

    // Pending action after login
    let pendingAction = null;
    
    // Require auth - redirect to register if not logged in
    function requireAuth(action) {
      const user = getCurrentUser();
      if (user) {
        // User is logged in, proceed with action
        if (action === 'locations') showScreen('locations');
        else if (action === 'history') { showScreen('dashboard'); showDashboardSection('history'); }
        else if (action === 'settings') { showScreen('dashboard'); showDashboardSection('settings'); }
      } else {
        // User not logged in, save action and show register
        pendingAction = action;
        showToast(t('login_required'), 'info');
        showScreen('register');
      }
    }
    
    // Auth
    function handleLogin(e) { e.preventDefault(); const tc = document.getElementById('login-tc').value.trim(); const pw = document.getElementById('login-password').value; const err = document.getElementById('login-error'); if (tc.length !== 11) { err.textContent = t('tc_invalid'); err.classList.remove('hidden'); return; } const user = getUsers().find(u => u.tc === tc && u.password === pw); if (!user) { err.textContent = t('login_failed'); err.classList.remove('hidden'); return; } err.classList.add('hidden'); setCurrentUser(user); showToast(t('login_success') + ', ' + user.name); 
      // Check for pending action
      if (pendingAction) {
        const action = pendingAction;
        pendingAction = null;
        if (action === 'locations') { showScreen('locations'); return; }
        else if (action === 'history') { showScreen('dashboard'); showDashboardSection('history'); return; }
        else if (action === 'settings') { showScreen('dashboard'); showDashboardSection('settings'); return; }
      }
      const saved = restoreAppState(); if (saved && !['welcome', 'login', 'register'].includes(saved)) showScreen(saved); else showScreen('dashboard'); }
    function handleLogout() { clearCurrentUser(); localStorage.removeItem('smartHome_appState'); pendingAction = null; showToast(t('logout_success'), 'info'); showScreen('welcome'); }
    
    function afterRegister() {
      // If there was a pending action, go to login with that action remembered
      showScreen('login');
    }

    // Register
    function validateStep(step) { const err = document.getElementById('register-error'); err.classList.add('hidden'); if (step === 1) { const name = document.getElementById('reg-name').value.trim(); const surname = document.getElementById('reg-surname').value.trim(); const phone = document.getElementById('reg-phone').value.trim(); const email = document.getElementById('reg-email').value.trim(); const tc = document.getElementById('reg-tc').value.trim(); const gender = document.getElementById('reg-gender').value; if (!name || !surname || !phone || !email || !tc || !gender) { err.textContent = t('fill_all_fields'); err.classList.remove('hidden'); return false; } if (tc.length !== 11 || !/^\d+$/.test(tc)) { err.textContent = t('tc_invalid'); err.classList.remove('hidden'); return false; } if (getUsers().some(u => u.tc === tc)) { err.textContent = t('tc_exists'); err.classList.remove('hidden'); return false; } document.getElementById('reg-username').value = (name + '.' + surname).toLowerCase().replace(/[^a-z.]/g, ''); } if (step === 2) { const un = document.getElementById('reg-username').value.trim(); const pw = document.getElementById('reg-password').value; const pwc = document.getElementById('reg-password-confirm').value; if (!un || !pw || !pwc) { err.textContent = t('fill_all_fields'); err.classList.remove('hidden'); return false; } if (!(pw.length >= 8 && /[A-Z]/.test(pw) && /\d/.test(pw) && /[!@#$%^&*(),.?":{}|<>]/.test(pw))) { err.textContent = t('password_requirements_not_met'); err.classList.remove('hidden'); return false; } if (pw !== pwc) { err.textContent = t('passwords_not_match'); err.classList.remove('hidden'); return false; } if (getUsers().some(u => u.username === un)) { err.textContent = t('username_taken'); err.classList.remove('hidden'); return false; } } if (step === 3) { if (!document.getElementById('agree-terms').checked || !document.getElementById('agree-kvkk').checked) { document.getElementById('agreement-error').textContent = t('accept_agreements'); document.getElementById('agreement-error').classList.remove('hidden'); return false; } document.getElementById('agreement-error').classList.add('hidden'); const users = getUsers(); users.push({ name: document.getElementById('reg-name').value.trim(), surname: document.getElementById('reg-surname').value.trim(), phone: document.getElementById('reg-phone').value.trim(), email: document.getElementById('reg-email').value.trim(), tc: document.getElementById('reg-tc').value.trim(), gender: document.getElementById('reg-gender').value, username: document.getElementById('reg-username').value.trim(), password: document.getElementById('reg-password').value, createdAt: new Date().toISOString() }); saveUsers(users); } return true; }
    function nextStep() { if (currentStep < 4) { if (!validateStep(currentStep)) return; document.getElementById('register-step-' + currentStep).classList.add('hidden'); currentStep++; document.getElementById('register-step-' + currentStep).classList.remove('hidden'); updateProgressBar(); } }
    function prevStep() { if (currentStep > 1) { document.getElementById('register-step-' + currentStep).classList.add('hidden'); currentStep--; document.getElementById('register-step-' + currentStep).classList.remove('hidden'); updateProgressBar(); } }
    function updateProgressBar() { document.getElementById('progress-bar').style.width = (currentStep / 4) * 100 + '%'; document.getElementById('step-label').textContent = `${t('step')} ${currentStep}/4`; const titles = [t('personal_info'), t('account_info'), t('agreements'), t('completed')]; document.getElementById('step-title').textContent = titles[currentStep - 1]; document.getElementById('btn-prev').classList.toggle('hidden', currentStep === 1); document.getElementById('register-nav').classList.toggle('hidden', currentStep === 4); document.getElementById('btn-next').textContent = currentStep === 3 ? t('complete') : t('next'); }

    // Dashboard
    function updateDashboard() { const user = getCurrentUser(); if (!user) { showScreen('welcome'); return; } const i = (user.name[0] + user.surname[0]).toUpperCase(); document.getElementById('user-avatar').textContent = i; document.getElementById('mobile-avatar').textContent = i; document.getElementById('user-fullname').textContent = user.name + ' ' + user.surname; document.getElementById('user-username').textContent = '@' + user.username; document.getElementById('welcome-title').textContent = `${user.name}, ${t('home')}! ğŸ‘‹`; document.getElementById('settings-name').value = user.name + ' ' + user.surname; document.getElementById('settings-email').value = user.email; document.getElementById('settings-phone').value = user.phone; const res = getUserReservations(user.tc); document.getElementById('stat-total').textContent = res.length; document.getElementById('stat-hours').textContent = res.reduce((s, r) => s + (r.hours || 0), 0); const lvl = document.getElementById('stat-level'); if (res.length >= 10) lvl.textContent = t('gold'); else if (res.length >= 5) lvl.textContent = t('silver'); else lvl.textContent = t('starter'); }
    function showDashboardSection(id) { document.querySelectorAll('.dashboard-section').forEach(s => s.classList.add('hidden')); const target = document.getElementById('dashboard-' + id); if (target) target.classList.remove('hidden'); if (id === 'history') loadReservations(); if (window.innerWidth < 768) toggleSidebar(); }
    function setActiveMenu(el) { document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active')); el.classList.add('active'); }
    function toggleSidebar() { document.getElementById('sidebar').classList.toggle('-translate-x-full'); document.getElementById('sidebar-overlay').classList.toggle('hidden'); }

    // Leaflet Map Initialization
    function initLeafletMap() {
      if (leafletMap) return;
      const mapContainer = document.getElementById('leaflet-map');
      if (!mapContainer) return;
      
      leafletMap = L.map('leaflet-map', { zoomControl: true, scrollWheelZoom: true, doubleClickZoom: true, touchZoom: true }).setView([39.0, 35.0], 6);
      
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: 'Â© OpenStreetMap', maxZoom: 18, minZoom: 5 }).addTo(leafletMap);
      
      leafletMap.setMaxBounds([[34.0, 24.0], [43.0, 46.0]]);
      
      Object.keys(locationData).forEach(id => {
        const loc = locationData[id];
        const markerIcon = L.divIcon({ className: '', html: `<div class="custom-marker" id="marker-${id}"><span>ğŸ›£ï¸</span></div>`, iconSize: [44, 44], iconAnchor: [22, 44], popupAnchor: [0, -44] });
        
        const marker = L.marker([loc.lat, loc.lng], { icon: markerIcon }).addTo(leafletMap);
        
        const popupContent = `<div class="popup-content"><h4>${loc.name.split(' - ')[0]}</h4><p>${loc.name.split(' - ')[1] || ''}</p><button class="popup-btn" onclick="selectLocationFromMap('${id}')">${t('continue')}</button></div>`;
        marker.bindPopup(popupContent, { closeButton: false, offset: [0, -10] });
        
        marker.on('click', function() { selectLocationFromMap(id); });
        mapMarkers[id] = marker;
      });
      
      setTimeout(() => { leafletMap.invalidateSize(); }, 100);
    }

    // Location Selection
    function selectLocationFromMap(id) { selectedLocationId = id; updateLocationSelection(id); saveAppState(); }
    function updateLocationSelection(id) { 
      document.querySelectorAll('.custom-marker').forEach(m => m.classList.remove('selected')); 
      document.querySelectorAll('.location-card').forEach(c => c.classList.remove('selected')); 
      const markerEl = document.getElementById('marker-' + id); 
      const card = document.getElementById('card-' + id); 
      if (markerEl) markerEl.classList.add('selected'); 
      if (card) card.classList.add('selected'); 
      const info = document.getElementById('selected-location-info'); 
      const name = document.getElementById('selected-location-name'); 
      const loc = locationData[id]; 
      if (loc && info && name) { 
        name.textContent = loc.name; 
        info.classList.remove('hidden'); 
        if (leafletMap && mapMarkers[id]) { 
          leafletMap.setView([loc.lat, loc.lng], 8, { animate: true, duration: 0.5 }); 
        }
        setTimeout(() => info.scrollIntoView({ behavior: 'smooth', block: 'center' }), 100); 
      } 
    }
    function continueToDatetime() { if (!selectedLocationId) { showToast(t('select_location_first'), 'error'); return; } const loc = locationData[selectedLocationId]; currentBooking.locationId = selectedLocationId; currentBooking.locationName = loc.name; document.getElementById('datetime-location').textContent = loc.name; showScreen('datetime'); }

    // Booking
    function formatDate(d) { return new Date(d).toLocaleDateString(currentLang === 'tr' ? 'tr-TR' : currentLang === 'de' ? 'de-DE' : 'en-US', { day: '2-digit', month: 'short', year: 'numeric' }); }
    function formatDateTime(d) { return new Date(d).toLocaleDateString(currentLang === 'tr' ? 'tr-TR' : currentLang === 'de' ? 'de-DE' : 'en-US', { day: '2-digit', month: 'short', hour: '2-digit', minute: '2-digit' }); }
    function validateDateTime() { const ci = document.getElementById('checkin').value; const co = document.getElementById('checkout').value; const err = document.getElementById('datetime-error'); if (!ci || !co) { err.textContent = t('select_dates'); err.classList.remove('hidden'); return; } const ciD = new Date(ci), coD = new Date(co), now = new Date(); if (ciD < now) { err.textContent = t('past_date'); err.classList.remove('hidden'); return; } if (coD <= ciD) { err.textContent = t('checkout_before_checkin'); err.classList.remove('hidden'); return; } const h = (coD - ciD) / (1000 * 60 * 60); if (h > 24) { err.textContent = t('max_24_hours'); err.classList.remove('hidden'); return; } err.classList.add('hidden'); currentBooking.checkin = ci; currentBooking.checkout = co; currentBooking.hours = Math.ceil(h); document.getElementById('rooms-info').textContent = `${currentBooking.locationName} â€¢ ${formatDate(ci)}`; generateRooms(); showScreen('rooms'); }
    function generateRooms() { const grid = document.getElementById('rooms-grid'); const loc = locationData[selectedLocationId]; const total = loc ? loc.rooms : 12; const av = loc ? loc.available : 8; const occ = []; while (occ.length < (total - av)) { const r = Math.floor(Math.random() * total) + 1; if (!occ.includes(r)) occ.push(r); } grid.innerHTML = ''; for (let i = 1; i <= total; i++) { const isO = occ.includes(i); grid.innerHTML += isO ? `<div class="room-card disabled bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-lg text-center border-2 border-[#FF4B5C]/20"><div class="w-14 h-14 bg-[#FF4B5C]/10 rounded-xl flex items-center justify-center mx-auto mb-3"><span class="text-2xl">ğŸ </span></div><p class="font-bold text-gray-400">${t('room')} #${i}</p><span class="text-xs px-2 py-1 bg-[#FF4B5C]/10 text-[#FF4B5C] rounded-full">${t('occupied')}</span></div>` : `<button onclick="selectRoom(${i})" class="room-card bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-lg text-center border-2 border-transparent hover:border-[#30C48D]"><div class="w-14 h-14 bg-[#30C48D]/10 rounded-xl flex items-center justify-center mx-auto mb-3"><span class="text-2xl">ğŸ </span></div><p class="font-bold text-gray-800 dark:text-white">${t('room')} #${i}</p><span class="text-xs px-2 py-1 bg-[#30C48D]/10 text-[#30C48D] rounded-full">${t('available')}</span></button>`; } }
    function selectRoom(n) { currentBooking.room = n; document.getElementById('summary-room').textContent = '#' + n; document.getElementById('summary-location').textContent = currentBooking.locationName; document.getElementById('summary-checkin').textContent = formatDateTime(currentBooking.checkin); document.getElementById('summary-checkout').textContent = formatDateTime(currentBooking.checkout); updatePrice(); showScreen('payment'); }
    function updatePrice() { const g = parseInt(document.getElementById('guests').value); currentBooking.guests = g; const h = currentBooking.hours || 1; const base = h * 50; const extra = Math.max(0, g - 1) * 25; const total = base + extra; currentBooking.price = total; document.getElementById('price-hours').textContent = h; document.getElementById('price-base').textContent = 'â‚º' + base; document.getElementById('price-extra-row').classList.toggle('hidden', g <= 1); document.getElementById('price-extra').textContent = 'â‚º' + extra; document.getElementById('price-total').textContent = 'â‚º' + total; document.getElementById('pay-btn-text').innerHTML = 'â‚º' + total + ' ' + t('complete_payment'); }
    function handlePayment(e) { e.preventDefault(); const user = getCurrentUser(); if (!user) { showScreen('login'); return; } const btn = document.getElementById('pay-btn'); btn.disabled = true; btn.innerHTML = '<span class="animate-spin inline-block">â³</span> ' + t('processing'); setTimeout(() => { const id = 'TKT-' + Date.now(); const res = { id, userTc: user.tc, locationId: currentBooking.locationId, locationName: currentBooking.locationName, room: currentBooking.room, checkin: currentBooking.checkin, checkout: currentBooking.checkout, guests: currentBooking.guests, hours: currentBooking.hours, price: currentBooking.price, status: 'active', createdAt: new Date().toISOString() }; saveReservation(res); document.getElementById('ticket-number').textContent = '#' + id; document.getElementById('ticket-room').textContent = '#' + res.room; document.getElementById('ticket-location').textContent = res.locationName; document.getElementById('ticket-checkin').textContent = formatDateTime(res.checkin); document.getElementById('ticket-checkout').textContent = formatDateTime(res.checkout); document.getElementById('ticket-guests').textContent = res.guests + ' ' + t('person'); document.getElementById('control-room-info').textContent = t('room') + ' #' + res.room + ' â€¢ ' + res.locationName; btn.disabled = false; btn.innerHTML = t('payment_completed'); showToast(t('reservation_success')); selectedLocationId = null; currentBooking = { locationId: null, locationName: null, checkin: null, checkout: null, room: null, guests: 2, price: 0, hours: 0 }; localStorage.removeItem('smartHome_appState'); showScreen('ticket'); }, 2000); }

    // Reservations
    function loadReservations() { const user = getCurrentUser(); if (!user) return; let res = getUserReservations(user.tc); const now = new Date(); res = res.map(r => { if (r.status !== 'cancelled') { r.status = new Date(r.checkout) < now ? 'completed' : 'active'; } return r; }); if (currentFilter !== 'all') res = res.filter(r => r.status === currentFilter); res.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)); renderReservations(res); }
    function renderReservations(res) { const list = document.getElementById('reservations-list'); const noRes = document.getElementById('no-reservations'); if (res.length === 0) { list.innerHTML = ''; noRes.classList.remove('hidden'); return; } noRes.classList.add('hidden'); list.innerHTML = res.map(r => { const colors = { active: 'bg-[#30C48D]/10 text-[#30C48D]', completed: 'bg-[#4F8EF7]/10 text-[#4F8EF7]', cancelled: 'bg-[#FF4B5C]/10 text-[#FF4B5C]' }; const texts = { active: t('status_active'), completed: t('status_completed'), cancelled: t('status_cancelled') }; const isActive = r.status === 'active'; const canCancel = isActive && new Date(r.checkin) > new Date(); return `<div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-5 border-l-4 ${r.status === 'active' ? 'border-[#30C48D]' : r.status === 'completed' ? 'border-[#4F8EF7]' : 'border-[#FF4B5C]'}"><div class="flex flex-col md:flex-row md:items-center justify-between gap-4"><div class="flex items-start gap-4"><div class="w-14 h-14 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center flex-shrink-0"><span class="text-2xl">${r.status === 'cancelled' ? 'âŒ' : 'ğŸ '}</span></div><div><div class="flex items-center gap-3 mb-1"><h3 class="font-heading font-bold text-gray-800 dark:text-white">${r.locationName}</h3><span class="px-2 py-1 ${colors[r.status]} rounded-full text-xs font-medium">${texts[r.status]}</span></div><p class="text-gray-600 dark:text-gray-400 text-sm">${t('room')} #${r.room} â€¢ ${r.guests} ${t('person')}</p><p class="text-gray-500 text-sm mt-1">ğŸ“… ${formatDateTime(r.checkin)} â†’ ${formatDateTime(r.checkout)}</p><p class="text-gray-400 text-xs mt-1">${t('ticket_no')}: #${r.id}</p></div></div><div class="flex items-center gap-2 ml-auto"><span class="font-bold text-lg text-gray-800 dark:text-white">ï¿½ï¿½${r.price}</span>${isActive ? `<button onclick="viewReservationTicket('${r.id}')" class="px-4 py-2 bg-[#4F8EF7] text-white rounded-xl text-sm font-medium hover:bg-[#3D7CE5]">ğŸ« ${t('view_ticket')}</button>` : ''}${canCancel ? `<button onclick="showCancelConfirm('${r.id}')" class="px-4 py-2 bg-[#FF4B5C]/10 text-[#FF4B5C] rounded-xl text-sm font-medium hover:bg-[#FF4B5C]/20">âŒ ${t('cancel_reservation')}</button>` : ''}</div></div></div>`; }).join(''); }
    function filterReservations(f) { currentFilter = f; document.querySelectorAll('.filter-btn').forEach(btn => { if (btn.dataset.filter === f) { btn.classList.remove('bg-white', 'text-gray-600', 'dark:bg-gray-700', 'dark:text-gray-300'); btn.classList.add('bg-[#4F8EF7]', 'text-white'); } else { btn.classList.remove('bg-[#4F8EF7]', 'text-white'); btn.classList.add('bg-white', 'text-gray-600', 'dark:bg-gray-700', 'dark:text-gray-300'); } }); loadReservations(); }
    function viewReservationTicket(id) { const user = getCurrentUser(); if (!user) return; const all = JSON.parse(localStorage.getItem('smartHome_reservations') || '[]'); const r = all.find(x => x.id === id); if (r) { document.getElementById('ticket-number').textContent = '#' + r.id; document.getElementById('ticket-room').textContent = '#' + r.room; document.getElementById('ticket-location').textContent = r.locationName; document.getElementById('ticket-checkin').textContent = formatDateTime(r.checkin); document.getElementById('ticket-checkout').textContent = formatDateTime(r.checkout); document.getElementById('ticket-guests').textContent = r.guests + ' ' + t('person'); document.getElementById('control-room-info').textContent = t('room') + ' #' + r.room + ' â€¢ ' + r.locationName; showScreen('ticket'); } }
    function showCancelConfirm(id) { cancelResId = id; document.getElementById('cancel-modal').classList.remove('hidden'); document.getElementById('cancel-modal').classList.add('flex'); }
    function closeCancelModal() { cancelResId = null; document.getElementById('cancel-modal').classList.add('hidden'); document.getElementById('cancel-modal').classList.remove('flex'); }
    function confirmCancelReservation() { if (cancelResId) { updateReservation(cancelResId, { status: 'cancelled' }); showToast(t('reservation_cancelled'), 'info'); loadReservations(); closeCancelModal(); } }
    
    // Terms & Privacy Modals
    function openTermsModal() { document.getElementById('terms-modal').classList.remove('hidden'); document.getElementById('terms-modal').classList.add('flex'); }
    function closeTermsModal() { document.getElementById('terms-modal').classList.add('hidden'); document.getElementById('terms-modal').classList.remove('flex'); }
    function openPrivacyModal() { document.getElementById('privacy-modal').classList.remove('hidden'); document.getElementById('privacy-modal').classList.add('flex'); }
    function closePrivacyModal() { document.getElementById('privacy-modal').classList.add('hidden'); document.getElementById('privacy-modal').classList.remove('flex'); }

    // Nearest Location Functions
    let nearestLocationId = null;
    let userLocation = null;
    
    function calculateDistance(lat1, lon1, lat2, lon2) {
      // Haversine formula for distance calculation
      const R = 6371; // Earth's radius in km
      const dLat = (lat2 - lat1) * Math.PI / 180;
      const dLon = (lon2 - lon1) * Math.PI / 180;
      const a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon/2) * Math.sin(dLon/2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
      return R * c;
    }
    
    function findNearestLocation() {
      const btn = document.getElementById('find-location-btn');
      btn.innerHTML = '<span class="animate-spin inline-block">â³</span> ' + t('finding_location');
      btn.disabled = true;
      
      if (!navigator.geolocation) {
        showToast(t('location_error'), 'error');
        btn.innerHTML = '<span>ğŸ§­</span> <span data-i18n="use_my_location">' + t('use_my_location') + '</span>';
        btn.disabled = false;
        return;
      }
      
      navigator.geolocation.getCurrentPosition(
        (position) => {
          userLocation = { lat: position.coords.latitude, lng: position.coords.longitude };
          
          let nearestDist = Infinity;
          let nearestId = null;
          
          Object.keys(locationData).forEach(id => {
            const loc = locationData[id];
            const dist = calculateDistance(userLocation.lat, userLocation.lng, loc.lat, loc.lng);
            if (dist < nearestDist) {
              nearestDist = dist;
              nearestId = id;
            }
          });
          
          nearestLocationId = nearestId;
          const nearestLoc = locationData[nearestId];
          
          document.getElementById('nearest-name').textContent = nearestLoc.name;
          document.getElementById('nearest-distance').textContent = 'ğŸ“ ' + nearestDist.toFixed(1) + ' ' + t('km_away');
          document.getElementById('nearest-result').classList.remove('hidden');
          
          btn.innerHTML = 'âœ… ' + t('location_found');
          btn.disabled = false;
          
          showToast(t('location_found'), 'success');
          
          // Zoom to user location on map
          if (leafletMap) {
            // Add user marker
            const userIcon = L.divIcon({ className: '', html: '<div class="w-6 h-6 bg-blue-500 rounded-full border-3 border-white shadow-lg flex items-center justify-center"><span class="text-xs">ğŸ“</span></div>', iconSize: [24, 24], iconAnchor: [12, 12] });
            L.marker([userLocation.lat, userLocation.lng], { icon: userIcon }).addTo(leafletMap).bindPopup('<div class="popup-content"><p>' + t('use_my_location') + '</p></div>');
            
            // Fit bounds to show both user and nearest location
            const bounds = L.latLngBounds([
              [userLocation.lat, userLocation.lng],
              [nearestLoc.lat, nearestLoc.lng]
            ]);
            leafletMap.fitBounds(bounds, { padding: [50, 50] });
          }
          
          // Highlight nearest location
          updateLocationSelection(nearestId);
          
        },
        (error) => {
          let errorMsg = t('location_error');
          if (error.code === 1) errorMsg = t('location_denied');
          showToast(errorMsg, 'error');
          btn.innerHTML = '<span>ğŸ§­</span> <span data-i18n="use_my_location">' + t('use_my_location') + '</span>';
          btn.disabled = false;
        },
        { enableHighAccuracy: true, timeout: 10000, maximumAge: 60000 }
      );
    }
    
    function selectNearestLocation() {
      if (nearestLocationId) {
        selectLocationFromMap(nearestLocationId);
        document.getElementById('selected-location-info').scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    }
    
    // Room Controls
    function toggleSwitch(id) { document.getElementById('toggle-' + id).classList.toggle('active'); }
    function updateTemp(v) { document.getElementById('temp-value').textContent = v + 'Â°C'; }
    function openDoor() { const btn = document.getElementById('door-btn'); btn.innerHTML = 'â³ ' + t('opening'); btn.disabled = true; setTimeout(() => { btn.innerHTML = 'âœ… ' + t('door_opened'); setTimeout(() => { btn.innerHTML = 'ğŸ”“ ' + t('open_door'); btn.disabled = false; }, 3000); }, 2000); }

    // Init
    document.addEventListener('DOMContentLoaded', () => {
      applyDarkMode();
      setLanguage(currentLang);
      const user = getCurrentUser();
      if (user) { const saved = restoreAppState(); if (saved && !['welcome', 'login', 'register'].includes(saved)) showScreen(saved); else showScreen('dashboard'); }
      if (window.elementSdk) { window.elementSdk.init({ defaultConfig: { app_title: 'AkÄ±llÄ± Ev Kiralama Sistemi', welcome_subtitle: 'AkÄ±llÄ± odalara anlÄ±k rezervasyon, kontrol ve giriÅŸ sistemi' }, onConfigChange: async (config) => { if (config.app_title) document.getElementById('main-title').textContent = config.app_title; if (config.welcome_subtitle) document.getElementById('main-subtitle').textContent = config.welcome_subtitle; }, mapToCapabilities: () => ({ recolorables: [], borderables: [], fontEditable: undefined, fontSizeable: undefined }), mapToEditPanelValues: (config) => new Map([['app_title', config.app_title || ''], ['welcome_subtitle', config.welcome_subtitle || '']]) }); }
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b07dcb75055d21d',t:'MTc2NjE1NzM5Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
